<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[唐昊的博客]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2015-05-03T11:52:19.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[Tang Hao]]></name>
    <email><![CDATA[thddaniel92@gmail.com]]></email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Computer Organization]]></title>
    <link href="http://yoursite.com/2015/05/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84/"/>
    <id>http://yoursite.com/2015/05/03/计算机基本结构/</id>
    <published>2015-05-03T11:52:19.000Z</published>
    <updated>2015-05-03T11:52:19.000Z</updated>
    <content type="html"><![CDATA[<h1 id="计算机基本结构">计算机基本结构</h1><p>中央处理器的体系架构可以分为两类，一类为<code>冯·诺依曼结构</code>，一类为<code>哈佛结构</code>。</p>
<p>冯·诺依曼结构，是一种将<code>程序指令存储器</code>和<code>数据数据存储器</code>合并在一起的存储结构。</p>
<p>哈佛结构，是程序指令和数据分开存储，独立的程序总线和数据总线，指令和数据可以有不同的数据宽度。</p>
<h2 id="冯·诺依曼结构的要点">冯·诺依曼结构的要点</h2><p>明确了计算机的五大组成部分：</p>
<ol>
<li>运算器，CA：central arithmetical</li>
<li>控制器，CC：central control</li>
<li>存储器，M：memory</li>
<li>输入设备，I：input</li>
<li>输出设备，O：output</li>
</ol>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E4%BA%94%E5%A4%A7%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86.png" alt="五大组成部分"><br><a id="more"></a><br>存储程序的概念：</p>
<p>数据和程序均以<strong>二进制</strong>代码形式不加区别地存放在<strong>存储器</strong>中，存放位置由存储器的地址指定。</p>
<p>计算机在工作时能够自动地从存储器中取出指令加以执行。不需要通过“插线”临时组合电路完成不同任务。</p>
<h2 id="计算机结构的简化模型（模型机）">计算机结构的简化模型（模型机）</h2><h3 id="存储器">存储器</h3><p><img src="https://github.com/thddaniel/Myblog/raw/master/image/Computer%20Organization/%E6%A8%A1%E5%9E%8B%E6%9C%BA%E7%9A%84%E5%AD%98%E5%82%A8%E5%99%A8.png" alt="模型机的存储器"></p>
<p>注：该模型机中的“存储器”即指主存（内存）</p>
<h3 id="控制器">控制器</h3><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%A8%A1%E5%9E%8B%E6%9C%BA%E7%9A%84%E6%8E%A7%E5%88%B6%E5%99%A8.png" alt="模型机的控制器"></p>
<ul>
<li>IR存放“正在执行或即将执行的指令”</li>
<li>PC存放“下一条指令的存储单元地址”，具有自动增量计数的功能</li>
<li>MAR在访存时用于存放“存储单元的地址”</li>
<li>MDR在访存时用于存放“对存储单元读/写的数据”</li>
<li>指令译码部件对IR中的指令进行译码，以确定IR中存放的是哪一条指令</li>
<li>控制电路产生控制信号，在时序脉冲的同步下控制各个部件的动作</li>
</ul>
<h3 id="运算器">运算器</h3><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%A8%A1%E5%9E%8B%E6%9C%BA%E7%9A%84%E8%BF%90%E7%AE%97%E5%99%A8.png" alt="模型机的运算器"></p>
<ul>
<li>R0~Rn-1是n个<strong>通用寄存器</strong>，用于临时存放数据。数据可能来自存储器，也可能来自其它通用寄存器或ALU的输出</li>
<li>ALU对X、Y中的数据进行运算，将结果送到Z。X、Y、Z作为ALU的数据暂存器，可视为ALU的一部分</li>
<li>核心部件ALU用于完成算术运算和逻辑运算</li>
<li>F用于存放运算结果的状态 （零/正负/进位/溢出）</li>
</ul>
<h2 id="计算机执行指令的过程">计算机执行指令的过程</h2><ol>
<li>取指：控制器将指令的地址送往存储器，存储器按给定的地址读出指令内容，送回控制器。</li>
<li>译码：控制器分析指令的操作性质，控制器向有关部件发出指令所需的控制信号。</li>
<li>执行：控制器从通用寄存器或存储器取出操作数，控制器命令运算器对操作数进行指令规定的运算。</li>
<li>回写：将运算结果写入通用寄存器或存储器。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="执行过程"></p>
<h1 id="指令系统体系结构">指令系统体系结构</h1><p>PC领域: <code>X86</code>是由Intel推出的一种复杂指令集CISC。</p>
<p>嵌入式领域：</p>
<ul>
<li>Advanced RISC Machine公司的ARM</li>
<li>MIPS公司的MIPS</li>
<li>IBM和Motorola的PowerPC</li>
<li>Motorola公司独有的内核68K/COLDFIRE</li>
</ul>
<h2 id="x86体系结构">x86体系结构</h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/x86.png" alt="x86"></p>
<p>寄存器模型：</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/x86%E5%AF%84%E5%AD%98%E5%99%A8%E6%A8%A1%E5%9E%8B.png" alt="x86寄存器模型"></p>
<p><strong>8086的主要特点：</strong></p>
<ol>
<li>内部的通用寄存器为16位，既能处理16位数据，也能处理8位数据。</li>
<li>对外有16根数据线和20根地址线，可寻址的内存空间为1MByte（2^20)。</li>
<li>物理地址的形成采用“段加偏移”的方式。</li>
</ol>
<p><strong>通用寄存器：</strong></p>
<ul>
<li>AX （Accumulator）： 存放乘除等指令的操作数</li>
<li>BX （Base）： 存放存储单元的偏移地址</li>
<li>CX （Count）： 存放计数值</li>
<li>DX （Data）： 乘法运算产生的部分积，除法运算的部分被除数</li>
<li>SP （Stack Pointer）：堆栈指针，与SS配合使用，可指向目前的堆栈位置。</li>
<li>BP （Base Pointer）：基址指针寄存器，可用作SS的一个相对基址位置。</li>
<li>SI （Source Index）：源变址寄存器可用来存放相对于DS段之源变址指针。</li>
<li>DI （Destination Index）：目的变址寄存器，可用来存放相对于 ES 段之目的变址指针。</li>
</ul>
<p><strong>指令指针寄存器IP（Instruction Pointer）：</strong></p>
<ul>
<li>保存一个内存地址，指向当前需要取出的指令。</li>
<li>当CPU从内存中取出一个指令后，IP会自动增加，指向下一指令的地址（注：实际情况会复杂的多）。</li>
<li>程序员不能直接对IP进行存取操作。</li>
<li>转移指令、过程调用/返回指令等会改变IP的内容</li>
</ul>
<p>8086对外有20位地址线，寻址范围：2^20=1M字节单元。</p>
<p><strong>标志位 FLAGS</strong></p>
<p>标志位分为两大类：</p>
<ol>
<li>状态标志，反映CPU的工作状态。例如：执行加法运算时是否产生进位。</li>
<li>控制标志，对CPU的运行起特定控制作用。例如：以单步方式还是连续方式运行，是否允许响应外部中断请求。</li>
</ol>
<p>8086的标志位：</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/8086%E7%9A%84%E6%A0%87%E5%BF%97%E4%BD%8D.png" alt="8086的标志位"></p>
<p><strong>段寄存器（Segment Register）</strong><br>与其它寄存器联合生成存储器地址。</p>
<ul>
<li>CS ：代码段寄存器（Code Segment）</li>
<li>DS ：数据段寄存器（Data Segment）</li>
<li>ES ：附加段寄存器（Extra Segment）</li>
<li>SS ：堆栈段寄存器（Stack Segment）</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80.png" alt="物理地址"></p>
<h2 id="x86指令简介">x86指令简介</h2><h3 id="传送指令">传送指令</h3><p>作用：把数据或地址传送到寄存器或存储器单元中。</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4.png" alt="传送指令"></p>
<p>示例：</p>
<p>MOV指令,格式：MOV DST, SRC,DST表示目的操作数，SRC表示源操作数。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MOV</span> <span class="number">EBX</span>, <span class="number">40</span>  //直接给出操作数</span><br><span class="line"><span class="keyword">MOV</span> <span class="literal">AL</span>, <span class="literal">BL</span> //给出存放操作数的寄存器名称</span><br><span class="line"><span class="keyword">MOV</span> <span class="number">ECX</span>, [<span class="number">1000H</span>] //给出存放操作数的存储器地址</span><br><span class="line"><span class="keyword">MOV</span> [<span class="literal">DI</span>], <span class="number">AX</span> //给出存放“存放操作数的存储器地址”的寄存器名称</span><br><span class="line"><span class="keyword">MOV</span> <span class="preprocessor">WORD</span> <span class="preprocessor">PTR</span>[<span class="number">BX</span>+<span class="literal">SI</span>*<span class="number">2</span>+<span class="number">200H</span>], <span class="number">01H</span> //给出“存放操作数的存储器地址”的计算方法</span><br><span class="line"></span><br><span class="line">/*注：<span class="preprocessor">BYTE</span> <span class="preprocessor">PTR</span> ：字节长度标记</span><br><span class="line"><span class="preprocessor">WORD</span> <span class="preprocessor">PTR</span> ：字长度标记</span><br><span class="line"><span class="preprocessor">DWORD</span> <span class="preprocessor">PTR</span> ：双字长度标记*/</span><br></pre></td></tr></table></figure>
<p>不同MOV含义，所占的字节大小不一样。</p>
<h3 id="运算类指令">运算类指令</h3><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E5%92%8C%E7%A7%BB%E4%BD%8D%E6%8C%87%E4%BB%A4.png" alt="逻辑运算和移位指令"></p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E6%8C%87%E4%BB%A4.png" alt="算术运算指令"></p>
<h3 id="转移类指令">转移类指令</h3><p>作用: 改变指令执行顺序。</p>
<p>说明：</p>
<ul>
<li>根据是否有判断条件，分为<strong>无条件转移指令</strong>和<strong>条件转移指令</strong>两大类</li>
<li>根据转移目标地址的提供方式，可分为<strong>直接转移</strong>和<strong>间接转移</strong>两种方式</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A41.png" alt="条件转移指令1"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%9D%A1%E4%BB%B6%E8%BD%AC%E7%A7%BB%E6%8C%87%E4%BB%A42.png" alt="条件转移指令2"></p>
<h3 id="控制类指令">控制类指令</h3><p>作用：</p>
<ul>
<li>控制CPU的功能</li>
<li>对标志位进行操作</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E6%8E%A7%E5%88%B6%E7%B1%BB%E6%8C%87%E4%BB%A4.png" alt="控制类指令"></p>
<p>程序示例：<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B.png" alt="程序示例"></p>
<h2 id="MIPS体系结构">MIPS体系结构</h2><h2 id="MIPS指令简介">MIPS指令简介</h2><h2 id="ARM体系结构">ARM体系结构</h2><h2 id="ARM指令简介">ARM指令简介</h2><h1 id="单周期处理器">单周期处理器</h1><h1 id="#">#</h1><h1 id="乘法器和除法器">乘法器和除法器</h1>]]></content>
    <summary type="html">
    <![CDATA[<h1 id="计算机基本结构">计算机基本结构</h1><p>中央处理器的体系架构可以分为两类，一类为<code>冯·诺依曼结构</code>，一类为<code>哈佛结构</code>。</p>
<p>冯·诺依曼结构，是一种将<code>程序指令存储器</code>和<code>数据数据存储器</code>合并在一起的存储结构。</p>
<p>哈佛结构，是程序指令和数据分开存储，独立的程序总线和数据总线，指令和数据可以有不同的数据宽度。</p>
<h2 id="冯·诺依曼结构的要点">冯·诺依曼结构的要点</h2><p>明确了计算机的五大组成部分：</p>
<ol>
<li>运算器，CA：central arithmetical</li>
<li>控制器，CC：central control</li>
<li>存储器，M：memory</li>
<li>输入设备，I：input</li>
<li>输出设备，O：output</li>
</ol>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Computer%20Organization/%E4%BA%94%E5%A4%A7%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86.png" alt="五大组成部分"><br>]]>
    
    </summary>
    
      <category term="Open Courses" scheme="http://yoursite.com/tags/Open-Courses/"/>
    
      <category term="计算机原理" scheme="http://yoursite.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[keynote笔记]]></title>
    <link href="http://yoursite.com/2015/04/20/keynote%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2015/04/20/keynote笔记/</id>
    <published>2015-04-20T18:18:00.000Z</published>
    <updated>2015-04-30T12:19:35.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>制作keynote除了一些技巧外，更需要提高自己的<strong>审美观</strong>。这点得慢慢来。</li>
<li>制作keynote的时候,<strong>首先要明确这是单纯用来给人看的，还是自己用来配合演讲的。</strong>这完全是两种风格的幻灯片。通常单纯提供个别人看的，文字图表会比较多。作者把想讲的的内容都放进了幻灯片里了。</li>
<li>要保证<strong>视觉元素的一致性与整个幻灯片的完整性</strong>，要有逻辑性，尤其是当演讲内容很多的时候，不要把幻灯片做的支离破碎。这样可以让观众更好的理解演讲者讲的内容。</li>
<li>根据不同的场景，不同的观众，选择不同的<strong>字体效果</strong>（大小、形状、颜色(善用取色放大镜)、下划线等等）。幻灯片<strong>背景</strong>要保证与所讲内容主题匹配。比如介绍书籍时，背景可以是个书架，然后书依次显示到书架上。这几点要慎重考虑。</li>
<li>keynote可以对图片进行简单的裁剪和修饰(Edit Mask with shape&amp; Instant Alpha)，有时候图片或者视频更能表达出演讲者所想讲的内容，对观众的视觉冲击力更大，可以采用声画同步。<a id="more"></a></li>
<li>Shape图片里不要直接在里面编辑文字，最好新建Text后拖进图片里。</li>
</ul>
<hr>
<h1 id="Gist">Gist</h1><h2 id="次序">次序</h2><p>如果在不同的幻灯片里展示第一点、第二点…这样观众看到新的容易忘记旧的。</p>
<p>如果在同一页全部展示，会造成视觉的混乱，观众的注意力会被分散。</p>
<p><strong>所以当要展示多个内容的时候，要一次只让观众只注意一点，其余点采用幻灯片的透明效果展示出来。</strong></p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/keynote/%E6%AC%A1%E5%BA%8F.png" alt="次序"></p>
<ol>
<li>点击Text，填写<code>1</code>、<code>2</code>。</li>
<li>选择<code>2</code>，Build In 里选择 Appear。</li>
<li>选择<code>1</code>，Action 里选择 Opacity，透明度调到10%。Build Order里选择与上个动作同时发生。</li>
<li>继续添加<code>3</code>，选择Appear。把<code>2</code>透明度调低…以此类推…</li>
</ol>
<p>可以在结尾时，让所有之前透明的次序同时出现，进行总结。</p>
<ol>
<li>复制前一个幻灯片，全选次序，把 Build In 和 Action 调成无。</li>
<li>选择前一个幻灯片，Add an Effect，选择Dissolve。<br><br></li>
</ol>
<hr>
<h2 id="纵深关系">纵深关系</h2><p>每一页幻灯片是有层次的，比如当制作文字背景时，因为背景后添加，所以覆盖在文字上。这时候，选择文字右键Bring to Front，文字就显示在最上层了。同理也可以操作Send to back。</p>
<p>通常情况各种图片<strong>有层次顺序叠加</strong>配上相应的<strong>动画效果</strong>，能展示出好看的幻灯片。<br>例如要实现把app丢进垃圾桶的动态幻灯片，可以使用move动作效果，但是app会遮挡到垃圾桶。所以这里添加了垃圾桶前半部分图片，利用图片的纵深关系实现了最终的效果。<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/keynote/%E7%BA%B5%E6%B7%B1%E6%95%88%E6%9E%9C.png" alt="纵深效果"></p>
<p><br></p>
<hr>
<h2 id="Magic_Move">Magic Move</h2><p>如果上一页幻灯片和下一页幻灯片，同时有相同的元素存在，比如仅仅文字大小不同，或者图片摆放不同。在这种情况就可以采用神奇移动的效果。这个效果经常使用，会大大增强幻灯片的表现力。</p>
<p>下面有三张幻灯片，都有相同的元素。第一张内容文字杂乱无序，选中第一张幻灯片，动作效果选择<code>Magic Move</code>。</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/keynote/magicmove1.png" alt="magicmove1"></p>
<p>播放到下一页时，相同元素就会移动到指定的位置。</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/keynote/magicmove2.png" alt="magicmove2"></p>
<p>同理建立第三张幻灯片，把要呈现的元素复制到第三张的幻灯片中。选中第二张幻灯片，动作效果选择<code>Magic Move</code>。</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/keynote/magicmove3.png" alt="magicmove3"></p>
<p>神奇移动时间设置不要太慢，通常大概0.7~0.8秒。</p>
<hr>
<p>图片视频资源网站：</p>
<ul>
<li><a href="http://www.shutterstock.com" target="_blank" rel="external">shutterstock</a></li>
<li><a href="http://www.dreamstime.com/" target="_blank" rel="external">dreamstime</a></li>
<li><a href="http://www.shutterstock.com" target="_blank" rel="external">istockphoto</a></li>
<li><a href="http://www.iconarchive.com" target="_blank" rel="external">iconarchive</a></li>
<li><a href="https://www.iconfinder.com" target="_blank" rel="external">iconfinder</a></li>
<li><a href="https://unsplash.com/" target="_blank" rel="external">unsplash</a>人物、生活、自然类素材较多，素材尺寸大多在5k 像素。基本上每天更新一张。</li>
<li><a href="http://realisticshots.com/" target="_blank" rel="external">Realistic Shots</a>素材尺寸大多在2.5k 像素。</li>
<li><a href="http://freenaturestock.com/" target="_blank" rel="external">Free Nature Stock</a>主打自然类素材，素材尺寸大多在5k 像素。</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li>制作keynote除了一些技巧外，更需要提高自己的<strong>审美观</strong>。这点得慢慢来。</li>
<li>制作keynote的时候,<strong>首先要明确这是单纯用来给人看的，还是自己用来配合演讲的。</strong>这完全是两种风格的幻灯片。通常单纯提供个别人看的，文字图表会比较多。作者把想讲的的内容都放进了幻灯片里了。</li>
<li>要保证<strong>视觉元素的一致性与整个幻灯片的完整性</strong>，要有逻辑性，尤其是当演讲内容很多的时候，不要把幻灯片做的支离破碎。这样可以让观众更好的理解演讲者讲的内容。</li>
<li>根据不同的场景，不同的观众，选择不同的<strong>字体效果</strong>（大小、形状、颜色(善用取色放大镜)、下划线等等）。幻灯片<strong>背景</strong>要保证与所讲内容主题匹配。比如介绍书籍时，背景可以是个书架，然后书依次显示到书架上。这几点要慎重考虑。</li>
<li>keynote可以对图片进行简单的裁剪和修饰(Edit Mask with shape&amp; Instant Alpha)，有时候图片或者视频更能表达出演讲者所想讲的内容，对观众的视觉冲击力更大，可以采用声画同步。]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Makefile basics]]></title>
    <link href="http://yoursite.com/2015/04/16/makefile/"/>
    <id>http://yoursite.com/2015/04/16/makefile/</id>
    <published>2015-04-16T19:18:00.000Z</published>
    <updated>2015-04-28T11:03:37.000Z</updated>
    <content type="html"><![CDATA[<p>每次看完文档，过一段时间不用就忘记了。今天做毕业设计需要写Makefile,又重新看了一下<a href="http://www.gnu.org/software/make/manual/make.html" target="_blank" rel="external">GNU make</a>，干脆把常用的提取出来。以后也把一些常用的函数等等写在博客好了，我这记忆力也是没救了。</p>
<hr>
<p>后来google发现阮一峰老师总结的很好。文中部分内容来自<a href="http://www.ruanyifeng.com/blog/2015/02/make.html" target="_blank" rel="external">阮一峰Make命令教程</a>,以后发现常用的知识就在这篇补充好了。</p>
<hr>
<h1 id="Makefile">Makefile</h1><p>Makefile文件由一系列规则（rules）构成。每条规则的形式如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">target</span>&gt;</span> : <span class="tag">&lt;<span class="title">prerequisites</span>&gt;</span> </span><br><span class="line">[tab]  <span class="tag">&lt;<span class="title">commands</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>目标（target）是必须的，不能省略。前置条件（prerequisites）和命令（commands）都是可选的，但是必须要有一个。</p>
<p>在Makefile中，规则的顺序是很重要的，因为，<strong>Makefile中只应该有一个最终目标</strong>，其它的目标都是被这个目标所连带出来的，所以一定要让make知道你的最终目标是什么。<a id="more"></a></p>
<h2 id="目标（target）">目标（target）</h2><p>一个目标（target）就构成一条规则。目标通常是文件名，指明Make命令所要构建的对象。目标可以是一个文件名，也可以是多个文件名，之间用空格分隔。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test:<span class="tag">a</span><span class="class">.c</span> <span class="tag">b</span><span class="class">.c</span> <span class="tag">a</span><span class="class">.h</span>	gcc -o test <span class="tag">a</span><span class="class">.c</span> <span class="tag">b</span>.c</span><br></pre></td></tr></table></figure>
<p>除了文件名，目标还可以是某个操作的名字，这称为”伪目标”（phony target）。</p>
<ul>
<li><code>all</code>    所有目标的目标，其功能一般是编译所有的目标</li>
<li><code>clean</code>    删除所有被make创建的文件</li>
<li><code>install</code>    安装已编译好的程序，其实就是把目标可执行文件拷贝到指定的目录中去</li>
<li><code>print</code>    列出改变过的源文件</li>
<li><code>tar</code>    把源程序打包备份. 也就是一个tar文件</li>
<li><code>dist</code>    创建一个压缩文件, 一般是把tar文件压成Z文件. 或是gz文件</li>
<li><code>TAGS</code>    更新所有的目标, 以备完整地重编译使用</li>
<li><code>check</code> 或 <code>test</code>    一般用来测试makefile的流程</li>
</ul>
<p>下面代码的目标是clean，它不是文件名，而是一个操作的名字，属于”伪目标 “，作用是删除对象文件。但是，如果当前目录中，正好有一个文件叫做clean，那么这个命令不会执行。因为Make发现clean文件已经存在，就认为没有必要重新构建了，就不会执行指定的rm命令。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">clean:</span></span><br><span class="line">      rm *.o</span><br></pre></td></tr></table></figure>
<p>为了避免这种情况，可以明确声明clean是”伪目标”，写法如下。声明clean是”伪目标”之后，make就不会去检查是否存在一个叫做clean的文件，而是每次运行都执行对应的命令。像.PHONY这样的内置目标名还有不少，可以查看<a href="http://www.gnu.org/software/make/manual/html_node/Special-Targets.html#Special-Targets" target="_blank" rel="external">手册</a>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.PHONY</span>: clean</span><br><span class="line">clean:</span><br><span class="line">        rm *<span class="class">.o</span> temp</span><br></pre></td></tr></table></figure>
<p>如果Make命令运行时没有指定目标，默认会执行Makefile文件的第一个目标。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">utorial</span>:</span><br><span class="line">	@# <span class="attribute">todo</span>: have this actually run some kind of tutorial wizard?</span><br><span class="line">	<span class="variable">@echo</span> <span class="string">"Please read the 'Makefile' file to go through this tutorial"</span></span><br></pre></td></tr></table></figure>
<p>执行make命令相当于make tutorial。</p>
<h2 id="前置条件（prerequisites）">前置条件（prerequisites）</h2><p>前置条件通常是一组文件名，之间用空格分隔。它指定了”目标”是否重新构建的判断标准：只要有一个前置文件不存在，或者有过更新（前置文件的last-modification时间戳比目标的时间戳新），”目标”就需要重新构建。</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">result</span>.txt: source.txt</span><br><span class="line">    cp source.txt <span class="literal">result</span>.txt</span><br></pre></td></tr></table></figure>
<p>上面代码中，构建 result.txt 的前置条件是 source.txt 。如果当前目录中，source.txt 已经存在，那么make result.txt可以正常运行，否则必须再写一条规则，来生成 source.txt 。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span>.tx<span class="variable">t:</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"this is the source"</span> &gt; <span class="keyword">source</span>.txt</span><br></pre></td></tr></table></figure>
<p>上面代码中，source.txt后面没有前置条件，就意味着它跟其他文件都无关，只要这个文件还不存在，每次调用make source.txt，它都会生成。</p>
<h2 id="命令（commands）">命令（commands）</h2><p>命令（commands）表示如何更新目标文件，由一行或多行的Shell命令组成。它是构建”目标”的具体指令，它的运行结果通常就是生成目标文件。<br>每行命令之前必须有一个tab键。如果想用其他键，可以用内置变量.RECIPEPREFIX声明。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.RECIPEPREFIX = &gt;</span><br><span class="line"><span class="keyword">al</span><span class="variable">l:</span></span><br><span class="line">&gt; <span class="keyword">echo</span> Hello, world</span><br></pre></td></tr></table></figure>
<p>需要注意的是，每行命令在一个单独的shell中执行。这些Shell之间没有继承关系。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var-lost:</span><br><span class="line">    <span class="built_in">export</span> foo=bar</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"foo=[$<span class="variable">$foo</span>]"</span></span><br></pre></td></tr></table></figure>
<p>上面代码执行后（make var-lost），取不到foo的值。因为两行命令在两个不同的进程执行。一个解决办法是将两行命令写在一行，中间用分号分隔。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var-kept:</span><br><span class="line">    <span class="built_in">export</span> foo=bar; <span class="built_in">echo</span> <span class="string">"foo=[$<span class="variable">$foo</span>]"</span></span><br></pre></td></tr></table></figure>
<p>另一个解决办法是在换行符前加反斜杠转义。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var-kept:</span><br><span class="line">    <span class="built_in">export</span> foo=bar; \</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"foo=[$<span class="variable">$foo</span>]"</span></span><br></pre></td></tr></table></figure>
<p>最后一个方法是加上.ONESHELL:命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.ONESHELL:</span><br><span class="line">var-kept:</span><br><span class="line">    <span class="built_in">export</span> foo=bar; </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"foo=[$<span class="variable">$foo</span>]"</span></span><br></pre></td></tr></table></figure>
<p>If you want to export specific variables to a <strong>sub-make</strong>, use the export directive, like this: <code>export variable</code> …</p>
<p>If you want to prevent a variable from being exported, use the unexport directive, like this: <code>unexport variable</code> …</p>
<h1 id="常用语法">常用语法</h1><h2 id="注释">注释</h2><p>井号（#）在Makefile中表示注释。如果要使用或者输出”#”字符, 需要进行转义, “#“</p>
<h2 id="回声（echoing）">回声（echoing）</h2><p>正常情况下，<strong>make会打印每条命令</strong>，然后再执行，这就叫做回声（echoing）。</p>
<ul>
<li>不用前缀   : 输出执行的命令以及命令执行的结果, 出错的话停止执行</li>
<li>前缀 <code>@</code>  : 只输出命令执行的结果, 出错的话停止执行</li>
<li>前缀 <code>-</code>   : 命令执行有错的话, 忽略错误, 继续执行</li>
</ul>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">test:</span></span><br><span class="line">    <span class="preprocessor"># 这是测试</span></span><br></pre></td></tr></table></figure>
<p>执行上面的规则，会得到下面的结果。</p>
<p>$ make test</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># 这是测试</span></span><br></pre></td></tr></table></figure>
<p>在命令的前面加上@，就可以关闭回声。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">test:</span></span><br><span class="line">    @<span class="preprocessor"># 这是测试</span></span><br></pre></td></tr></table></figure>
<p>现在再执行make test，就不会有任何输出。<br>由于在构建过程中，需要了解当前在执行哪条命令，<strong>所以通常只在注释和纯显示的echo命令前面加上@。</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">test</span>:</span><br><span class="line">    @# 这是测试</span><br><span class="line">    <span class="variable">@echo</span> TODO</span><br></pre></td></tr></table></figure>
<h2 id="通配符">通配符</h2><p>通配符（wildcard）用来指定一组符合条件的文件名。Makefile 的通配符与 Bash 一致，主要有星号（*）、问号（？）和 […] 。</p>
<ul>
<li><code>*</code>      表示任意一个或多个字符</li>
<li><code>?</code>      表示任意一个字符</li>
<li><code>[...]</code>  ex. [abcd] 表示a,b,c,d中任意一个字符, [^abcd]表示除a,b,c,d以外的字符, [0-9]表示 0~9中任意一个数字</li>
<li><code>~</code>      表示用户的home目录</li>
</ul>
<p>比如， *.o 表示所有后缀名为o的文件。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">clean:</span></span><br><span class="line">        rm -f *.o</span><br></pre></td></tr></table></figure>
<h2 id="路径搜索">路径搜索</h2><p>当一个Makefile中涉及到大量源文件时(这些源文件和Makefile极有可能不在同一个目录中),</p>
<p>这时, 最好将源文件的路径明确在Makefile中, 便于编译时查找. Makefile中有个特殊的变量 VPATH 就是完成这个功能的.</p>
<p>指定了 VPATH 之后, 如果当前目录中没有找到相应文件或依赖的文件, Makefile 回到 VPATH 指定的路径中再去查找..</p>
<p>VPATH 使用方法:</p>
<ul>
<li><code>vpath &lt;directories&gt;</code>             当前目录中找不到文件时, 就从<code>directories</code>中搜索</li>
<li><code>vpath &lt;pattern&gt; &lt;directories&gt;</code>   符合<code>pattern</code>格式的文件, 就从<code>directories</code>中搜索</li>
<li><code>vpath &lt;pattern&gt;</code>                 清除符合<code>pattern</code>格式的文件搜索路径 </li>
<li><code>vpath</code>                           清除所有已经设置好的文件路径 </li>
</ul>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># 示例1 - 当前目录中找不到文件时, 按顺序从 src目录 ../parent-dir目录中查找文件</span></span><br><span class="line">VPATH src:../parent-dir   </span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># 示例2 - .h结尾的文件都从 ./header 目录中查找</span></span><br><span class="line">VPATH %.h ./header</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># 示例3 - 清除示例2中设置的规则</span></span><br><span class="line">VPATH %.h</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># 示例4 - 清除所有VPATH的设置 </span></span><br><span class="line">VPATH</span><br></pre></td></tr></table></figure>
<h2 id="模式匹配">模式匹配</h2><p>Make命令允许对文件名，进行类似正则运算的匹配，主要用到的匹配符是%。比如，假定当前目录下有 f1.c 和 f2.c 两个源码文件，需要将它们编译为对应的对象文件。</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">%</span>.o: <span class="preprocessor">%</span>.c</span><br></pre></td></tr></table></figure>
<p>等同于下面的写法。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f1<span class="class">.o</span>: f1<span class="class">.c</span></span><br><span class="line">f2<span class="class">.o</span>: f2.c</span><br></pre></td></tr></table></figure>
<p><strong>使用匹配符%，可以将大量同类型的文件，只用一条规则就完成构建。</strong></p>
<h2 id="变量和赋值符">变量和赋值符</h2><p>Makefile 允许使用等号自定义变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">txt = Hello World</span><br><span class="line"><span class="built_in">test</span>:</span><br><span class="line">    @<span class="built_in">echo</span> $(txt)</span><br></pre></td></tr></table></figure>
<p>上面代码中，变量 txt 等于 Hello World。调用时，变量需要放在 <code>$( )</code> 之中。<br>调用Shell变量，需要在美元符号前，再加一个美元符号，这是因为Make命令会对美元符号转义。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span>:</span><br><span class="line">    @<span class="built_in">echo</span> $<span class="variable">$HOME</span></span><br></pre></td></tr></table></figure>
<p>有时，变量的值可能指向另一个变量。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">v1</span> = <span class="variable">$(v2)</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，变量 v1 的值是另一个变量 v2。这时会产生一个问题，v1 的值到底在定义时扩展（静态扩展），还是在运行时扩展（动态扩展）？如果 v2 的值是动态的，这两种扩展方式的结果可能会差异很大。</p>
<p>为了解决类似问题，Makefile一共提供了四个赋值运算符 （=、:=、？=、+=），它们的区别请看<a href="http://stackoverflow.com/questions/448910/makefile-variable-assignment" target="_blank" rel="external">StackOverflow</a>。其中 = 和 := 的区别在于, := 只能使用前面定义好的变量, = 可以使用后面定义的变量</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile内容</span></span><br><span class="line"><span class="constant">OBJS2 </span>= <span class="variable">$(</span><span class="constant">OBJS1)</span> programC.o</span><br><span class="line"><span class="constant">OBJS1 </span>= programA.o programB.o</span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span><span class="constant">OBJS2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash中执行 make, 可以看出虽然 OBJS1 是在 OBJS2 之后定义的, 但在 OBJS2中可以提前使用</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">programA.o programB.o programC.o</span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="comment"># Makefile内容</span></span><br><span class="line"><span class="constant">OBJS2 </span><span class="symbol">:</span>= <span class="variable">$(</span><span class="constant">OBJS1)</span> programC.o</span><br><span class="line"><span class="constant">OBJS1 </span><span class="symbol">:</span>= programA.o programB.o</span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span><span class="constant">OBJS2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash中执行 make, 可以看出 OBJS2 中的 $(OBJS1) 为空</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">programC.o</span><br></pre></td></tr></table></figure>
<h2 id="内置变量（Implicit_Variables）">内置变量（Implicit Variables）</h2><p>Make命令提供一系列内置变量，比如，$(CC) 指向当前使用的编译器，$(MAKE) 指向当前使用的Make工具。这主要是为了跨平台的兼容性，详细的内置变量清单见<a href="https://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html" target="_blank" rel="external">手册</a>。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">output</span><span class="keyword">:</span></span><br><span class="line">    $(CC) <span class="keyword">-</span>o <span class="keyword">output</span> <span class="keyword">input</span><span class="typename">.c</span></span><br></pre></td></tr></table></figure>
<h2 id="自动变量（Automatic_Variables）">自动变量（Automatic Variables）</h2><p>Make命令还提供一些自动变量，它们的值与当前规则有关。主要有以下几个。</p>
<h3 id="$@">$@</h3><p><code>$@</code>指代当前目标，就是Make命令当前构建的那个目标。比如，make foo的 <code>$@</code> 就指代foo。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">a</span><span class="class">.txt</span> <span class="tag">b</span><span class="class">.txt</span>: </span><br><span class="line">    touch $@</span><br></pre></td></tr></table></figure>
<p>等同于下面的写法。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">a</span><span class="class">.txt</span>:</span><br><span class="line">    touch <span class="tag">a</span><span class="class">.txt</span></span><br><span class="line"><span class="tag">b</span><span class="class">.txt</span>:</span><br><span class="line">    touch <span class="tag">b</span>.txt</span><br></pre></td></tr></table></figure>
<h3 id="$&lt;">$&lt;</h3><p><code>$&lt;</code>指代第一个前置条件。比如，规则为 t: p1 p2，那么$&lt; 就指代p1。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">a</span><span class="class">.txt</span>: <span class="tag">b</span><span class="class">.txt</span> c<span class="class">.txt</span></span><br><span class="line">    cp $&lt; $@</span><br></pre></td></tr></table></figure>
<p>等同于下面的写法。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">a</span><span class="class">.txt</span>: <span class="tag">b</span><span class="class">.txt</span> c<span class="class">.txt</span></span><br><span class="line">    cp <span class="tag">b</span><span class="class">.txt</span> <span class="tag">a</span>.txt</span><br></pre></td></tr></table></figure>
<h3 id="$?">$?</h3><p> <code>$?</code> 指代比目标更新的所有前置条件，之间以空格分隔。比如，规则为 t: p1 p2，其中 p2 的时间戳比 t 新，$?就指代p2。</p>
<h3 id="$^">$^</h3><p><code>$^</code> 指代所有前置条件，之间以空格分隔。比如，规则为 t: p1 p2，那么 $^ 就指代 p1 p2 。</p>
<h3 id="$*">$*</h3><p><code>$*</code> 指代匹配符 % 匹配的部分， 比如% 匹配 f1.txt 中的f1 ，<code>$*</code> 就表示 f1。</p>
<h3 id="$(@D)_和_$(@F)">$(@D) 和 $(@F)</h3><p><code>$(@D)</code> 和 <code>$(@F)</code> 分别指向 $@ 的目录名和文件名。比如，<code>$@</code>是 src/input.c，那么<code>$(@D)</code> 的值为 src ，<code>$(@F)</code> 的值为 input.c。</p>
<h3 id="$(&lt;D)_和_$(&lt;F)">$(&lt;D) 和 $(&lt;F)</h3><p><code>$(&lt;D)</code> 和 <code>$(&lt;F)</code> 分别指向 <code>$&lt;</code> 的目录名和文件名。<br>所有的自动变量清单，请看<a href="https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html" target="_blank" rel="external">手册</a>。下面是自动变量的一个例子。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dest/<span class="variable">%.</span>txt: src/<span class="variable">%.</span>txt</span><br><span class="line">    <span class="variable">@[</span> -d dest ] || mkdir dest</span><br><span class="line">    cp <span class="variable">$&lt;</span> <span class="variable">$@</span></span><br></pre></td></tr></table></figure>
<p>上面代码将 src 目录下的 txt 文件，拷贝到 dest 目录下。首先判断 dest 目录是否存在，如果不存在就新建，然后，<code>$&lt;</code> 指代前置文件（src/%.txt）， <code>$@</code> 指代目标文件（dest/%.txt）。</p>
<h2 id="判断和循环">判断和循环</h2><p>Makefile使用 Bash 语法，完成判断和循环。条件判断的关键字主要有 ifeq ifneq ifdef ifndef</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ife<span class="string">q (<span class="variable">$(</span>CC)</span>,gcc)</span><br><span class="line">  libs=<span class="variable">$(</span>libs_for_gcc)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  libs=<span class="variable">$(</span>normal_libs)</span><br><span class="line">endif</span><br></pre></td></tr></table></figure>
<p>上面代码判断当前编译器是否 gcc ，然后指定不同的库文件。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIST</span> = <span class="keyword">one</span> <span class="keyword">two</span> three</span><br><span class="line">all:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="keyword">LIST</span>); <span class="keyword">do</span> \</span><br><span class="line">        echo $<span class="label">$i</span>; \</span><br><span class="line">    done</span><br><span class="line"></span><br><span class="line">#等同于</span><br><span class="line"></span><br><span class="line">all:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">one</span> <span class="keyword">two</span> three; <span class="keyword">do</span> \</span><br><span class="line">        echo <span class="label">$i</span>; \</span><br><span class="line">    done</span><br></pre></td></tr></table></figure>
<p>上面代码的运行结果。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">one</span></span><br><span class="line"><span class="constant">two</span></span><br><span class="line"><span class="constant">three</span></span><br></pre></td></tr></table></figure>
<h2 id="函数">函数</h2><p>Makefile 还可以使用函数，格式如下。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> <span class="title">arguments</span>)</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$&#123;<span class="function"><span class="keyword">function</span> <span class="title">arguments</span>&#125;</span></span><br></pre></td></tr></table></figure>
<p>Makefile提供了许多<a href="http://www.gnu.org/software/make/manual/html_node/Functions.html" target="_blank" rel="external">内置函数</a>，可供调用。下面是几个常用的内置函数。</p>
<h3 id="shell_函数">shell 函数</h3><p>shell 函数用来执行 shell 命令 语法：<code>$(shell &lt;shell command&gt;)</code></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">srcfiles</span> := <span class="variable">$(shell echo src/&#123;00..99&#125;.txt)</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串函数">字符串函数</h3><p>（1）strip函数<br>功能: 去掉 <code>string</code> 字符串中开头和结尾的空字符</p>
<p>返回: 被去掉空格的字符串值</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="constant">VAL </span><span class="symbol">:</span>= <span class="string">"       aa  bb  cc "</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="string">"去除空格前: "</span> <span class="variable">$(</span><span class="constant">VAL)</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="string">"去除空格后: "</span> <span class="variable">$(</span>strip <span class="variable">$(</span><span class="constant">VAL)</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">去除空格前<span class="symbol">:</span>         aa  bb  cc </span><br><span class="line">去除空格后<span class="symbol">:</span>   aa bb cc</span><br></pre></td></tr></table></figure>
<p>（2）wildcard 函数<br>它的用法是：<code>$(wildcard PATTERN...)</code>。在Makefile中，它被展开为已经存在的、使用空格分开的、匹配此模式的所有文件列表。如果不存在任何符合此模式的文件，函数会忽略模式字符并返回空。</p>
<p>获取src目录下所有<code>.txt</code>结尾的文件<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">srcfiles</span> := <span class="variable">$(wildcard src/*.txt)</span></span><br></pre></td></tr></table></figure></p>
<p>（3）subst 函数<br>subst 函数用来文本替换，格式如下。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(subst <span class="keyword">from</span>,<span class="keyword">to</span>,<span class="type">text</span>)</span><br></pre></td></tr></table></figure>
<p>下面的例子将字符串”feet on the street”替换成”fEEt on the strEEt”。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(subst ee,EE,feet <span class="function_start"><span class="keyword">on</span></span> <span class="keyword">the</span> street)</span><br></pre></td></tr></table></figure>
<p>下面是一个稍微复杂的例子。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">comma</span>:= ,</span><br><span class="line"><span class="constant">empty</span>:=</span><br><span class="line"><span class="comment"># space变量用两个空变量作为标识符，当中是一个空格</span></span><br><span class="line"><span class="constant">space</span>:= <span class="variable">$(empty)</span> <span class="variable">$(empty)</span></span><br><span class="line"><span class="constant">foo</span>:= a b c</span><br><span class="line"><span class="constant">bar</span>:= <span class="variable">$(subst $(space)</span>,<span class="variable">$(comma)</span>,<span class="variable">$(foo)</span>)</span><br><span class="line"><span class="comment"># bar is now `a,b,c'.</span></span><br></pre></td></tr></table></figure>
<p>（4）patsubst函数<br>patsubst 函数用于模式匹配的替换，格式如下。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(</span>patsubst pattern,replacement,<span class="keyword">text</span>)</span><br></pre></td></tr></table></figure>
<p>下面的例子将文件名”x.c.c bar.c”，替换成”x.c.o bar.o”。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(patsubst %.<span class="built_in">c</span>,%.o,x.<span class="built_in">c</span>.<span class="built_in">c</span> bar.<span class="built_in">c</span>)</span><br></pre></td></tr></table></figure>
<p>（5）替换后缀名<br>替换后缀名函数的写法是：变量名 + 冒号 + 后缀名替换规则。它实际上patsubst函数的一种简写形式。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">min</span>: <span class="variable">$(</span>OUTPUT:.js=.<span class="keyword">min</span>.js)</span><br></pre></td></tr></table></figure>
<p>上面代码的意思是，将变量OUTPUT中的后缀名 .js 全部替换成 .min.js 。</p>
<p>（6）查找字符串函数: <code>$(findstring &lt;find&gt;,&lt;in&gt;)</code></p>
<p>功能: 在字符串 <code>in</code> 中查找 <code>find</code> 字符串</p>
<p>返回: 如果找到, 返回 <code>find</code> 字符串,  否则返回空字符串</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="constant">VAL </span><span class="symbol">:</span>= <span class="string">"       aa  bb  cc "</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>findstring aa,<span class="variable">$(</span><span class="constant">VAL)</span>)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>findstring ab,<span class="variable">$(</span><span class="constant">VAL)</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">aa</span><br></pre></td></tr></table></figure>
<p>（7）过滤函数: <code>$(filter &lt;pattern...&gt;,&lt;text&gt;)</code></p>
<p>功能: 以 <code>pattern</code> 模式过滤字符串 <code>text</code>, <em>保留</em> 符合模式 <code>pattern</code> 的单词, 可以有多个模式</p>
<p>返回: 符合模式 <code>pattern</code> 的字符串</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="built_in">all</span>:</span><br><span class="line">    @echo $(filter %.o %.a,<span class="function"><span class="keyword">program</span>.<span class="title">c</span></span> <span class="function"><span class="keyword">program</span>.<span class="title">o</span></span> <span class="function"><span class="keyword">program</span>.<span class="title">a</span></span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line"><span class="function"><span class="keyword">program</span>.<span class="title">o</span></span> <span class="function"><span class="keyword">program</span>.<span class="title">a</span></span></span><br></pre></td></tr></table></figure>
<p>（8）反过滤函数: <code>$(filter-out &lt;pattern...&gt;,&lt;text&gt;)</code></p>
<p>功能: 以 <code>pattern</code> 模式过滤字符串 <code>text</code>, <em>去除</em> 符合模式 <code>pattern</code> 的单词, 可以有多个模式</p>
<p>返回: 不符合模式 <code>pattern</code> 的字符串</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="built_in">all</span>:</span><br><span class="line">    @echo $(filter-<span class="type">out</span> %.o %.a,<span class="function"><span class="keyword">program</span>.<span class="title">c</span></span> <span class="function"><span class="keyword">program</span>.<span class="title">o</span></span> <span class="function"><span class="keyword">program</span>.<span class="title">a</span></span>)</span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line"><span class="function"><span class="keyword">program</span>.<span class="title">c</span></span></span><br></pre></td></tr></table></figure>
<p>（9）排序函数: <code>$(sort &lt;list&gt;)</code><br>功能: 给字符串 <code>list</code> 中的单词排序 (升序)</p>
<p>返回: 排序后的字符串</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="keyword">al</span><span class="variable">l:</span></span><br><span class="line">    @echo $(<span class="built_in">sort</span> bac <span class="keyword">abc</span> acb cab)</span><br><span class="line"></span><br><span class="line"># bash 中执行 <span class="keyword">make</span></span><br><span class="line">$ <span class="keyword">make</span></span><br><span class="line"><span class="keyword">abc</span> acb bac cab</span><br></pre></td></tr></table></figure>
<p>（10）取单词函数: <code>$(word &lt;n&gt;,&lt;text&gt;)</code><br>功能: 取字符串 <code>text</code> 中的 第<code>n</code>个单词 (n从1开始)</p>
<p>返回: <code>text</code> 中的第<code>n</code>个单词, 如果<code>n</code> 比 <code>text</code> 中单词个数要大, 则返回空字符串</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>word <span class="number">1</span>,aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>word <span class="number">5</span>,aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>word <span class="number">4</span>,aa bb cc dd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">aa</span><br><span class="line"></span><br><span class="line">dd</span><br></pre></td></tr></table></figure>
<p>（11）取单词串函数: <code>$(wordlist &lt;s&gt;,&lt;e&gt;,&lt;text&gt;)</code></p>
<p>功能: 从字符串<code>text</code>中取从<code>s</code>开始到<code>e</code>的单词串. <code>s</code>和<code>e</code>是一个数字.</p>
<p>返回: 从<code>s</code>到<code>e</code>的字符串</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>wordlist <span class="number">1</span>,<span class="number">3</span>,aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>word <span class="number">5</span>,<span class="number">6</span>,aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>word <span class="number">2</span>,<span class="number">5</span>,aa bb cc dd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">aa bb cc</span><br><span class="line"></span><br><span class="line">bb</span><br></pre></td></tr></table></figure>
<p>（12）单词个数统计函数: <code>$(words &lt;text&gt;)</code></p>
<p>功能: 统计字符串 <code>text</code> 中单词的个数</p>
<p>返回: 单词个数</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>words aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>words aabbccdd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>words )</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>（13）首单词函数: <code>$(firstword &lt;text&gt;)</code></p>
<p>功能: 取字符串 <code>text</code> 中的第一个单词</p>
<p>返回: 字符串 <code>text</code> 中的第一个单词</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>firstword aa bb cc dd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>firstword aabbccdd)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>firstword )</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">aa</span><br><span class="line">aabbccdd</span><br></pre></td></tr></table></figure>
<h3 id="文件名函数">文件名函数</h3><p>（1）取目录函数: <code>$(dir &lt;names...&gt;)</code></p>
<p>功能: 从文件名序列 `names&gt; 中取出目录部分</p>
<p>返回: 文件名序列 `names&gt; 中的目录部分</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="string">all:</span></span><br><span class="line">    <span class="annotation">@echo</span> $(dir <span class="regexp">/home/</span>a.c .<span class="regexp">/bb.c ../</span>c.c d.c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line"><span class="regexp">/home/</span> .<span class="regexp">/ ../</span> ./</span><br></pre></td></tr></table></figure>
<p>（2）取文件函数: <code>$(notdir &lt;names...&gt;)</code></p>
<p>功能: 从文件名序列 <code>names</code> 中取出非目录部分</p>
<p>返回: 文件名序列 <code>names</code> 中的非目录部分</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># <span class="type">Makefile</span> 内容</span><br><span class="line">all:</span><br><span class="line">    @echo $(notdir /home/a.<span class="built_in">c</span> ./bb.<span class="built_in">c</span> ../<span class="built_in">c</span>.<span class="built_in">c</span> d.<span class="built_in">c</span>)</span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line">a.<span class="built_in">c</span> bb.<span class="built_in">c</span> <span class="built_in">c</span>.<span class="built_in">c</span> d.<span class="built_in">c</span></span><br></pre></td></tr></table></figure>
<p>（3）取后缀函数: <code>$(suffix &lt;names...&gt;)</code></p>
<p>功能: 从文件名序列 <code>names</code> 中取出各个文件名的后缀</p>
<p>返回: 文件名序列 <code>names</code> 中各个文件名的后缀, 没有后缀则返回空字符串</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>suffix /home/a.c ./b.o ../c.a d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">.c .o .a</span><br></pre></td></tr></table></figure>
<p>（4）取前缀函数: <code>$(basename &lt;names...&gt;)</code></p>
<p>功能: 从文件名序列 <code>names</code> 中取出各个文件名的前缀</p>
<p>返回: 文件名序列 <code>names</code> 中各个文件名的前缀, 没有前缀则返回空字符串</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="string">all:</span></span><br><span class="line">    <span class="annotation">@echo</span> $(basename <span class="regexp">/home/</span>a.c .<span class="regexp">/b.o ../</span>c.a <span class="regexp">/home/</span>.d .e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line"><span class="regexp">/home/</span>a .<span class="regexp">/b ../</span>c <span class="regexp">/home/</span></span><br></pre></td></tr></table></figure>
<p>（5）加后缀函数: <code>$(addsuffix &lt;suffix&gt;,&lt;names...&gt;)</code></p>
<p>功能: 把后缀 <code>suffix</code> 加到 <code>names</code> 中的每个单词后面</p>
<p>返回: 加过后缀的文件名序列</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># <span class="type">Makefile</span> 内容</span><br><span class="line">all:</span><br><span class="line">    @echo $(addsuffix .<span class="built_in">c</span>,/home/a b ./<span class="built_in">c</span>.o ../d.<span class="built_in">c</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># bash 中执行 make</span><br><span class="line">$ make</span><br><span class="line">/home/a.<span class="built_in">c</span> b.<span class="built_in">c</span> ./<span class="built_in">c</span>.o.<span class="built_in">c</span> ../d.<span class="built_in">c</span>.<span class="built_in">c</span></span><br></pre></td></tr></table></figure>
<p>（6）加前缀函数: <code>$(addprefix &lt;prefix&gt;,&lt;names...&gt;)</code></p>
<p>功能: 把前缀 <code>prefix</code> 加到 <code>names</code> 中的每个单词前面</p>
<p>返回: 加过前缀的文件名序列</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line">all:</span><br><span class="line">    @<span class="built_in">echo</span> $(addprefix <span class="built_in">test</span>_,/home/a.c b.c ./d.c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line">$ make</span><br><span class="line"><span class="built_in">test</span>_/home/a.c <span class="built_in">test</span>_b.c <span class="built_in">test</span>_./d.c</span><br></pre></td></tr></table></figure>
<p>（7）连接函数: <code>$(join &lt;list1&gt;,&lt;list2&gt;)</code></p>
<p>功能: <code>list2</code> 中对应的单词加到 <code>list1</code> 后面</p>
<p>返回: 连接后的字符串</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>join a b c d,<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>join a b c d,<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>join a b c d e,<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">a1 b2 c3 d4</span><br><span class="line">a1 b2 c3 d4 <span class="number">5</span></span><br><span class="line">a1 b2 c3 d4 e</span><br></pre></td></tr></table></figure>
<h3 id="foreach函数">foreach函数</h3><p>语法: <code>$(foreach &lt;var&gt;,&lt;list&gt;,&lt;text&gt;)</code></p>
<p>示例:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line">targets <span class="symbol">:</span>= a b c d</span><br><span class="line">objects <span class="symbol">:</span>= <span class="variable">$(</span>foreach i,<span class="variable">$(</span>targets),<span class="variable">$(</span>i).o)</span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>targets)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>objects)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">a b c d</span><br><span class="line">a.o b.o c.o d.o</span><br></pre></td></tr></table></figure>
<h3 id="if">if</h3><p>这里的if是个函数, 和前面的条件判断不一样, 前面的条件判断属于Makefile的关键字</p>
<p>语法:</p>
<p><code>$(if &lt;condition&gt;,&lt;then-part&gt;)</code></p>
<p><code>$(if &lt;condition&gt;,&lt;then-part&gt;,&lt;else-part&gt;)</code></p>
<p>示例:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line">val <span class="symbol">:</span>= a</span><br><span class="line">objects <span class="symbol">:</span>= <span class="variable">$(</span><span class="keyword">if</span> <span class="variable">$(</span>val),<span class="variable">$(</span>val).o,nothing)</span><br><span class="line">no-objects <span class="symbol">:</span>= <span class="variable">$(</span><span class="keyword">if</span> <span class="variable">$(</span>no-val),<span class="variable">$(</span>val).o,nothing)</span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>objects)</span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>no-objects)</span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make</span><br><span class="line">a.o</span><br><span class="line">nothing</span><br></pre></td></tr></table></figure>
<h3 id="call_-_创建新的参数化函数">call - 创建新的参数化函数</h3><p>语法:</p>
<p><code>$(call &lt;expression&gt;,&lt;parm1&gt;,&lt;parm2&gt;,&lt;parm3&gt;...)</code></p>
<p>示例:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Makefile 内容</span><br><span class="line"><span class="built_in">log</span> = <span class="string">"====debug===="</span> $(<span class="number">1</span>) <span class="string">"====end===="</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">al</span><span class="variable">l:</span></span><br><span class="line">    @echo $(<span class="built_in">call</span> <span class="built_in">log</span>,<span class="string">"正在 Make"</span>)</span><br><span class="line"></span><br><span class="line"># bash 中执行 <span class="keyword">make</span></span><br><span class="line">$ <span class="keyword">make</span></span><br><span class="line">====<span class="keyword">debug</span>==== 正在 Make ====end====</span><br></pre></td></tr></table></figure>
<h3 id="origin_-_判断变量的来源">origin - 判断变量的来源</h3><p>语法:</p>
<p><code>$(origin &lt;variable&gt;)</code></p>
<p>返回值有如下类型:</p>
<ul>
<li><code>undefined</code>    <code>variable</code> 没有定义过</li>
<li><code>default</code>    <code>variable</code> 是个默认的定义, 比如 CC 变量</li>
<li><code>environment</code>    <code>variable</code> 是个环境变量, 并且 make时没有使用 -e 参数</li>
<li><code>file</code>    <code>variable</code> 定义在Makefile中</li>
<li><code>command line</code>    <code>variable</code> 定义在命令行中</li>
<li><code>override</code>    <code>variable</code> 被 override 重新定义过</li>
<li><code>automatic</code>    <code>variable</code> 是自动化变量</li>
</ul>
<p>示例:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line">val-<span class="keyword">in</span>-file <span class="symbol">:</span>= test-file</span><br><span class="line">override val-override <span class="symbol">:</span>= test-override</span><br><span class="line"></span><br><span class="line"><span class="symbol">all:</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin <span class="keyword">not</span>-define)    <span class="comment"># not-define 没有定义</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin <span class="constant">CC)</span>            <span class="comment"># CC 是Makefile默认定义的变量</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin <span class="constant">PATH)</span>         <span class="comment"># PATH 是 bash 环境变量</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin val-<span class="keyword">in</span>-file)    <span class="comment"># 此Makefile中定义的变量</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin val-<span class="keyword">in</span>-cmd)    <span class="comment"># 这个变量会加在 make 的参数中</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin val-override) <span class="comment"># 此Makefile中定义的override变量</span></span><br><span class="line">    <span class="variable">@echo</span> <span class="variable">$(</span>origin @)             <span class="comment"># 自动变量, 具体前面的介绍</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line"><span class="variable">$ </span>make val-<span class="keyword">in</span>-cmd=val-cmd</span><br><span class="line">undefined</span><br><span class="line">default</span><br><span class="line">environment</span><br><span class="line">file</span><br><span class="line">command line</span><br><span class="line">override</span><br><span class="line">automatic</span><br></pre></td></tr></table></figure>
<h3 id="make_控制函数">make 控制函数</h3><p>产生一个致命错误: <code>$(error &lt;text ...&gt;)</code></p>
<p>功能: 输出错误信息, 停止Makefile的运行</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># Makefile 内容</span></span><br><span class="line">all:</span><br><span class="line">    $(<span class="keyword">error</span> there <span class="keyword">is</span> an <span class="keyword">error</span>!)</span><br><span class="line">    @echo <span class="string">"这里不会执行!"</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># bash 中执行 make</span></span><br><span class="line">$ make</span><br><span class="line">Makefile:<span class="number">2</span>: *** there <span class="keyword">is</span> an <span class="keyword">error</span>!.  <span class="keyword">Stop</span>.</span><br></pre></td></tr></table></figure>
<p>输出警告: <code>$(warning &lt;text ...&gt;)</code></p>
<p>功能: 输出警告信息, Makefile继续运行</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile 内容</span></span><br><span class="line"><span class="attribute">all</span>:</span><br><span class="line">    $(warning there <span class="keyword">is</span> an warning!)</span><br><span class="line">    <span class="property">@echo</span> <span class="string">"这里会执行!"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bash 中执行 make</span></span><br><span class="line">$ make</span><br><span class="line"><span class="attribute">Makefile</span>:<span class="number">2</span>: there <span class="keyword">is</span> an warning!</span><br><span class="line">这里会执行!</span><br></pre></td></tr></table></figure>
<h1 id="内核中的Makefile">内核中的Makefile</h1><p>2.6.30.4linux内核，对于Makefile的描述在Documentation/kbuild/makefiles.txt里</p>
<pre><code>Makefile        <span class="operator">the</span> top Makefile. 
.config            <span class="operator">the</span> kernel configuration <span class="built_in">file</span>.
arch/$(ARCH)/Makefile    <span class="operator">the</span> arch Makefile.
scripts/Makefile.*    common rules etc. <span class="keyword">for</span> all kbuild Makefiles.
kbuild Makefiles    there are about <span class="number">500</span> <span class="operator">of</span> these. 
</code></pre><p>具体参考<a href="http://www.cnblogs.com/amanlikethis/p/3675486.html#lab23" target="_blank" rel="external">linux源码Makefile的详细分析</a>,<a href="http://blog.chinaunix.net/uid-26806098-id-3141136.html" target="_blank" rel="external">Linux 内核 Makefile 体系简单分析</a></p>
<h1 id="自己编写Makefile">自己编写Makefile</h1><p>模仿linux内核scripts文件夹里的makefile的编写思路。Makefile主要分成3类:</p>
<ul>
<li>顶层目录的Makefile</li>
<li>顶层目录的Makefile.build </li>
<li>各级子目录的Makefile</li>
</ul>
<h2 id="各级子目录的Makefile">各级子目录的Makefile</h2><p>它最简单，形式如下：</p>
<pre><code>obj-y += file<span class="class">.o</span>
obj-y += subdir/
</code></pre><p>“obj-y += file.o”表示把当前目录下的file.c编进程序里。</p>
<p>“obj-y += subdir/“表示要进入subdir这个子目录下去寻找文件来编进程序里，是哪些文件由subdir目录下的Makefile决定。<strong>注意: “subdir/“中的斜杠”/“不可省略</strong></p>
<h2 id="顶层目录的Makefile">顶层目录的Makefile</h2><p>它除了定义obj-y来指定根目录下要编进程序去的<strong>文件、子目录</strong>外，主要是定义<strong>工具链、编译参数、链接参数</strong>──就是文件中用export导出的各变量。</p>
<pre><code>CROSS_COMPILE = arm-linux-
AS        = <span class="variable">$(</span>CROSS_COMPILE)as
LD        = <span class="variable">$(</span>CROSS_COMPILE)ld
CC        = <span class="variable">$(</span>CROSS_COMPILE)gcc
CPP        = <span class="variable">$(</span>CC) -E
AR        = <span class="variable">$(</span>CROSS_COMPILE)ar
NM        = <span class="variable">$(</span>CROSS_COMPILE)nm

STRIP        = <span class="variable">$(</span>CROSS_COMPILE)<span class="keyword">strip</span>
OBJCOPY        = <span class="variable">$(</span>CROSS_COMPILE)objcopy
OBJDUMP        = <span class="variable">$(</span>CROSS_COMPILE)objdump

export AS LD CC CPP AR NM
export STRIP OBJCOPY OBJDUMP

CFLAGS := -Wall -Werror -O2 -g
CFLAGS += -I <span class="variable">$(</span>shell <span class="keyword">pwd</span>)/include

LDFLAGS := -lm -lfreetype -lts -lpthread -ljpeg

export CFLAGS LDFLAGS

TOPDIR := <span class="variable">$(</span>shell <span class="keyword">pwd</span>)
export TOPDIR

TARGET := digitpic
&lt;!--￼<span class="number">64</span>--&gt;

PHONY := __build
__build:


obj-y :=
subdir-y :=

include Makefile

# obj-y := a.o b.o c/ d/
# <span class="variable">$(</span><span class="keyword">filter</span> <span class="variable">%/</span>, <span class="variable">$(</span>obj-y))   : c/ d/
# __subdir-y  : c d
# subdir-y    : c d
__subdir-y    := <span class="variable">$(</span>patsubst <span class="variable">%/</span>,<span class="variable">%,</span><span class="variable">$(</span><span class="keyword">filter</span> <span class="variable">%/</span>, <span class="variable">$(</span>obj-y)))
subdir-y    += <span class="variable">$(</span>__subdir-y)

# c/built-<span class="keyword">in</span>.o d/built-<span class="keyword">in</span>.o
subdir_objs := <span class="variable">$(</span>foreach f,<span class="variable">$(</span>subdir-y),<span class="variable">$(</span>f)/built-<span class="keyword">in</span>.o)

# a.o b.o
cur_objs := <span class="variable">$(</span><span class="keyword">filter</span>-out <span class="variable">%/</span>, <span class="variable">$(</span>obj-y))
dep_files := <span class="variable">$(</span>foreach f,<span class="variable">$(</span>cur_objs),.<span class="variable">$(</span>f).d)
dep_files := <span class="variable">$(</span>wildcard <span class="variable">$(</span>dep_files))

ifneq (<span class="variable">$(</span>dep_files),)
  include <span class="variable">$(</span>dep_files)
endif


PHONY += <span class="variable">$(</span>subdir-y)


__build : <span class="variable">$(</span>subdir-y) built-<span class="keyword">in</span>.o

<span class="variable">$(</span>subdir-y):
    make -C <span class="variable">$@</span> -f <span class="variable">$(</span>TOPDIR)/Makefile.build

built-<span class="keyword">in</span>.o : <span class="variable">$(</span>cur_objs) <span class="variable">$(</span>subdir_objs)
    <span class="variable">$(</span>LD) -r -o <span class="variable">$@</span> <span class="variable">$^</span>

dep_file = .<span class="variable">$@</span>.d

<span class="variable">%.</span>o : <span class="variable">%.</span>c
    <span class="variable">$(</span>CC) <span class="variable">$(</span>CFLAGS) -Wp,-MD,<span class="variable">$(</span>dep_file) -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span>

.PHONY : <span class="variable">$(</span>PHONY)
</code></pre><h2 id="怎么使用这套Makefile">怎么使用这套Makefile</h2><ol>
<li>把顶层Makefile, Makefile.build放入程序的顶层目录</li>
<li>修改顶层Makefile（工具链、编译选项、链接选项、obj-y决定顶层目录下哪些文件、哪些子目录被编进程序、修改TARGET，这是用来指定编译出来的程序的名字）</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>每次看完文档，过一段时间不用就忘记了。今天做毕业设计需要写Makefile,又重新看了一下<a href="http://www.gnu.org/software/make/manual/make.html">GNU make</a>，干脆把常用的提取出来。以后也把一些常用的函数等等写在博客好了，我这记忆力也是没救了。</p>
<hr>
<p>后来google发现阮一峰老师总结的很好。文中部分内容来自<a href="http://www.ruanyifeng.com/blog/2015/02/make.html">阮一峰Make命令教程</a>,以后发现常用的知识就在这篇补充好了。</p>
<hr>
<h1 id="Makefile">Makefile</h1><p>Makefile文件由一系列规则（rules）构成。每条规则的形式如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">target</span>&gt;</span> : <span class="tag">&lt;<span class="title">prerequisites</span>&gt;</span> </span><br><span class="line">[tab]  <span class="tag">&lt;<span class="title">commands</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>目标（target）是必须的，不能省略。前置条件（prerequisites）和命令（commands）都是可选的，但是必须要有一个。</p>
<p>在Makefile中，规则的顺序是很重要的，因为，<strong>Makefile中只应该有一个最终目标</strong>，其它的目标都是被这个目标所连带出来的，所以一定要让make知道你的最终目标是什么。]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Polite English]]></title>
    <link href="http://yoursite.com/2015/04/08/Polite%20English/"/>
    <id>http://yoursite.com/2015/04/08/Polite English/</id>
    <published>2015-04-08T06:01:33.000Z</published>
    <updated>2015-04-08T06:01:33.000Z</updated>
    <content type="html"><![CDATA[<p>Politeness is “having or showing behaviour that is respectful and considerate of other people.”</p>
<p>Politeness is better than logic.You can often persuade when you cannot convince.And I think what he meant by that is that if you’re polite, people will listen and take your arguments, ideas, opinions seriously. They  may even change their own behaviour and do what you’d like them to do!</p>
<ol>
<li>Don’t impose.</li>
<li>Give options.</li>
<li>Make the other person feel good.</li>
</ol>
<a id="more"></a>
<h1 id="Principle_Of_Polite_English">Principle Of Polite English</h1><h2 id="When_giving_your_opinion,_show_some_uncertainty">When giving your opinion, show some uncertainty</h2><p>Uncertainty phrases:</p>
<ul>
<li>I think</li>
<li>I believe</li>
<li>I guess</li>
<li>I suppose</li>
<li>I expect</li>
</ul>
<p>Phrase can come at the beginning or the end.</p>
<p>e.g. “<strong>I think</strong> she works in a bank”,”She works in a bank, <strong>I think</strong>.”</p>
<h2 id="Use_question_tags_and_indirect_questions-">Use question tags and indirect questions.</h2><p><code>Question tags</code>:  e.g. “She works in a bank, <strong>doesn’t she</strong>?”</p>
<p>Rising Intonation:</p>
<ul>
<li>Asking for confirmation </li>
<li>Suggest uncertainty</li>
</ul>
<p>Falling Intonation:</p>
<ul>
<li>Inviting agreement</li>
<li>Suggest certainty</li>
</ul>
<p><code>Direct questions</code>: sometimes sound too pushy. e.g. “Where does she work?”</p>
<p><code>Indirect Questions</code>: e.g. “I was wondering if you knew where she worked?” or “Do you mind if I asked you where she worked?”</p>
<p><strong>Summary: Use question tags with a rising intonation. Use indirect questions, but don’t overuse them.</strong></p>
<h2 id="Credit_the_other_person_with_some_knowledge_and_intelligence-">Credit the other person with some knowledge and intelligence.</h2><p>e.g. </p>
<p>“<strong>Of course</strong>, she works in a bank, <strong>you know</strong>.” </p>
<p>“<strong>Of course</strong>, <strong>as you know</strong>, she works in a bank.” </p>
<p>“<strong>As I’m sure you know</strong>, she works in a bank.”</p>
<h2 id="Sensitive_correction_is_vital-">Sensitive correction is vital.</h2><p><strong>Say sorry then correct.</strong></p>
<p>e.g. “I’m sorry, but she works in a school, not a bank.”</p>
<p><strong>Give the other person the option of correcting their slip.</strong></p>
<p>e.g. “In a bank? Did you say she works in a bank?” or “In a bank? I thought she worked in a hospital.”</p>
<h2 id="Show_the_other_person_that_you_are_reluctant_to_disagree_with_them-">Show the other person that you are reluctant to disagree with them.</h2><p><strong>Softening the disagreement and provide a reason</strong> </p>
<p>e.g. “I don’t want to disagree, but I think we should take the train not the bus.I think it’s faster and slightly cheaper.”</p>
<ul>
<li>I don’t want to complain but….</li>
<li>I don’t want to be difficult but….</li>
<li>I hope you don’t mind my saying so, but….</li>
<li>I’m sorry,but…</li>
<li>I’m afraid that…</li>
<li>I’d like to agree with you but….</li>
<li>Perhaps, it would be better to…</li>
<li>It’s your choice but….</li>
<li>I may be wrong but….</li>
</ul>
<h2 id="Avoid_direct_commands-">Avoid direct commands.</h2><p>e.g.</p>
<p>“Could you help me with my suitcase, please?”</p>
<p>“Would you be able to help me with my suitcase?”</p>
<p>“I wonder if you could help me with my suitcase?”</p>
<p>“Do you think you could (possibly) help me with my suitcase?”</p>
<p>“You wouldn’t help me with my suitcase, would you?”</p>
<p>“Is there any chance…”</p>
<p><strong>Give them a hint</strong> : “My goodness. this suitcase is so heavy! I’m going to break my back lifting it!”</p>
<h1 id="Common_situation">Common situation</h1><h2 id="Common_Polite_Phrases">Common Polite Phrases</h2><p>“Thanks for your help.” “You’re welcome.”</p>
<p>“Can I take a seat?” “Go ahead. Be my guest.”</p>
<p>“Thanks for having me.” “My pleasure.”</p>
<p>“I’m get the bill.” “That’s very kind of you.”</p>
<p>“Happy birthday. Here’s a little something for you.” “Oh, you shouldn’t have”</p>
<h2 id="Complaining_Politely">Complaining Politely</h2><p>“There seems to be a problem with my order. I think I asked for chicken not steak.”</p>
<p>“Sorry to bother you but I think I asked for chicken not steak.”</p>
<p><strong>For serious complaints it’s usually best to use direct language but try to avoid swearing!</strong></p>
<h2 id="Direct_Offers">Direct Offers</h2><p>“Let me buy you a drink.”</p>
<p>“Let me help you.”</p>
<p>“You must let me pay for this.”</p>
<p>“Promise me you’ll come to the party.”</p>
<p>“You will come to dinner, won’t you?”</p>
<p><strong>Strong offers can be declined or refused, but we usually explain why.</strong></p>
<p>“That’s OK. I can manage by myself.”</p>
<p>“I’d love to come but I’m busy on Friday.”</p>
<h2 id="Indirect_Offers">Indirect Offers</h2><p><strong>Weak offers/invitations are more difficult to accept or reject directly.</strong></p>
<p>“Are you busy next week?”</p>
<p>“Are you a fan of opera?”</p>
<p>“You are not free next week, are you?”</p>
<p>Reference:</p>
<p><a href="https://www.udemy.com/master-polite-english" target="_blank" rel="external">Udemy—Polite English</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Politeness is “having or showing behaviour that is respectful and considerate of other people.”</p>
<p>Politeness is better than logic.You can often persuade when you cannot convince.And I think what he meant by that is that if you’re polite, people will listen and take your arguments, ideas, opinions seriously. They  may even change their own behaviour and do what you’d like them to do!</p>
<ol>
<li>Don’t impose.</li>
<li>Give options.</li>
<li>Make the other person feel good.</li>
</ol>]]>
    
    </summary>
    
      <category term="Open Courses" scheme="http://yoursite.com/tags/Open-Courses/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[字符编码]]></title>
    <link href="http://yoursite.com/2015/03/22/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/"/>
    <id>http://yoursite.com/2015/03/22/字符编码/</id>
    <published>2015-03-22T15:18:00.000Z</published>
    <updated>2015-03-23T08:57:53.000Z</updated>
    <content type="html"><![CDATA[<h1 id="字符编码">字符编码</h1><p>在计算机内部，所有的信息最终都表示为一个二进制的字符串。每一个二进制位（bit）有0和1两种状态，因此八个二进制位就可以组合出256种状态，这被称为一个<strong>字节（byte）</strong>。而<strong>字符</strong>是语言意义上的符号，范围就不一定了。</p>
<h2 id="ASCII码">ASCII码</h2><p>上个世纪60年代，美国制定了一套字符编码，对英语字符与二进制位之间的关系，做了统一规定。这被称为ASCII码，一直沿用至今。ASCII码一共规定了128个字符的编码(包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的1位统一规定为0。<br><a id="more"></a></p>
<h2 id="各个国家的编码">各个国家的编码</h2><p>因为其他国家有自己的语言，ascii不够用。例如在中国，hzk16字库是符合GB2312(国标码)的16X16点阵字库。GB2312汉字是由两个字节编码的（范围：A1A1~FEFE)。一个汉字占两个字节，前一个字节为该汉字的<code>区号</code>，后一个字节为该字的<code>位号</code>。每个区记录94个汉字，位号为该字在该区的位置。</p>
<blockquote>
<p>区码：区号-0xa0<br>位码：位号-0xa0<br>位置: （94 *（区码-1）+（位码-1））* 32</p>
</blockquote>
<h2 id="Unicode编码表">Unicode编码表</h2><p>Unicode 是为整合全世界的所有语言文字而诞生的。任何文字在Unicode中都对应一个值，这个值称为代码，UCS-2和UCS-4只规定了代码点和文字之间的对应关系，而规定的储存方式称为<code>UTF</code>。</p>
<p><strong>UTF-8是Unicode的实现方式之一。</strong><code>UTF-8</code>就是在互联网上使用最广的一种Unicode的实现方式。UTF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。其他实现方式还包括<code>UTF-16</code>（字符用两个字节或四个字节表示）和<code>UTF-32</code>（字符用四个字节表示），不过在互联网上基本不用。</p>
<h3 id="UTF-8的编码规则">UTF-8的编码规则</h3><ol>
<li>对于单字节的符号，字节的第一位设为0，后面7位为这个符号的unicode码。因此对于英语字母，UTF-8编码和ASCII码是相同的。</li>
<li>对于n字节的符号（n&gt;1），第一个字节的前n位都设为1，第n+1位设为0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的unicode的值。</li>
</ol>
<p>例如：“中”字的UTF-8的值为：E4 B8 AD (1110<code>0100</code>,10<code>111000</code>,10<code>101101</code>),Unicode的值为：100111000101101(4E2D)。</p>
<h3 id="大端小端">大端小端</h3><p>Unicode规范中定义，每一个文件的最前面分别加入一个表示编码顺序的字符，如果一个文本文件的头两个字节是FE FF，就表示该文件采用大头方式；如果头两个字节是FF FE，就表示该文件采用小头方式。</p>
<p>实例：</p>
<ol>
<li>ANSI：文件的编码就是两个字节”D1 CF”，这正是”严”的GB2312编码，这也暗示GB2312是采用大头方式存储的。</li>
<li>Unicode：编码是四个字节”FF FE 25 4E”，其中”FF FE”表明是小头方式存储，真正的编码是4E25。</li>
<li>Unicode big endian：编码是四个字节”FE FF 4E 25”，其中”FE FF”表明是大头方式存储。</li>
<li>UTF-8：编码是六个字节”EF BB BF E4 B8 A5”，前三个字节”EF BB BF”表示这是UTF-8编码，后三个”E4B8A5”就是”严”的具体编码，它的存储顺序与编码顺序是一致的。</li>
</ol>
<hr>
<h1 id="编码方式">编码方式</h1><h2 id="源文件用不同的编码方式编写，会导致执行结果不一样。">源文件用不同的编码方式编写，会导致执行结果不一样。</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;	<span class="keyword">int</span> i = <span class="number">0</span>;	<span class="keyword">unsigned</span> <span class="keyword">char</span> *str=<span class="string">"abc中"</span>;	<span class="keyword">while</span> (str[i])	&#123;		<span class="built_in">printf</span>(<span class="string">"%02x "</span>, str[i]);		i++;	&#125;	<span class="built_in">printf</span>(<span class="string">"\n"</span>);	<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>存为ansi的编码方式时：对于英文文件是ASCII编码，对于简体中文文件是GB2312编码。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">61 62 63 d6 d0</span><br></pre></td></tr></table></figure></p>
<p>存为UTF-8的编码方式输出结果为：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">61 62 63 e4 b8 ad</span><br></pre></td></tr></table></figure></p>
<h2 id="如何解决">如何解决</h2><p>编译程序时，要指定字符集。</p>
<p>查看gcc手册，搜索到charset。</p>
<p>-finput-charset=charset  表示源文件的编码方式, 默认以UTF-8来解析</p>
<p>-fexec-charset=charset   表示可执行程序里的字时候以什么编码方式来表示，默认是UTF-8</p>
<p>示例：</p>
<pre><code>gcc <span class="variable">-finput-charset=</span>GBK <span class="variable">-fexec-charset=</span>UTF-<span class="number">8</span> -o utf-<span class="number">8</span>_2 ansi.c
</code></pre><hr>
<h1 id="英文字母、汉字的点阵显示">英文字母、汉字的点阵显示</h1><p>linux内核中有关于font的文件。比如linux-2.6.30.4/drivers/video/console/font_8x16.c文件，里面有个fontdata_8x16[FONTDATAMAX]数组，每个字符占16字节(8x16像素)。 </p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span> 65 0x41 'A' <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/0x10, /<span class="keyword">*</span> 00010000 <span class="keyword">*</span>/0x38, /<span class="keyword">*</span> 00111000 <span class="keyword">*</span>/0x6c, /<span class="keyword">*</span> 01101100 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0xfe, /<span class="keyword">*</span> 11111110 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0xc6, /<span class="keyword">*</span> 11000110 <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/0x00, /<span class="keyword">*</span> 00000000 <span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<h2 id="帧缓冲(framebuffer)">帧缓冲(framebuffer)</h2><p>Framebuffer是一块显示缓存，往显示缓存中写入特定的格式数据就意味着向屏幕输出内容。帧缓冲设备对应的设备文件为<code>/dev/fb*</code>,如果系统有多个显示卡，Linux下还可以支持多个帧缓冲设备，最多可达32个（/dev/fb0~/dev/fb31)。帧缓冲设备为标准的字符设备，主设备号为29，此设备号为0~31.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">int</span> fd_fb;</span><br><span class="line"><span class="keyword">struct</span> fb_var_screeninfo var;	<span class="comment">/* Current var */</span><span class="keyword">struct</span> fb_fix_screeninfo fix;	<span class="comment">/* Current fix */</span></span><br><span class="line"><span class="keyword">int</span> screen_size; <span class="comment">/*屏幕大小*/</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *fbmem;<span class="comment">/*打开framebuffer设备文件*/</span></span><br><span class="line">fd_fb = open(<span class="string">"/dev/fb0"</span>, O_RDWR);<span class="keyword">if</span> (fd_fb &lt; <span class="number">0</span>)&#123;	<span class="built_in">printf</span>(<span class="string">"can't open /dev/fb0\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;<span class="comment">/*获得可变信息*/</span><span class="keyword">if</span> (ioctl(fd_fb, FBIOGET_VSCREENINFO, &amp;var))&#123;	<span class="built_in">printf</span>(<span class="string">"can't get var\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;<span class="comment">/*获得可变信息*/</span><span class="keyword">if</span> (ioctl(fd_fb, FBIOGET_FSCREENINFO, &amp;fix))&#123;	<span class="built_in">printf</span>(<span class="string">"can't get fix\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;</span><br><span class="line">screen_size = var.xres * var.yres * var.bits_per_pixel / <span class="number">8</span>;<span class="comment">/*单位字节*/</span></span><br><span class="line">fbmem = (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)mmap(NULL , screen_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd_fb, <span class="number">0</span>);<span class="comment">/*内存映射*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清屏: 全部设为黑色 */</span><span class="built_in">memset</span>(fbmem, <span class="number">0</span>, screen_size);</span><br></pre></td></tr></table></figure>
<h2 id="如何在屏幕上画出一个点">如何在屏幕上画出一个点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> line_width;	<span class="keyword">unsigned</span> <span class="keyword">int</span> pixel_width;</span><br><span class="line">	</span><br><span class="line">	line_width  = var.xres * var.bits_per_pixel / <span class="number">8</span>; <span class="comment">//一行里面有多少字节</span>	pixel_width = var.bits_per_pixel / <span class="number">8</span>; <span class="comment">//每个像素有多少字节</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">lcd_put_pixel</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">unsigned</span> <span class="keyword">int</span> color)</span></span>&#123;	<span class="keyword">unsigned</span> <span class="keyword">char</span> *pen_8 = fbmem+y*line_width+x*pixel_width;<span class="comment">//计算出位置</span>	<span class="keyword">unsigned</span> <span class="keyword">short</span> *pen_16;		<span class="keyword">unsigned</span> <span class="keyword">int</span> *pen_32;		<span class="keyword">unsigned</span> <span class="keyword">int</span> red, green, blue;		pen_16 = (<span class="keyword">unsigned</span> <span class="keyword">short</span> *)pen_8;	pen_32 = (<span class="keyword">unsigned</span> <span class="keyword">int</span> *)pen_8;	<span class="keyword">switch</span> (var.bits_per_pixel)<span class="comment">//判断每个像素有多少位，进行不同的处理</span>	&#123;		<span class="keyword">case</span> <span class="number">8</span>:		&#123;			*pen_8 = color;			<span class="keyword">break</span>;		&#125;		<span class="keyword">case</span> <span class="number">16</span>:		&#123;			<span class="comment">/* 565 */</span>			red   = (color &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>;			green = (color &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>;			blue  = (color &gt;&gt; <span class="number">0</span>) &amp; <span class="number">0xff</span>;			color = ((red &gt;&gt; <span class="number">3</span>) &lt;&lt; <span class="number">11</span>) | ((green &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">5</span>) | (blue &gt;&gt; <span class="number">3</span>);			*pen_16 = color;			<span class="keyword">break</span>;		&#125;		<span class="keyword">case</span> <span class="number">32</span>:		&#123;			*pen_32 = color;			<span class="keyword">break</span>;		&#125;		<span class="keyword">default</span>:		&#123;			<span class="built_in">printf</span>(<span class="string">"can't surport %dbpp\n"</span>, var.bits_per_pixel);			<span class="keyword">break</span>;		&#125;	&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="LCD显示ascii码">LCD显示ascii码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lcd_put_ascii</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">unsigned</span> <span class="keyword">char</span> c)</span><span class="comment">//x坐标，y坐标，显示字符</span></span>&#123;	<span class="keyword">unsigned</span> <span class="keyword">char</span> *dots = (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)&amp;fontdata_8x16[c*<span class="number">16</span>];<span class="comment">//每个ascii码占16字节</span>	<span class="keyword">int</span> i, b;	<span class="keyword">unsigned</span> <span class="keyword">char</span> byte;	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++) <span class="comment">//16行</span>	&#123;		byte = dots[i]; <span class="comment">//取出一个字节</span>		<span class="keyword">for</span> (b = <span class="number">7</span>; b &gt;= <span class="number">0</span>; b--) <span class="comment">//每一行8位</span>		&#123;			<span class="keyword">if</span> (byte &amp; (<span class="number">1</span>&lt;&lt;b))<span class="comment">//判断每一位的值是否为1</span>			&#123;				<span class="comment">/* show */</span>				lcd_put_pixel(x+<span class="number">7</span>-b, y+i, <span class="number">0xffffff</span>); <span class="comment">/* 白 */</span>			&#125;			<span class="keyword">else</span>			&#123;				<span class="comment">/* hide */</span>				lcd_put_pixel(x+<span class="number">7</span>-b, y+i, <span class="number">0</span>); <span class="comment">/* 黑 */</span>			&#125;		&#125;	&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="LCD显示汉字">LCD显示汉字</h2><p>在网上下载hzk16字库。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> fd_hzk16;	<span class="keyword">struct</span> stat hzk_stat;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> *hzkmem;</span><br><span class="line"><span class="comment">/*打开字库文件*/</span></span><br><span class="line">fd_hzk16 = open(<span class="string">"HZK16"</span>, O_RDONLY);<span class="keyword">if</span> (fd_hzk16 &lt; <span class="number">0</span>)&#123;	<span class="built_in">printf</span>(<span class="string">"can't open HZK16\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*获取文件属性*/</span><span class="keyword">if</span>(fstat(fd_hzk16, &amp;hzk_stat))&#123;	<span class="built_in">printf</span>(<span class="string">"can't get fstat\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;</span><br><span class="line"><span class="comment">/*内存映射*/</span></span><br><span class="line">hzkmem = (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)mmap(NULL , hzk_stat.st_size, PROT_READ, MAP_SHARED, fd_hzk16, <span class="number">0</span>);<span class="keyword">if</span> (hzkmem == (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)-<span class="number">1</span>)&#123;	<span class="built_in">printf</span>(<span class="string">"can't mmap for hzk16\n"</span>);	<span class="keyword">return</span> -<span class="number">1</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>根据字库的信息(区码位码上面有介绍)写出代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lcd_put_chinese</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">unsigned</span> <span class="keyword">char</span> *str)</span></span>&#123;	<span class="keyword">unsigned</span> <span class="keyword">int</span> area  = str[<span class="number">0</span>] - <span class="number">0xA1</span>;	<span class="keyword">unsigned</span> <span class="keyword">int</span> where = str[<span class="number">1</span>] - <span class="number">0xA1</span>;	<span class="keyword">unsigned</span> <span class="keyword">char</span> *dots = hzkmem + (area * <span class="number">94</span> + where)*<span class="number">32</span>;	<span class="keyword">unsigned</span> <span class="keyword">char</span> byte;	<span class="keyword">int</span> i, j, b;	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)		<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">2</span>; j++)		&#123;			byte = dots[i*<span class="number">2</span> + j];			<span class="keyword">for</span> (b = <span class="number">7</span>; b &gt;=<span class="number">0</span>; b--)			&#123;				<span class="keyword">if</span> (byte &amp; (<span class="number">1</span>&lt;&lt;b))				&#123;					<span class="comment">/* show */</span>					lcd_put_pixel(x+j*<span class="number">8</span>+<span class="number">7</span>-b, y+i, <span class="number">0xffffff</span>); <span class="comment">/* 白 */</span>				&#125;				<span class="keyword">else</span>				&#123;					<span class="comment">/* hide */</span>					lcd_put_pixel(x+j*<span class="number">8</span>+<span class="number">7</span>-b, y+i, <span class="number">0</span>); <span class="comment">/* 黑 */</span>				&#125;							&#125;		&#125;	&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Freetype">Freetype</h1><p>Freetype 是一个操作字体文件的函数库，可以操作点阵和矢量字体。由于点阵缺乏灵活性，无法改变字体的大小和风格，<strong>矢量字体不像点阵字体那样直接记录字符的字模数据</strong>，而是<strong>记录字体描述信息</strong>。</p>
<ol>
<li>若干个闭合曲线的关键点。</li>
<li>使用数字曲线连接关键点。</li>
<li>填充内部空间。</li>
</ol>
<p>字符对应的字体数据称为<code>glyph</code>,字体文件中通常带有一个字符映射表，用来把字符映射到对应的<code>glyph</code>的索引值。因为字符集的编码方式有很多种（GBK,Unicode,Big5等等)，所以有多个映射表（charmap）。所以一个文字的显示过程：</p>
<ol>
<li>给定一个文字，可以确定它的<code>编码值</code>。（比如‘A’的ascii码的编码值为：0x41）</li>
<li>根据<code>编码值</code>从字体文件中找到<code>glyph</code>(关键点)。</li>
<li>设置字体大小。</li>
<li>利用某些函数把<code>glyph</code>里的点缩放为上面设定的字体大小。</li>
<li>转换为位图点阵。</li>
<li>在LCD上显示出来。</li>
</ol>
<h2 id="代码思路">代码思路</h2><p>google搜索freetype tutorial第一条就是教如何使用。</p>
<ol>
<li>创建freetype库，进行初始化：FT_Init_FreeType</li>
<li>加载字体文件（Load a Font face）: FT_New_Face </li>
<li>设置字体大小：FT_Set_Char_Size 和 FT_Set_Pixel_Sizes </li>
<li>变换（移动和旋转）: FT_Set_Transform</li>
<li>根据编码值，加载<code>glyph</code>（找到，取出，转为位图）</li>
<li>打印</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">	FT_Library	  library;	FT_Face 	  face;</span><br><span class="line">	<span class="keyword">int</span> error;</span><br><span class="line">	FT_Vector     pen; <span class="comment">//矢量</span>	FT_GlyphSlot  slot;	error = FT_Init_FreeType( &amp;library );	<span class="comment">//1.初始化freetype库</span>	error = FT_New_Face( library, argv[<span class="number">1</span>], <span class="number">0</span>, &amp;face ); <span class="comment">//2.加载字体文件</span>	slot = face-&gt;glyph;<span class="comment">//插槽</span></span><br><span class="line">	FT_Set_Pixel_Sizes(face, <span class="number">24</span>, <span class="number">0</span>); <span class="comment">//3.设置字体大小</span></span><br><span class="line">	<span class="comment">/* 确定座标:	 * lcd_x = var.xres/2 + 8 + 16	 * lcd_y = var.yres/2 + 16	 * 笛卡尔座标系:	 * x = lcd_x = var.xres/2 + 8 + 16	 * y = var.yres - lcd_y = var.yres/2 - 16	 */</span>	pen.x = (var.xres/<span class="number">2</span> + <span class="number">8</span> + <span class="number">16</span>) * <span class="number">64</span>;	pen.y = (var.yres/<span class="number">2</span> - <span class="number">16</span>) * <span class="number">64</span>;    FT_Set_Transform( face, <span class="number">0</span>, &amp;pen);<span class="comment">//4.变换</span></span><br><span class="line">    error = FT_Load_Char( face, chinese_str[<span class="number">0</span>], FT_LOAD_RENDER );<span class="comment">//5.转换位图</span></span><br><span class="line">    </span><br><span class="line">    draw_bitmap( &amp;slot-&gt;bitmap,                 slot-&gt;bitmap_left,                 var.yres - slot-&gt;bitmap_top);</span><br><span class="line">                 </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw_bitmap</span><span class="params">( FT_Bitmap* bitmap, FT_Int x,  FT_Int y)</span></span>&#123;  FT_Int  i, j, p, q;  FT_Int  x_max = x + bitmap-&gt;width;  FT_Int  y_max = y + bitmap-&gt;rows;  <span class="keyword">for</span> ( i = x, p = <span class="number">0</span>; i &lt; x_max; i++, p++ )  &#123;    <span class="keyword">for</span> ( j = y, q = <span class="number">0</span>; j &lt; y_max; j++, q++ )    &#123;      <span class="keyword">if</span> ( i &lt; <span class="number">0</span>      || j &lt; <span class="number">0</span>       ||           i &gt;= var.xres || j &gt;= var.yres )        <span class="keyword">continue</span>;    &#125;  &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>References:</p>
<ol>
<li><a href="http://www.ruanyifeng.com/blog/2007/10/2. ascii_unicode_and_utf-8.html" target="_blank" rel="external">阮一峰的网络日志</a></li>
<li><a href="http://www.freetype.org/freetype2/docs/tutorial/step1.html" target="_blank" rel="external">freetype tutorial</a></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="字符编码">字符编码</h1><p>在计算机内部，所有的信息最终都表示为一个二进制的字符串。每一个二进制位（bit）有0和1两种状态，因此八个二进制位就可以组合出256种状态，这被称为一个<strong>字节（byte）</strong>。而<strong>字符</strong>是语言意义上的符号，范围就不一定了。</p>
<h2 id="ASCII码">ASCII码</h2><p>上个世纪60年代，美国制定了一套字符编码，对英语字符与二进制位之间的关系，做了统一规定。这被称为ASCII码，一直沿用至今。ASCII码一共规定了128个字符的编码(包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的1位统一规定为0。<br>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[sublime text 3]]></title>
    <link href="http://yoursite.com/2015/02/24/sublime%20text/"/>
    <id>http://yoursite.com/2015/02/24/sublime text/</id>
    <published>2015-02-24T19:18:00.000Z</published>
    <updated>2015-04-11T11:55:20.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>改字体：Sublime Text -&gt; Preferences -&gt; Settings-User</li>
<li>从终端打开：sudo ln /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /bin/subl 以后可直接输入subl</li>
</ul>
<hr>
<table>
<thead>
<tr>
<th>符号</th>
<th style="text-align:right">键</th>
</tr>
</thead>
<tbody>
<tr>
<td>⌘</td>
<td style="text-align:right">Command key</td>
</tr>
<tr>
<td>⌃</td>
<td style="text-align:right">Control key</td>
</tr>
<tr>
<td>⌥</td>
<td style="text-align:right">Option key</td>
</tr>
<tr>
<td>⇧</td>
<td style="text-align:right">Shift Key</td>
</tr>
</tbody>
</table>
<a id="more"></a>
<h1 id="Edit(编辑)">Edit(编辑)</h1><ul>
<li>⌘[ 向左缩进 | Left indent</li>
<li>⌘] 向右缩进 | Right Indent</li>
<li>⌘⌃↑ 与上一行互换（超实用！）| Swap line up</li>
<li>⌘⌃↓ 与下一￼行互换￼（超实用！）| Swap line down</li>
<li>⌘⇧D 复制粘贴当前行（减少多余的粘贴）| Duplicate line</li>
<li>⌘J 拼接行（css格式化时挺有用） | join lines</li>
<li>⌘← 去往行的开头 | Beginning of line</li>
<li>⌘→ 去往行末尾 | End of line</li>
<li>⌘⌃/ 块注释 | Toggle comment block</li>
<li>⌃K 从光标开始的地方删除到行尾 | Delete to end</li>
<li>⌃⇧K 删除一整行 | delete line</li>
<li>⌃T 相邻单词互换位置，在’,’前试用，有惊喜（很有趣）| Transpose</li>
<li>⌘⇧↩ 向光标前插入一行|insert line before</li>
<li>⌘↩ 向光标后插入一行|inter line after</li>
<li>⌘⌥T 插入特殊字符|Special characters</li>
<li>⌃D 向后删除（很怪异的操作，不过感觉很酷炫）</li>
</ul>
<h1 id="Selection(光标选中)">Selection(光标选中)</h1><ul>
<li>⌘D 选中相同的词 | Expand selection to words</li>
<li>⌃⌘G 多重文本光标选中（再也不用⌘ D一个一个的找啦）| Expand all selection to words</li>
<li>⌘L 选中一行|Expand selection to line</li>
<li>Esc 单选（取消多重选择）|Single selection,Cancel multiple selections</li>
<li>⌃⇧↑ 一行一行向上选中|Add previous line</li>
<li>⌃⇧↓ 一行一行向下选中|Add next line</li>
<li>⌘⇧L 将选中的区域分割成多行选中状态(多光标操作状态)|Split into lines</li>
<li>⌥+拖动鼠标 多重光标选中</li>
<li>⌘⇧J 已缩进层级为依据，一层层向外选中|Expand selection to indentation</li>
<li>⌃⇧M 将匹配括号中的内容选中|Expand selection to brackets</li>
</ul>
<h1 id="Find(查找)">Find(查找)</h1><ul>
<li>⌘F 普通查找|Find</li>
<li>⌘G 查找下一个|Find next</li>
<li>⌘⇧F 在文件夹中查找| Find in files</li>
<li>⌘⇧E 缓存用于替换的内容，方便之后的替换|Use selection for replace</li>
<li>⌘E 缓存用于查找的内容，方便之后的查找|Use selection for find</li>
<li>⌘⌥E 一个接一个往下替换|Replace next</li>
</ul>
<h1 id="View(视图)">View(视图)</h1><ul>
<li>推荐使用Origami插件，可以随意对sublime进行分割</li>
</ul>
<h1 id="Go_to(跳转/定位)">Go to(跳转/定位)</h1><ul>
<li>⌘P 跳转文件（很方便）| Go to anything</li>
<li>⌘R 定位文件中的方法@| Go to symbol</li>
<li>⌘G 定位文件中的行号:| Go to line</li>
<li>⌃M 定位匹配的括号 | Jump to matching bracket</li>
<li>⌘F2 设置/取消定位标记| Toggle bookmark</li>
<li>F2 跳转到定位标记处 | Next bookmark</li>
<li>⌘⇧F2 清除所有定位标记| Clear all bookmarks</li>
<li>⌘⌥→ 下一个打开的文件| Next file</li>
</ul>
<h1 id="Project(工程)">Project(工程)</h1><ul>
<li>⌘⌃P 在保存过的工程中切换，随意变换工程环境|Switch project window</li>
</ul>
<p>Resource:<a href="http://www.sublimetext.com/docs/3/" target="_blank" rel="external">Sublime Text 3 Documentation</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li>改字体：Sublime Text -&gt; Preferences -&gt; Settings-User</li>
<li>从终端打开：sudo ln /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /bin/subl 以后可直接输入subl</li>
</ul>
<hr>
<table>
<thead>
<tr>
<th>符号</th>
<th style="text-align:right">键</th>
</tr>
</thead>
<tbody>
<tr>
<td>⌘</td>
<td style="text-align:right">Command key</td>
</tr>
<tr>
<td>⌃</td>
<td style="text-align:right">Control key</td>
</tr>
<tr>
<td>⌥</td>
<td style="text-align:right">Option key</td>
</tr>
<tr>
<td>⇧</td>
<td style="text-align:right">Shift Key</td>
</tr>
</tbody>
</table>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Sublime Text with latex & skim]]></title>
    <link href="http://yoursite.com/2015/02/23/Latex/"/>
    <id>http://yoursite.com/2015/02/23/Latex/</id>
    <published>2015-02-23T19:18:00.000Z</published>
    <updated>2015-04-11T11:55:56.000Z</updated>
    <content type="html"><![CDATA[<h1 id="安装步骤">安装步骤</h1><ol>
<li>安装<a href="http://www.sublimetext.com/3" target="_blank" rel="external">Sublime Text 3</a>、<a href="https://tug.org/mactex/" target="_blank" rel="external">MacTex</a>(2.4G)。</li>
<li>给 Sublime Text 安装<a href="https://packagecontrol.io/installation" target="_blank" rel="external">Package Control</a>。</li>
<li>在 Sublime Text 窗口中按下 Cammand + Shift + P，键入「install」之后回车，找到「LaTeXTools」这个 Sublime Text Package 并安装。</li>
<li>安装<a href="http://skim-app.sourceforge.net/" target="_blank" rel="external">Skim</a>，在<code>偏好设置-&gt;同步</code> 修改预设成自定义，指令：/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl。<a id="more"></a></li>
<li>打开编辑<code>~/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/LaTeXTools.sublime-settings</code>，将其中”builder”条目改为：<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“builder”: “simple”</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>编辑<code>~/Library/Application\ Support/Sublime\ Text\ 3/Packages/LaTeXTools/builders/simpleBuilder.py</code>第41行:<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">pdflatex =</span> [“pdflatex”, “<span class="variable">-interaction=</span>nonstopmode”, “<span class="variable">-synctex=</span><span class="number">1</span>″]</span><br><span class="line">修改为</span><br><span class="line"><span class="variable">pdflatex =</span> [“xelatex”, “<span class="variable">-interaction=</span>nonstopmode”, “<span class="variable">-synctex=</span><span class="number">1</span>″]</span><br></pre></td></tr></table></figure></p>
<h1 id="LaTex_语法">LaTex 语法</h1>]]></content>
    <summary type="html">
    <![CDATA[<h1 id="安装步骤">安装步骤</h1><ol>
<li>安装<a href="http://www.sublimetext.com/3">Sublime Text 3</a>、<a href="https://tug.org/mactex/">MacTex</a>(2.4G)。</li>
<li>给 Sublime Text 安装<a href="https://packagecontrol.io/installation">Package Control</a>。</li>
<li>在 Sublime Text 窗口中按下 Cammand + Shift + P，键入「install」之后回车，找到「LaTeXTools」这个 Sublime Text Package 并安装。</li>
<li>安装<a href="http://skim-app.sourceforge.net/">Skim</a>，在<code>偏好设置-&gt;同步</code> 修改预设成自定义，指令：/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl。]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[数据结构]]></title>
    <link href="http://yoursite.com/2014/12/05/List/"/>
    <id>http://yoursite.com/2014/12/05/List/</id>
    <published>2014-12-05T09:18:00.000Z</published>
    <updated>2015-02-08T02:35:05.000Z</updated>
    <content type="html"><![CDATA[<p>打算重新学下数据结构和算法。<br><strong>时间</strong>：2月底初步完成。<br><strong>目标</strong>：当面临数据结构和算法时，能立马想到特定的行为或者操作以及一些属性。例如，链表,立马想到插入、移除、遍历和计算元素个数等操作，和指针域、数据域等属性。<br><strong>资源</strong>：书籍《算法精解》,《leetcode-C++》 网站：<a href="https://www.hackerrank.com/" target="_blank" rel="external">hackerRank</a><br><a id="more"></a><br>最常用的<strong>数据结构</strong>有：链表、栈、队列、集合、哈希表、树、堆、优先级队列和图。<br><strong>算法</strong>分类：</p>
<ol>
<li>随机法：依赖于随机数的统计特性。例如：快速排序。</li>
<li>分治法：分解、求解、合并。例如：归并排序。</li>
<li>动态规划：与分治法类似，将大问题分解为子问题最后将结果合并。在动态规划中，子问题之间并不是独立的，是相关联的。</li>
<li>贪心法：不是从整体最优上考虑， 而仅仅是在某种意义上的<strong>局部最优解</strong>。例如：霍夫曼编码。</li>
<li>近似法：只计算出“足够好”的解，并不计算出最优解。 例如：推销员问题</li>
</ol>
<p>使用数据结构和算法的原因：1.效率 2.抽象 3.重用率<br>开发应用软件的良好准则：1.模块化 2.可读性 3.简洁性 4.一致性 </p>
<h2 id="链表">链表</h2><p>分类：单链表、双向链表、循环链表<br>应用：邮件列表、滚动列表、内存管理、以及其他数据结构等</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> ListElmt_ </span><br><span class="line">&#123;   <span class="comment">/*链表元素数据结构*/</span></span><br><span class="line">	<span class="keyword">void</span> *data;</span><br><span class="line">	<span class="keyword">struct</span> ListElmt_ *next;	</span><br><span class="line">	<span class="comment">//双向链表多一个指向前结点的指针（*prev）</span></span><br><span class="line">&#125;ListElmt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> List_ </span><br><span class="line">&#123;   <span class="comment">/*链表数据结构*/</span></span><br><span class="line">	<span class="keyword">int</span> size; <span class="comment">//链表中元素个数</span></span><br><span class="line">	ListElmt *head; <span class="comment">//指向链表中头结点元素的指针</span></span><br><span class="line">	ListElmt *tail; <span class="comment">//指向链表中末尾结点元素的指针,若是循环链表删除这个。</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*封装之后传递给list_init函数的析构函数,如果链表包含采用malloc动态分配的数据，当链表被销毁时，destroy应该设置为free 用来释放数据。*/</span></span><br><span class="line">	<span class="keyword">void</span> (*destroy)(<span class="keyword">void</span> *data);</span><br><span class="line">	<span class="keyword">int</span> (*match)(<span class="keyword">const</span> <span class="keyword">void</span> *key1, <span class="keyword">const</span> <span class="keyword">void</span> *key2);<span class="comment">//用来判断两个成员是否匹配。</span></span><br><span class="line">&#125;List;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">list_init</span><span class="params">(List *<span class="built_in">list</span>, <span class="keyword">void</span> (*destroy)</span><span class="params">(<span class="keyword">void</span> *data)</span>)</span><br><span class="line"></span>&#123;   <span class="comment">/*初始化链表*/</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">list</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">list</span>-&gt;head = NULL;</span><br><span class="line">	<span class="built_in">list</span>-&gt;tail = NULL;</span><br><span class="line">	<span class="built_in">list</span>-&gt;destroy = destroy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">list_ins_next</span><span class="params">(List *<span class="built_in">list</span>, ListElmt *element, <span class="keyword">const</span> <span class="keyword">void</span> *data)</span></span><br><span class="line"></span>&#123;   <span class="comment">/*将一个元素插入element元素之后*/</span></span><br><span class="line">	ListElmt *new_element;</span><br><span class="line">	<span class="keyword">if</span> ((new_element =(ListElmt *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ListElmt)))==NULL)<span class="comment">//动态分配链表元素（结点）</span></span><br><span class="line">		<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	new_element-&gt;data = (<span class="keyword">void</span> *)data; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (element == NULL)&#123; <span class="comment">//增加头结点</span></span><br><span class="line">		new_element-&gt;next = <span class="built_in">list</span>-&gt;head;</span><br><span class="line">		<span class="built_in">list</span>-&gt;head = new_element;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">list</span>-&gt;size == <span class="number">0</span>)</span><br><span class="line">			<span class="built_in">list</span>-&gt;tail = <span class="built_in">list</span>-&gt;head;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">	    <span class="comment">/*插入其他位置*/</span></span><br><span class="line">		new_element-&gt;next = element-&gt;next;</span><br><span class="line">		element-&gt;next = new_element;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(element-&gt;next == NULL)</span><br><span class="line">			<span class="built_in">list</span>-&gt;tail = new_element;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">list</span>-&gt;size++;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">list_rem_next</span><span class="params">(List *<span class="built_in">list</span>, ListElmt *element, <span class="keyword">void</span> **data)</span>	</span><br><span class="line"></span>&#123;   <span class="comment">/*移除element之后的那个结点，data将指向已移除结点的数据域*/</span></span><br><span class="line">	ListElmt *old_element;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">list</span>-&gt;size == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (element == NULL)&#123;<span class="comment">//移除头结点</span></span><br><span class="line">		*data = <span class="built_in">list</span>-&gt;head-&gt;data; </span><br><span class="line">		old_element = <span class="built_in">list</span>-&gt;head;</span><br><span class="line">		<span class="built_in">list</span>-&gt;head = <span class="built_in">list</span>-&gt;head-&gt;next;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">list</span>-&gt;size == <span class="number">1</span>)</span><br><span class="line">			<span class="built_in">list</span>-&gt;tail = NULL;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123; </span><br><span class="line">		<span class="keyword">if</span> (element-&gt;next == NULL) <span class="comment">//element如果是尾结点，返回-1.</span></span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		<span class="comment">//删除其他位置结点</span></span><br><span class="line">		*data = element-&gt;next-&gt;data;</span><br><span class="line">		old_element = element-&gt;next;</span><br><span class="line">		element-&gt;next = old_element-&gt;next;</span><br><span class="line">		<span class="keyword">if</span>(element-&gt;next == NULL)<span class="comment">//更新尾结点</span></span><br><span class="line">			<span class="built_in">list</span>-&gt;tail = element;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">free</span>(old_element);<span class="comment">//释放掉链表元素（结点），但是结点指向的数据域还没释放掉（如果该数据是动态分配的话）</span></span><br><span class="line">	<span class="built_in">list</span>-&gt;size--;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">list_destroy</span><span class="params">(List *<span class="built_in">list</span>)</span></span><br><span class="line"></span>&#123;   <span class="comment">/*移除链表中所有的元素*/</span></span><br><span class="line">	<span class="keyword">void</span> *data;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">list</span>-&gt;size &gt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(list_rem_next(<span class="built_in">list</span>,NULL,(<span class="keyword">void</span> **)&amp;data)==<span class="number">0</span> &amp;&amp; <span class="built_in">list</span>-&gt;destroy != NULL)&#123;</span><br><span class="line">            <span class="comment">/*list_rem_next函数调用返回后，data将指向已移除结点的数据域，如果当初那个数据域是动态分配的，那么应该用free释放掉*/</span></span><br><span class="line">			<span class="built_in">list</span>-&gt;destroy(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(<span class="built_in">list</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(List));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="栈和队列">栈和队列</h2><p><strong>栈</strong>：按<strong>后进先出（LIFO）</strong>的顺序存储和检索数据的高效数据结构。可以想象成一筒网球。<br><strong>队列</strong>：按照<strong>先进先出（FIFO）</strong>的顺序存储和检索数据的高效数据结构。可以想象成排队的一队人。</p>
<p><strong>应用</strong>：信号量（队列）、事件处理（队列）、函数调用（栈）等。</p>
<p>以下的栈和队列是用链表实现的，具有一定的多态能力。<br>栈：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">stack_push</span><span class="params">(Stack *<span class="built_in">stack</span>, <span class="keyword">const</span> <span class="keyword">void</span> *data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//压栈，插入链表中的头结点。</span></span><br><span class="line">    <span class="keyword">return</span> list_ins_next(<span class="built_in">stack</span>, NULL, data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">stack_push</span><span class="params">(Stack *<span class="built_in">stack</span>, <span class="keyword">const</span> <span class="keyword">void</span> *data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//出栈，删除链表的头结点。</span></span><br><span class="line">    <span class="keyword">return</span> list_ins_next(<span class="built_in">stack</span>, NULL, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>队列：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">queue_enqueue</span><span class="params">(Queue *<span class="built_in">queue</span>, <span class="keyword">const</span> <span class="keyword">void</span> *data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//入队，在链表的尾部添加新的元素。</span></span><br><span class="line">    <span class="keyword">return</span> list_ins_next(<span class="built_in">queue</span>,<span class="built_in">queue</span>-&gt;tail, data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">queue_dequeue</span><span class="params">(Queue *<span class="built_in">queue</span>, <span class="keyword">void</span> **data)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//出队，删除链表的头结点。</span></span><br><span class="line">    <span class="keyword">return</span> list_rem_next(<span class="built_in">queue</span>, NULL, data);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="集合">集合</h2><p>集合是不同对象（称为成员）的无序聚集。<br><strong>特点</strong>：1.成员是无序的。 2.每个成员都只在集合中出现一次。<br><strong>应用</strong>：数据关联、集合覆盖、图、图算法、关系代数等。</p>
<p>实现集合的一种好的方式是采用链表。</p>
<p><code>c</code></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>打算重新学下数据结构和算法。<br><strong>时间</strong>：2月底初步完成。<br><strong>目标</strong>：当面临数据结构和算法时，能立马想到特定的行为或者操作以及一些属性。例如，链表,立马想到插入、移除、遍历和计算元素个数等操作，和指针域、数据域等属性。<br><strong>资源</strong>：书籍《算法精解》,《leetcode-C++》 网站：<a href="https://www.hackerrank.com/">hackerRank</a><br>]]>
    
    </summary>
    
      <category term="数据结构" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Holistic Learning]]></title>
    <link href="http://yoursite.com/2014/11/11/Holistic%20Learning/"/>
    <id>http://yoursite.com/2014/11/11/Holistic Learning/</id>
    <published>2014-11-11T19:18:00.000Z</published>
    <updated>2016-01-09T16:28:37.000Z</updated>
    <content type="html"><![CDATA[<p>Resource : <a href="http://www.scotthyoung.com/blog/Programs/HolisticLearningEBook.pdf" target="_blank" rel="external">scotthyoung</a></p>
<h1 id="Holistic_Learning_VS_Rote_Memorization"><strong>Holistic Learning VS Rote Memorization</strong></h1><p>Holistic learning is the opposite of rote memorization.  Instead of learning through force, your goal is to create webs of information that link together.<br><a id="more"></a><br><code>Rote Memorization</code></p>
<ul>
<li>Organizes Ideas into Boxes</li>
<li>Keeps Subjects and Concepts Distinct</li>
<li>Few Neural Paths to the Same Idea</li>
<li>Views Concepts Through One Perspective</li>
<li>Aims to Learn Through Repetition</li>
</ul>
<p><code>Holistic Learning</code></p>
<ul>
<li>Organized Ideas into Webs</li>
<li>Interrelates Subjects and Concepts</li>
<li>Many Neural Paths to the Same Idea</li>
<li>Views Concepts Through Many Unique Perspectives and Senses</li>
<li>Aims to Learn by Relating</li>
</ul>
<h1 id="Creating_a_Construct"><strong>Creating a Construct</strong></h1><p>Your goal when learning anything is to create a <strong>construct</strong> or an underlying understanding.</p>
<p>When you are being taught a subject or you are learning it on your own, you are getting bricks fed to you one by one.  If your lucky you might have a rough blueprint of how to organize the bricks, but if there aren’t enough linkages or they are assembled improperly the result is confusion.</p>
<p>The first key to building a house is to realize that’s what you are trying to do.  Your goal when learning any complex subject or field should be to build a construct.  A framework of understanding in which your web of knowledge occupies.  </p>
<p>I take very few notes in classes and I study them even less.  <strong>My goal in every class is to build a construct not to transcribe what was said.</strong>  Taking notes can be helpful but realize that is only an intermediate tool to your greater goal.  Having a workable construct.</p>
<p>Even if the building consisted of over a million bricks, <strong>a quick scan would show where the hole in the building lay and where the missing brick could be found.</strong></p>
<p>You don’t need every brick to maintain the structural integrity of a house.  <strong>You don’t need every piece of information to maintain the integrity of your understanding.</strong>  When you have a construct, you can solve difficult problems even when there is a lot of missing information.  You simply look at your construct, see where the holes point to and fill them in.</p>
<p><strong>As long as you have a relatively stable construct, you can find ways around the missing information.</strong> When one path gets shut down you take a different route.  When I take a test I can usually find a way to solve the problem even if I forget the method I was taught.</p>
<h1 id="Start_With_a_Model"><strong>Start With a Model</strong></h1><p>Constructs are formed from <strong>models</strong>, chunks of understanding that aren’t completely<br>accurate but can be used to solve problems.</p>
<p>A model is not the same as a construct. A construct is a complete set of understandings. A construct for math allows you to solve any problem in math.</p>
<p>A model is a quick representation of the idea you are trying to relate or understand.  <strong>It is an incomplete and temporary solution.</strong>  Without building a dozens of models any attempts to form a construct will collapse.  Trying to understand everything at once is impossible for the conscious mind to handle. Building individual models can give you a chance to stitch them together into a complete construct.</p>
<blockquote>
<p>Recently I took a course in Vectors and Linear Algebra.  A very abstract course where most people have difficulty forming a construct.  When the concept of a subspace was introduced, I was lost.  I needed a construct for the concept, but it was too broad to immediately grasp.  So I looked for a model.</p>
<p>The model I chose was a visual representation of what I figured an idealized subspace might look like.  I imagined a subspace as being a plane suspended in three dimensions.  The visualization was as vivid as  it was automatic.  I can remember the plane being red and translucent slicing through a blue-gray vacuum of three dimensional space.</p>
<p>This model was not a construct.  A plane in 3D is just one of many different types of subspaces.  But without it, a subspace would have just been a bunch of rules and numbers.  Even if the model was inaccurate, I could use it as a basis for refining and expanding the eventual construct.</p>
<p>Links form into simple models which form into overall constructs.  Layered creations of understanding.  Effective constructs also link outside of where they are applicable.  Once I had a construct prepared for subspaces, I started to view my own experience as a subspace of reality. </p>
</blockquote>
<p>Constructs that become islands are worthless when there is a problem that exists between them.  Interlinking your constructs helps funnel problems outside of their influence zone into realms of understanding.  </p>
<h1 id="How_to_Learn_Holistically"><strong>How to Learn Holistically</strong></h1><p><strong>When I need a model, I find one.  When I have enough models I form a construct.When I learn information I try to link it within and outside my constructs.When I learn information I try to link it within and outside my constructs.</strong></p>
<p>You create webs of information, constructs and models by <strong>visceralizing</strong>, <strong>metaphor</strong> and <strong>exploring</strong></p>
<h2 id="Visceralization"><strong>Visceralization</strong></h2><p>A model isn’t a grouping of ideas, it’s an experience.</p>
<p>The best “visceralizations” are combinations of images, sounds, feelings and textures.  Depending on your learning preference you may see, hear or feel ideas.  More than just a picture, you want an experience.</p>
<p>If you aren’t sure exactly how to do this, the best place to start is with a pad of paper.  <strong>Draw out the relationship between several ideas in a picture</strong>.  Remember your goal isn’t a perfect construct but a simplified model.  Even if your model is shown to be slightly inaccurate later, it is still better than no model at all.</p>
<p>Ask yourself what the concept would look, sound or feel like?  How would it function and respond?  </p>
<blockquote>
<p>When learning computer science I formed mental pictures of bizarre machines and objects that represented the different objects and functions I learned.  Strings and arrays looked like colored cubes suspended along a cord.  Functions were machines that ate strings and individual blocks and spat out new blocks</p>
</blockquote>
<p>As you get better you should be able to do this without a pencil and paper.  Your imagination is far faster than your hand, so once you begin to understand the process you can start visceralizing how different concepts interact.  You can see how they squish and respond to stimuli.  Boring ideas translate into a bizarre and otherworldly scene.</p>
<h2 id="Metaphor"><strong>Metaphor</strong></h2><p>To interlink constructs you need to use metaphor.<br>Metaphor is a literary term used <strong>when you want to relate two things that aren’t actually related.</strong></p>
<p>If you wanted to build a house, the fastest way would be to make minor modifications to a blueprint you already own.  Metaphors can allow you to relate a new construct to a previously established one.  This can help you piece together ideas when your models fail to give accurate information.</p>
<p>If you don’t already use metaphors extensively, <strong>a quick way to start would be to play the, “That Reminds Me Of…” game whenever you learn something new.</strong>  You play the game by thinking or writing down a list of ideas that this new concept reminds you of.  It doesn’t matter if the ideas are ridiculous or completely unrelated.  That’s the point, to link together ideas that don’t normally connect.</p>
<p>The idea is that by playing this game repeatedly you can see the new concept through the vantage points where you already have understanding.  This helps you understand more rapidly.</p>
<p>If you already understand sports, then you can use sports as a metaphor when trying to comprehend economics or science.  You can create connections between any subjects you just need to be patient enough.</p>
<blockquote>
<p>When I read Nicollo Machiavelli’s, The Prince, I started linking his ideas about statecraft (which were a rather weak construct for myself) and built them into ideas about business and social settings (which were strong constructs).</p>
</blockquote>
<h2 id="Explore"><strong>Explore</strong></h2><p>Exploration is the process of going through your constructs, models and metaphors and finding errors. </p>
<p>Holes and errors will only come up when you actually go back and test them. Until you  actually review the information involved, they will be hidden from your awareness.  This happens when you go to write an exam and you realize you don’t know how to solve a specific problem or you don’t have the right formula.  A strong enough network may mean you don’t need that formula to solve the problem, but you may have to take a few detours to get there.</p>
<p><strong>The best way to explore is to actually face problems.</strong><br>Usually the idea is already reinforced inside my web, but sometimes I missed it entirely.  Studying isn’t as good as testing but it can fix a few broken paths</p>
<h1 id="Summary_of_Holistic_Learning"><strong>Summary of Holistic Learning</strong></h1><p>Holistic learning works with highly conceptual information where there is an underlying system.  It doesn’t work well with arbitrary information or skills.</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Resource : <a href="http://www.scotthyoung.com/blog/Programs/HolisticLearningEBook.pdf">scotthyoung</a></p>
<h1 id="Holistic_Learning_VS_Rote_Memorization"><strong>Holistic Learning VS Rote Memorization</strong></h1><p>Holistic learning is the opposite of rote memorization.  Instead of learning through force, your goal is to create webs of information that link together.<br>]]>
    
    </summary>
    
      <category term="思维" scheme="http://yoursite.com/tags/%E6%80%9D%E7%BB%B4/"/>
    
      <category term="记忆力" scheme="http://yoursite.com/tags/%E8%AE%B0%E5%BF%86%E5%8A%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Git Real 2]]></title>
    <link href="http://yoursite.com/2014/11/09/Git%20Real%202/"/>
    <id>http://yoursite.com/2014/11/09/Git Real 2/</id>
    <published>2014-11-09T12:18:00.000Z</published>
    <updated>2015-03-17T07:22:42.000Z</updated>
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/0.jpg" alt="0"></p>
<h1 id="INTERACTIVE_REBASE"><strong>INTERACTIVE REBASE</strong></h1><h2 id="REBASE_RECAP"><strong>REBASE RECAP</strong></h2><blockquote>
<p>So you’ve been working on your feature branch for a couple days and you realize you need to bring commits back in from master. Now you could just merge in the branch but that would create an ugly merge commit. Use rebase to bring those changes into your branch without the merge commit.<br><a id="more"></a><br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> rebase master</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="INTERACTIVE_REBASE-1"><strong>INTERACTIVE REBASE</strong></h2><blockquote>
<p>You’re getting ready to merge in your feature branch, but first you want to clean up your commits a bit. Go ahead and use interactive rebase to edit your last 4 commits.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -<span class="tag">i</span> HEAD~<span class="number">4</span>  <span class="comment">/*alter commits in the same branch*/</span></span><br></pre></td></tr></table></figure>
<p>We want to re-order these four commits.</p>
<h2 id="COMMIT_ORDERING"><strong>COMMIT ORDERING</strong></h2><blockquote>
<p>You notice a critical error on your part. The commit where you wrote tests comes after the commit where you made the actual changes. Let’s swap these 2 commits so that it looks like you wrote the tests first. Swap the ‘Add tests’ commit so that it comes before the ‘Implement poodles’ commit.</p>
</blockquote>
<p><code>editor:</code><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick b3f1649 Add unicorn</span><br><span class="line">pick f239187 Implement poodles  //<span class="operator"><span class="keyword">change</span> <span class="keyword">to</span> pick <span class="number">4</span>b65a5a <span class="keyword">Add</span> tests </span><br><span class="line">pick <span class="number">4</span>b65a5a <span class="keyword">Add</span> tests          //<span class="keyword">change</span> <span class="keyword">to</span> pick f239187 Implement poodles</span><br><span class="line">pick c3f863f Added a title <span class="keyword">to</span> the homepage</span></span><br></pre></td></tr></table></figure></p>
<p>Swap the order,save and close the editor.Commits get replayed in new order.</p>
<h2 id="REWORDING_A_COMMIT"><strong>REWORDING A COMMIT</strong></h2><blockquote>
<p>1.As you’re editing your commits, you notice that the commit that says ‘Add tests’ is a little vague, maybe you should change it to something more specific. Use the reword command to change the message of this commit.</p>
</blockquote>
<p><code>editor:</code><br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick b3f1649 Add unicorn</span><br><span class="line">pick <span class="number">4</span>b65a5a Add tests<span class="comment"> // reword 4b65a5a Add tests</span></span><br><span class="line">pick f239187 Implement poodles</span><br><span class="line">pick c3f863f Added <span class="operator">a</span> title <span class="built_in">to</span> <span class="operator">the</span> homepage</span><br></pre></td></tr></table></figure></p>
<p>Commands:<br>p, pick = use commit<br>r, reword = use commit, but edit the commit message<br>e, edit = use commit, but stop for amending<br>s, squash = use commit, but meld into previous commit<br>f, fixup = like “squash”, but discard this commit’s log message<br>x, exec = run command (the rest of the line) using shell</p>
<blockquote>
<p>2.After setting the <code>reword</code> command in the interactive rebase editor <strong>another editor window has opened up</strong>. This is where you actually change the commit message. Go ahead and change the commit message to: <code>Add tests for poodles</code> to be more descriptive.</p>
</blockquote>
<p><code>editor:</code><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Add</span> <span class="bash">tests //Add tests <span class="keyword">for</span> poodles</span></span><br></pre></td></tr></table></figure></p>
<h2 id="SPLIT_COMMITS"><strong>SPLIT COMMITS</strong></h2><blockquote>
<p>1.You remember that the ‘Add unicorn’ commit also contains the testing changes. Since we have separate commits for adding tests for poodles it makes sense to split out the test changes into a separate commit. Tell git to stop at this commit so we can reorganize it a bit.</p>
</blockquote>
<p><code>editor:</code><br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick b3f1649 Add unicorn  <span class="comment"> //edit b3f1649 Add unicorn</span></span><br><span class="line">pick <span class="number">4</span>b65a5a Added tests <span class="keyword">for</span> poodles</span><br><span class="line">pick f239187 Implement poodles</span><br><span class="line">pick c3f863f Added <span class="operator">a</span> title <span class="built_in">to</span> <span class="operator">the</span> homepage</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>2.After saving the interactive rebase text file, git has stopped at the ‘Add unicorn’ commit. The first thing we need to do is to reset back to the previous commit, so the changes in the most recent commit are back in the file and unstaged.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> reset HEAD^</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.Great! You’ve already re-committed the changes needed in 2 different commits. All that’s left to do is to resume the rebase with the continue option.</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --<span class="keyword">continue</span></span><br></pre></td></tr></table></figure>
<p>One commit is now two.</p>
<h2 id="SQUASHING_COMMITS"><strong>SQUASHING COMMITS</strong></h2><blockquote>
<p>1.You noticed another bug with those pesky poodles, so you’ve gone ahead and fixed it, making another commit in the process. Now you have 2 commits that both affect the poodles page. You should squash them into one commit to simplify your git logs.</p>
</blockquote>
<p><code>editor:</code><br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick b3f1649 <span class="keyword">Add</span> unicorn</span><br><span class="line">pick <span class="number">4</span>b65a5a <span class="keyword">Add</span> tests</span><br><span class="line">pick f239187 Implement poodles</span><br><span class="line">pick c3f863f <span class="keyword">Add</span> title <span class="keyword">to</span> poodle page <span class="comment">//squash c3f863f Add title to poodle page</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>2.After designating a commit to be squashed, another editor pops up enabling you to set a commit message for the resulting commit. Go ahead and set to: <code>squashed some poodles</code>.</p>
</blockquote>
<p><code>editor:</code></p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//This is a combination of 2 commits.</span></span><br><span class="line"><span class="comment">//The first commit's message is:</span></span><br><span class="line"></span><br><span class="line">Implement poodles <span class="comment">//注释掉</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//This is the 2nd commit message:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Add</span> title <span class="keyword">to</span> poodle page <span class="comment">//注释掉</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//合并成你想的名字：</span></span><br><span class="line">squashed some poodles</span><br></pre></td></tr></table></figure>
<p>The content of two commits is replayed, but only one commit is made.<br><br></p>
<h1 id="STASHING"><strong>STASHING</strong></h1><h2 id="GIT_STASH"><strong>GIT STASH</strong></h2><blockquote>
<p>You’re not quite ready to commit what you’re working on, but need to make a quick fix to master. Fear not, just stash your current changes so you can switch to master quick.</p>
</blockquote>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="built_in">save</span>  <span class="comment">// = git stash</span></span><br></pre></td></tr></table></figure>
<h2 id="GIT_STASH_LIST"><strong>GIT STASH LIST</strong></h2><blockquote>
<p>You just finished making those quick changes to master. You’re now ready to resume your work on the feature you had started on before you had to fix master. Let’s first list all the stashes to make sure we get the right one.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="built_in">list</span>   <span class="comment">//stash names are shown in the list</span></span><br></pre></td></tr></table></figure>
<h2 id="GIT_STASH_APPLY"><strong>GIT STASH APPLY</strong></h2><blockquote>
<p>Great! As you can see, your stash is in the stash list. Let’s apply the stash so you can get back to work.</p>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">git</span> <span class="tag">stash</span> <span class="tag">apply</span> <span class="tag">stash</span><span class="variable">@&#123;0&#125;</span> <span class="comment">// = git stash apply</span></span><br></pre></td></tr></table></figure>
<p><code>stash@{0}</code> is the default.<br>stash has been applied but it’s still here.</p>
<h2 id="GIT_STASH_DROP"><strong>GIT STASH DROP</strong></h2><blockquote>
<p>Ok, so now that you have all your stashed changes back, let’s clean up the stash list. There’s only one stash; go ahead and drop it.</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="operator"><span class="keyword">drop</span>  //<span class="keyword">Delete</span> stash@&#123;<span class="number">0</span>&#125; <span class="keyword">from</span> list</span><br><span class="line">git stash clear //Clear <span class="keyword">all</span> <span class="keyword">of</span> them <span class="keyword">at</span> once</span></span><br></pre></td></tr></table></figure>
<h2 id="CONFLICTS"><strong>CONFLICTS</strong></h2><blockquote>
<p>1.You came back from master and resumed working on your feature, when you realize that you forgot to apply your saved stash. Go ahead and apply it now.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> stash apply</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.Uh oh! There was a conflict when trying to apply your previous stash. It’s no problem, you were just trying things anyway. Go ahead and do a hard reset back to the last commit.</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="operator"><span class="keyword">reset</span> <span class="comment">--hard HEAD</span></span><br><span class="line">git stash apply</span></span><br></pre></td></tr></table></figure>
<h2 id="GIT_STASH_POP"><strong>GIT STASH POP</strong></h2><blockquote>
<p>Now that you have the file reset, use the <code>pop</code> command to <strong>apply and delete the stash at the same time</strong>. </p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="keyword">pop</span></span><br></pre></td></tr></table></figure>
<h2 id="KEEPING_THE_INDEX"><strong>KEEPING THE INDEX</strong></h2><blockquote>
<p>You need to swap branches again, but this time some of your changes are ready to be committed. Stash all the unstaged changes, but leave the staged changes intact so they can be committed afterwards.</p>
</blockquote>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="keyword">save</span> --<span class="keyword">keep</span>-index <span class="comment">//cause the staging area not to be stashed</span></span><br></pre></td></tr></table></figure>
<h2 id="INCLUDE_UNTRACKED"><strong>INCLUDE UNTRACKED</strong></h2><blockquote>
<p>Wow, there are so many small fixes on master today! You really need to stash some more changes, but it doesn’t seem to be working on these untracked files you just created. Try using the <code>--include-untracked</code> option to stash all those new files.</p>
</blockquote>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="keyword">save</span> --<span class="keyword">include</span>-untracked <span class="comment">//cause untracked files to be stashed,too</span></span><br></pre></td></tr></table></figure>
<h2 id="LIST_OPTIONS"><strong>LIST OPTIONS</strong></h2><blockquote>
<p>You’ve been stashing stuff all day since you keep having to make small quick fixes to master. Now you have a bunch of stashed changes and you’re not sure which one you need to apply. You could look through them all one by one, or you could use the <code>--stat</code> option to list information about each stash. Give that a try.<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="keyword">list</span> --stat //summarizes <span class="keyword">file</span> <span class="keyword">changes</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="STASH_DETAILS"><strong>STASH DETAILS</strong></h2><blockquote>
<p>You now have a list of stashes that are showing you more information, and you think you may have spotted the stash that you need. Take a more detailed look at the stash@{2} stash with the <code>--patch</code> option.</p>
</blockquote>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash show stash@&#123;<span class="number">2</span>&#125; --<span class="keyword">patch</span> <span class="comment">//show file differents</span></span><br></pre></td></tr></table></figure>
<h2 id="STASH_MESSAGE"><strong>STASH MESSAGE</strong></h2><blockquote>
<p>You’re halfway through a large feature. Your team has decided that they want you to deploy what you have so far, but you have a smaller unfinished feature that isn’t ready to be committed yet. Go ahead and stash your current changes with the <strong>message <code>Added groom method</code></strong>, so you know which stash has your changes.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> stash save <span class="string">"Added groom method"</span></span><br></pre></td></tr></table></figure>
<h2 id="STASH_BRANCHING"><strong>STASH BRANCHING</strong></h2><blockquote>
<p>Now that you’ve deployed the main part of your feature, you need to finish up what is left. Create a new branch named <code>poodle</code> and apply your most current stash all in one command.</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">git</span> <span class="tag">stash</span> <span class="tag">branch</span> <span class="tag">poodle</span> <span class="tag">stash</span><span class="at_rule">@<span class="keyword">&#123;0&#125;</span></span></span><br></pre></td></tr></table></figure>
<p><code>git stash branch</code>checks a new branch out automatically, and drops the stash automatically.<br><br></p>
<h1 id="PURGING_HISTORY"><strong>PURGING HISTORY</strong></h1><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/17.jpg" alt="17"></p>
<h2 id="REPO_COPY"><strong>REPO COPY</strong></h2><blockquote>
<p>Now you’ve done it. You accidentally put the company’s master password into one of your files. You’re beginning to panic because you know that it’s pretty hard to delete something forever in git. That’s what you really need to do, though, or you’re in big trouble. You’re going to need to purge the history. First, though, make a copy of your repo in case you mess it up. Make a copy of the <code>poodles</code> repository, and name it whatever you want.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> poodles poodles_copy</span><br></pre></td></tr></table></figure>
<h2 id="TREE_FILTER"><strong>TREE FILTER</strong></h2><blockquote>
<p>Luckily for you, the password you accidentally committed was in the <code>master_password.txt</code> file. Use the <code>filter-branch</code> command and remove this file from all of your commits.</p>
</blockquote>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//git <span class="built_in">filter</span>-branch --tree-<span class="built_in">filter</span> &lt;<span class="keyword">command</span>&gt; ... </span><br><span class="line">//specify any <span class="keyword">shell</span> commend</span><br><span class="line">git <span class="built_in">filter</span>-branch --tree-<span class="built_in">filter</span> <span class="string">'rm -f master_password.txt'</span></span><br></pre></td></tr></table></figure>
<p><code>...</code>: </p>
<ul>
<li><code>--all</code> option filter all commits in all branches.</li>
<li><code>HEAD</code> filter only current branch.</li>
</ul>
<p>Git will check each commit out into <strong>working directory</strong>, run your command, and re-commit.</p>
<h2 id="INDEX_FILTER"><strong>INDEX FILTER</strong></h2><blockquote>
<p>This repository is so large, using <code>--tree-filter</code> is going to take all day. Use <code>--index-filter</code> to remove <code>master_password.txt</code> instead. Remember, <code>--index-filte</code>r will need a command that works on the staging area, which is going to be some sort of git command.</p>
</blockquote>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//git <span class="built_in">filter</span>-branch --<span class="built_in">index</span>-<span class="built_in">filter</span> &lt;<span class="keyword">command</span>&gt; ...</span><br><span class="line">//<span class="keyword">command</span> must operate <span class="keyword">on</span> staging area.</span><br><span class="line">git <span class="built_in">filter</span>-branch --<span class="built_in">index</span>-<span class="built_in">filter</span> <span class="string">'git rm --cached --ignore-unmatch master_password.txt'</span></span><br></pre></td></tr></table></figure>
<p>It operates on <strong>staging area</strong>.<br><code>--ignore-unmatch</code>: succeeds even if file isn’t present.<br>Git will run your command against each commit, but without checking it out first(so it’s faster).</p>
<h2 id="FORCE"><strong>FORCE</strong></h2><blockquote>
<p>You just realized that you also have a <code>master_username.txt</code> file that should probably be removed too, just to be safe. Use either technique you have learned to remove this file. Don’t forget, you have a history backup from the first time you used <code>filter-branch</code>. Use the correct option to force git to overwrite it.</p>
</blockquote>
<p>After you run filter-branch, Git leaves a backup of your tree in the “.git” directory.By default, you can’t run filter-branch again because it won’t overwrite the backup.You can force it with the -f option.<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">git</span> <span class="comment">filter</span><span class="literal">-</span><span class="comment">branch</span> <span class="literal">-</span><span class="comment">f</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">tree</span><span class="literal">-</span><span class="comment">filter</span> <span class="comment">'git</span> <span class="comment">rm</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">cached</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">ignore</span><span class="literal">-</span><span class="comment">unmatch</span> <span class="comment">master_username</span><span class="string">.</span><span class="comment">txt'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="PRUNING"><strong>PRUNING</strong></h2><blockquote>
<p>Great! Now we’re getting somewhere. There is one more problem though, you realize that some of the commits don’t contain anything anymore, since you removed the password file that they referenced. You should probably use the <code>--prune-empty</code> option do something to clean these out.</p>
</blockquote>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">filter</span>-branch -f <span class="comment">--prune-empty</span></span><br></pre></td></tr></table></figure>
<p><code>--prune-empty</code> option drops commits that don’t alter any files.</p>
<p><br></p>
<h1 id="WORKING_TOGETHER"><strong>WORKING TOGETHER</strong></h1><h2 id="LINE_ENDINGS"><strong>LINE ENDINGS</strong></h2><blockquote>
<p>1.Your company just hired a new developer who works on a Windows computer, and you notice that some files seem to be missing line separators. You realize that the Windows machine is saving files with a different line separator character than the Unix stations. Here on your Unix machine, set your ‘git config’ variable to convert line endings to the Unix way on commit.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/18.jpg" alt="18"></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> core.autocrlf <span class="keyword">input</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.Because you’re a nice person, you decide to go help the new developer convert line endings to work on his windows computer. Set the <code>git config</code> variable to convert line endings from Unix to Windows formats on checkout.</p>
</blockquote>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">global</span> core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/19.jpg" alt="19"></p>
<blockquote>
<p>3.After helping a 3rd Windows developer set up their workstation, you’ve decided enough is enough. It’s time to add a <code>.gitattributes</code> file to handle all these line ending problems. Finish adding the options to the <code>*.bat</code> and <code>*.sh files</code>. Remember, <code>*.bat</code> is a windows file, while <code>*.sh</code> is a unix file.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/20.jpg" alt="20"></p>
<p><code>text=auto</code> Choose conversion automatically<br><code>text</code> Treat files as text -convert to OS’s line endings back to LF on commit<br><code>text eol = crlf</code> <code>text eol = lf</code> Convert to specified format on checkout back to LF commit<br><code>binary</code> Treat files as binary - do no conversion</p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/21.jpg" alt="21"></p>
<h2 id="CHERRY_PICKING"><strong>CHERRY PICKING</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/22.jpg" alt="22"></p>
<blockquote>
<p>You were working on a new feature for the Unicorn class, when you happened to find a fix for a bug that was causing Unicorns to stop sparkling on occasion. You really want this commit in master ASAP. Cherry-pick the commit with a sha of <code>3fbd473</code> to the master branch.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick <span class="number">3f</span>bd473 <span class="comment">//specify commit you want</span></span><br></pre></td></tr></table></figure>
<p>We copied a single commit a single commit to the current branch</p>
<h2 id="EDIT_A_CHERRY_PICK"><strong>EDIT A CHERRY PICK</strong></h2><blockquote>
<p>You’ve realized that this commit <code>3fbd473</code>, which you need to cherry pick, has a rather vague message. Do another cherry-pick, but edit the commit message this time.</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick <span class="comment">--edit 3fbd473</span></span><br></pre></td></tr></table></figure>
<p>Then enter your message, save ,and quit.</p>
<h2 id="CHERRY_PICK_SQUASH"><strong>CHERRY PICK SQUASH</strong></h2><blockquote>
<p>1.You’ve fixed another bug that was causing the unicorn horn to be blunt instead of nice and sharp, but you had to make an extra commit to remove some debugging code. We want to convert these two commits to a single commit on the master branch. Cherry-pick commits <code>b447335</code>“ and <code>b59d285</code>, without committing them to the current branch.<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> cherry-pick --<span class="built_in">no</span>-commit b447335 b59d285</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><code>--no-commit</code> pulls in changes and stages them, but doesn’t commit</p>
<blockquote>
<p>2.The changes from both cherry picked commits are now on master, and all that’s left to do is to commit these changes. (Don’t forget the commit message!)</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> commit -m <span class="string">"add both"</span></span><br></pre></td></tr></table></figure>
<h2 id="TRACKING_CHERRY_PICKS"><strong>TRACKING CHERRY PICKS</strong></h2><blockquote>
<p>There has been a lot of cherry picking lately, so the decision has been made to keep track of where these commits are coming from. Cherry pick the “bug fix” commit with a sha of <code>bdf9578</code>. Use the option which keeps a record of where the commit was cherry picked.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> cherry-pick -x bdf9578</span><br></pre></td></tr></table></figure>
<p><code>-x</code> adds source SHA to commit message.<br>Only useful with public branches; don’t use for local branches</p>
<h2 id="SIGNING_OFF"><strong>SIGNING OFF</strong></h2><blockquote>
<p>You’ve decided that it is probably a good idea to put your name on these commits you’re cherry picking. Go ahead and get started by cherry picking the commit with a sha of <code>bdf9578</code>. Don’t forget to use the option which will sign off on the cherry pick!</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick <span class="comment">--signoff bdf9578</span></span><br></pre></td></tr></table></figure>
<p><code>--signoff</code> adds current user’s name to commit message.</p>
<p><br></p>
<h1 id="SUBMODULES"><strong>SUBMODULES</strong></h1><h2 id="BAD_WAYS_TO_SHARE_LIBRARIES"><strong>BAD WAYS TO SHARE LIBRARIES</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/23.jpg" alt="23"></p>
<h2 id="GIT_SUBMODULES"><strong>GIT SUBMODULES</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/24.jpg" alt="24"></p>
<h2 id="SUBMODULE"><strong>SUBMODULE</strong></h2><blockquote>
<p>You’re in the process of putting together two websites. One is for the Mythical Wildlife Fund: <code>MWF.com</code>. The other site is an adoption site for stray unicorns called <code>unicornrescues.com</code>. Both sites will share code for a JavaScript image gallery along with the associated css. Let’s get started by adding a submodule containing the JavaScript at <code>&quot;git@petstore.com:gallery_js.git&quot;</code>.</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add git<span class="annotation">@petstore</span>.<span class="string">com:</span>gallery_js.git</span><br></pre></td></tr></table></figure>
<h2 id="STAGING_A_SUBMODULE"><strong>STAGING A SUBMODULE</strong></h2><blockquote>
<p>All that’s left to do is to commit your submodule so that other collaborators can use it. Using a single git command, stage the current changes to <code>.gitmodules</code> and <code>gallery_js</code>.</p>
</blockquote>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add -<span class="literal">A</span></span><br></pre></td></tr></table></figure>
<h2 id="COMMITTING_A_SUBMODULE"><strong>COMMITTING A SUBMODULE</strong></h2><blockquote>
<p>Great! Now go ahead and commit the submodule. Don’t forget the commit message!</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> commit -m <span class="string">"Add submodule"</span></span><br></pre></td></tr></table></figure>
<h2 id="INIT_SUBMODULE"><strong>INIT SUBMODULE</strong></h2><blockquote>
<p>You’re helping a co worker get set up to work on unicornrescues.com. You’ve already cloned the repo. Next, initialize the submodules so they download their own contents.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> submodule init</span><br></pre></td></tr></table></figure>
<h2 id="UPDATE_SUBMODULES"><strong>UPDATE SUBMODULES</strong></h2><blockquote>
<p>Now that you have the submodules initialized, you need to check for updates and make sure they have the correct commits checked out. Run the submodule command that does this.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> submodule update</span><br></pre></td></tr></table></figure>
<h2 id="DETACHED_HEAD"><strong>DETACHED HEAD</strong></h2><blockquote>
<p>You’ve just committed a few changes to the <code>gallery_css</code> submodule. When you go to push, you realize that you’re in a detached head state. Don’t panic, though! We can fix it. Let’s start out by creating a new branch with your most recent commit: “a7eded4”. Name the branch <code>temp_changes</code>.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> branch temp_changes a7eded4</span><br></pre></td></tr></table></figure>
<h2 id="BRANCH_MERGE"><strong>BRANCH MERGE</strong></h2><blockquote>
<p>Your seemingly lost changes now reside on the <code>temp_changes</code> branch. Go ahead and merge the <code>temp_changes</code> branch back into master.</p>
</blockquote>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">merge</span> temp_changes</span><br></pre></td></tr></table></figure>
<h2 id="PUSH_CHECK"><strong>PUSH CHECK</strong></h2><blockquote>
<p>After finishing up a bunch of changes, you want to push them up to the remote so you can share it with your other co-workers that are working on the project. Since you’re using submodules, you should make sure to use the option which checks whether you have un-pushed submodules.</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push <span class="comment">--recurse-submodules=check</span></span><br></pre></td></tr></table></figure>
<h2 id="ON_DEMAND_PUSH"><strong>ON DEMAND PUSH</strong></h2><blockquote>
<p>We need to push submodule changes again. But this time, instead of going into the submodule to push it, just use the <code>on-demand</code> option for the <code>--recurse-submodules</code> option. This way submodules that need it will be pushed automatically.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> push --recurse-submodules=<span class="built_in">on</span>-demand</span><br></pre></td></tr></table></figure>
<h2 id="ON_DEMAND_ALIAS"><strong>ON DEMAND ALIAS</strong></h2><blockquote>
<p>Wouldn’t it be nice if you didn’t have to type that long line out every time you wanted to push this project? Let’s make the command easier to use. Create an alias which will run the git push <code>--recurse-submodules=on-demand</code> command. Name the alias anything you want.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config alias<span class="class">.pushall</span> <span class="string">"push --recurse-submodules=on-demand"</span></span><br><span class="line">git pushall</span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="REFLOG"><strong>REFLOG</strong></h1><h2 id="THE_MISTAKE"><strong>THE MISTAKE</strong></h2><blockquote>
<p>You decided that unicorns should leave a rainbow trail when they jump. You made the upgrade, and committed the changes. There is a problem, though: this change caused a bug which prevents the unicorns from jumping at all. You panic! Hurry, do a “hard reset” back to the commit before the rainbow jumping was added: <code>&quot;ab27026&quot;</code>.<br>$ git log —oneline<br>8791492 Rainbow trail when jumping.<br>ab27026 Implement unicorn jumping.<br>…..</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="operator"><span class="keyword">reset</span> <span class="comment">--hard ab27026</span></span></span><br></pre></td></tr></table></figure>
<h2 id="REFLOG-1"><strong>REFLOG</strong></h2><blockquote>
<p>You realize after the fact that maybe the hard reset was a bit overkill. You still wanted your code used to add rainbow jumps. It’s a good thing git never really gets rid of commits. Let’s look at the reflog to see if there is anything we can do.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/25.jpg" alt="25"><br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog <span class="comment">//查看</span></span><br></pre></td></tr></table></figure></p>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/26.jpg" alt="26"></p>
<h2 id="RESETTING_THE_REFLOG"><strong>RESETTING THE REFLOG</strong></h2><blockquote>
<p>Great, we can see that there is a log of the reset! Take note of the reflog entry right before your earlier reset. Then do a “hard reset” to that commit to get your work back.</p>
</blockquote>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">reset</span> --hard <span class="number">8791492</span> // git <span class="keyword">reset</span> --hard HEAD<span class="variable">@&#123;1&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="DELETING_A_BRANCH"><strong>DELETING A BRANCH</strong></h2><blockquote>
<p>You decide to clean house a bit. You know that all branches have either been merged or abandoned, so you’re going to delete them to keep a tidy repository. Go ahead and get started by deleting the <code>fluffy_poodle</code> branch.</p>
</blockquote>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -<span class="keyword">D</span> fluffy_poodle</span><br></pre></td></tr></table></figure>
<h2 id="WALKING_REFLOGS"><strong>WALKING REFLOGS</strong></h2><blockquote>
<p>Then you realize that you needed the styles menu from that <code>fluffy_poodle</code> branch you just deleted. Good thing git never really gets rid of anything. List all commits in the reflog by using the <code>--walk-reflogs</code> option of git log.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/27.jpg" alt="27"></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="command">log</span> <span class="comment">--walk-reflogs //查看</span></span><br></pre></td></tr></table></figure>
<h2 id="BRANCH_RECOVERY"><strong>BRANCH RECOVERY</strong></h2><blockquote>
<p>Now that you know what the last commit was on the deleted branch, you can create a new branch and attach the commit to it. Create a new branch named <code>fluffy_poodle</code> using the most recent commit from the deleted branch.<br>$ git log —walk-reflogs —oneline<br>b8ec575 HEAD@{0}: checkout: moving from fluffy_poodle to master<br>aaafb5e HEAD@{1}: commit: Fluff poodle.<br>….</p>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">git</span> <span class="tag">branch</span> <span class="tag">fluffy_poodle</span> <span class="tag">HEAD</span><span class="variable">@&#123;1&#125;</span> <span class="comment">//git branch fluffy_poodle aaafb5e</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/0.jpg" alt="0"></p>
<h1 id="INTERACTIVE_REBASE"><strong>INTERACTIVE REBASE</strong></h1><h2 id="REBASE_RECAP"><strong>REBASE RECAP</strong></h2><blockquote>
<p>So you’ve been working on your feature branch for a couple days and you realize you need to bring commits back in from master. Now you could just merge in the branch but that would create an ugly merge commit. Use rebase to bring those changes into your branch without the merge commit.<br>]]>
    
    </summary>
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Git Real]]></title>
    <link href="http://yoursite.com/2014/11/08/Git%20Real/"/>
    <id>http://yoursite.com/2014/11/08/Git Real/</id>
    <published>2014-11-08T12:18:00.000Z</published>
    <updated>2015-03-17T07:24:20.000Z</updated>
    <content type="html"><![CDATA[<h1 id="STAGING_&amp;_REMOTES"><strong>STAGING &amp; REMOTES</strong></h1><h2 id="UNSTAGED_DIFFERENCES"><strong>UNSTAGED DIFFERENCES</strong></h2><blockquote>
<p>A new file has been added to the site. Run the command to see what all has changed since your last commit.</p>
</blockquote>
<p><code>git status</code> will list out which files have changed. If we want to see the actual changes:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> diff</span><br></pre></td></tr></table></figure></p>
<h2 id="STAGE_NEW_FILE"><strong>STAGE NEW FILE</strong></h2><blockquote>
<p>There it is: <code>ostrich.html</code>. Stage it to be committed.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span> ostrich.html</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="STAGED_DIFFERENCES"><strong>STAGED DIFFERENCES</strong></h2><blockquote>
<p>We’ve added <code>ostrich.html</code> to the staging area, but your co-worker has stopped by and asked to see the new page first. Run a <code>diff</code> on the staged changes.</p>
</blockquote>
<p><code>git diff</code> is great for seeing <strong>unstaged differences</strong> since last commit, but you need the <code>--staged</code> option in order to see staged changes.<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff <span class="comment">--staged</span></span><br></pre></td></tr></table></figure></p>
<h2 id="UNSTAGE_FILES"><strong>UNSTAGE FILES</strong></h2><blockquote>
<p>“Wait,” says the co-worker. “They didn’t tell you? The client “wants the ostrich section pulled - they couldn’t get a license to “sell them.” Better unstage <code>ostrich.html</code>.<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> reset HEAD ostrich.html</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="SKIP_STAGING"><strong>SKIP STAGING</strong></h2><blockquote>
<p>We’ve modified the <code>index.html</code> file, adding a link to the cats section. Since that file is already tracked, you can just skip staging and commit it with one command.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -<span class="tag">a</span> -m <span class="string">"index.html adding a link"</span></span><br></pre></td></tr></table></figure>
<p><code>-a</code>: Add changes from all tracked files. Doesn’t add new(untracked) files.</p>
<h2 id="ADD_TO_COMMIT"><strong>ADD TO COMMIT</strong></h2><blockquote>
<p>Whoops! We forgot to add the <code>cats.html</code> page that <code>index.html</code> links to, and it should really be <code>amended</code> on the same commit. To do this, let’s first stage <code>cats.html</code>.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span> cats.html</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Second, let’s add <code>cats.html</code> to the prior commit and change the commit message in one step.<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> commit --amend -m <span class="string">"modified index.html &amp; add cats.html"</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>You don’t want to make a new commit, you want to amend the previous one, so what I’m trying to say is: Use the amend option(<strong>add to the last commit</strong>)<br>Whatever has been staged is added to last commit!</p>
<h2 id="ROLL_BACK_COMMIT"><strong>ROLL BACK COMMIT</strong></h2><blockquote>
<p>Wait, you’re getting word that the cats section might be cancelled. <strong>Undo the commit, and put the files back in staging.</strong></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="operator"><span class="keyword">reset</span> <span class="comment">--soft HEAD^</span></span></span><br></pre></td></tr></table></figure>
<p><code>soft</code>: Reset into staging<br><code>HEAD^</code>: Move to commit before ‘HEAD’<br>Now I can make changes, and re-commit</p>
<h2 id="DISCARD_CHANGES"><strong>DISCARD CHANGES</strong></h2><blockquote>
<p>Forget the whole thing - the client’s license to sell cats is suspended during some kind of “investigation”. Discard your changes to <code>cats.html</code> and <code>index.html</code>.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- cats<span class="class">.html</span> index.html</span><br></pre></td></tr></table></figure>
<p>Blow away all changes since last commit.</p>
<h2 id="REMOVE_COMMIT"><strong>REMOVE COMMIT</strong></h2><blockquote>
<p>1.The next feature is a banner on the main page, saying the pet shop will soon be offering badgers. Add and commit <code>index.html</code> in one step, skipping the staging area.<br>2.Your co-worker is back, looking sheepish. “Never mind the badgers ad. The client’s legal department said that was a liability risk.” <strong>You’ll need to remove the most recent commit, and all its changes.</strong></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="operator"><span class="keyword">commit</span> -am <span class="string">"add index.html"</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard HEAD^</span></span></span><br></pre></td></tr></table></figure>
<h2 id="NEW_REMOTE_REPOS_AND_PUSH"><strong>NEW REMOTE REPOS AND PUSH</strong></h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git remote add <span class="variable">&lt;name&gt;</span> <span class="variable">&lt;address&gt;</span> /<span class="keyword">*</span>To add new remotes<span class="keyword">*</span>/</span><br><span class="line">git remote rm <span class="variable">&lt;name&gt;</span> /<span class="keyword">*</span>To remove remotes<span class="keyword">*</span>/</span><br><span class="line">git remote -v /<span class="keyword">*</span>show remote repositories<span class="keyword">*</span>/</span><br><span class="line">git push -u <span class="variable">&lt;name&gt;</span> <span class="variable">&lt;branch&gt;</span> /<span class="keyword">*</span>To push to remotes. The -u tells Git to remember the parameters, so that next time we can simply run git push <span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="CLONING_&amp;_BRANCHING"><strong>CLONING &amp; BRANCHING</strong></h1><h2 id="CLONE_A_REPO"><strong>CLONE A REPO</strong></h2><blockquote>
<p>The IT department installed an OS update on your workstation - and wiped the hard drive in the process. Clone the Pet Shop repo from <code>git@example.com:example/petshop.git</code> so you can resume work.</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git<span class="annotation">@example</span>.<span class="string">com:</span>example/petshop.git</span><br></pre></td></tr></table></figure>
<h2 id="LIST_REMOTES"><strong>LIST REMOTES</strong></h2><blockquote>
<p>Our repo is cloned locally, but how do we check to a list of our remotes? Lets get a list of all our remotes with a verbose output.</p>
</blockquote>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v /<span class="keyword">*</span>show remote repositories<span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<h2 id="CREATE_A_BRANCH"><strong>CREATE A BRANCH</strong></h2><blockquote>
<p>We need to add a section for the pet grooming salon on the site. You want to isolate this new feature from your other work. Create a new branch named <code>grooming</code>.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> branch grooming</span><br></pre></td></tr></table></figure>
<h2 id="SWITCH_TO_BRANCH"><strong>SWITCH TO BRANCH</strong></h2><blockquote>
<p>You’ve made the new branch, but your commits are still going to the old one. Switch to the <code>grooming</code> branch.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> checkout grooming</span><br></pre></td></tr></table></figure>
<h2 id="COMBINE_BRANCH"><strong>COMBINE BRANCH</strong></h2><blockquote>
<p>You’ve finished work on the <code>grooming</code> branch and are ready to bring your work back into <code>master</code>. First, check out the master branch…<br>Then,bring your changes from the grooming branch into the …master branch.</p>
</blockquote>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git <span class="keyword">merge</span> grooming</span><br><span class="line">git branch -<span class="keyword">d</span> grooming <span class="comment">/*delete the local branch*/</span></span><br></pre></td></tr></table></figure>
<h2 id="BRANCH_SHORTCUTS"><strong>BRANCH SHORTCUTS</strong></h2><blockquote>
<p>The pet shop wants to try selling yet another product line! Let’s do this one in a branch in case it gets cancelled like the others. Using a single command, create and check out an <code>octopus</code> branch.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="tag">b</span> octopus</span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="COLLABORATION_BASICS"><strong>COLLABORATION BASICS</strong></h1><h2 id="SEND_CHANGES"><strong>SEND CHANGES</strong></h2><blockquote>
<p>You’ve committed some work so now it’s time to share! Push it out for your co-workers to see.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">push</span></span><br></pre></td></tr></table></figure>
<h2 id="GET_CHANGES"><strong>GET CHANGES</strong></h2><blockquote>
<p>Looks like your co-worker pushed some changes before you did! Your push was rejected. Retrieve the latest changes, and merge them into your branch in one step.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> pull</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/1.pull.jpg" alt="1.pull"></p>
<h2 id="FIX_CONFLICTS"><strong>FIX CONFLICTS</strong></h2><blockquote>
<p>Git is reporting a conflict with your co-worker’s changes in “readme”. Just discard his changes, and keep your own (the HEAD).</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/2.jpg" alt="2"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/3.jpg" alt="3"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/4.jpg" alt="4"></p>
<p><br></p>
<h1 id="BRANCHING"><strong>BRANCHING</strong></h1><h2 id="PUSH_BRANCH"><strong>PUSH BRANCH</strong></h2><blockquote>
<p>A new kind of pet is for sale at the store! Maybe this one will catch on with the public. You’ve committed your work to the local <code>hamsters</code> branch; now publish this branch in the <code>origin</code> repo.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">push</span> origin hamsters</span><br></pre></td></tr></table></figure>
<p>Links locak branch to the remote branch(tracking)</p>
<h2 id="GET_REMOTE_BRANCH"><strong>GET REMOTE BRANCH</strong></h2><blockquote>
<p>“git branch -r” does not query the remotes to check for new branches. In order to see a new remote branch you first have to do a fetch or a pull. So retrieve the remote “weasel” branch.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> fetch</span><br></pre></td></tr></table></figure>
<p>Pull seems like a good choice, but pull will auto merge branches, you only want to update your local branch information, so use fetch instead</p>
<h2 id="REMOTE_BRANCHES"><strong>REMOTE BRANCHES</strong></h2><blockquote>
<p>Your co-worker said he wants you to look over a new branch on “origin”, but he didn’t tell you its name. Get a list of remote branches.</p>
</blockquote>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r /<span class="keyword">*</span>list all remote branches<span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<h2 id="DELETE_ON_REMOTE"><strong>DELETE ON REMOTE</strong></h2><blockquote>
<p>Guess how the product launch went with the weasels? Better delete the “weasel” branch on “origin”.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">push</span> origin :weasel</span><br></pre></td></tr></table></figure>
<p>Use git push to delete the <strong>remote branch</strong></p>
<h2 id="BRANCH_STATUS"><strong>BRANCH STATUS</strong></h2><blockquote>
<p>Wait, did you already pull that branch locally? Check for stale branches that are tracking “origin”.</p>
</blockquote>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin /* show the <span class="keyword">state</span> of your branches*/</span><br></pre></td></tr></table></figure>
<h2 id="CLEAN_BRANCHES"><strong>CLEAN BRANCHES</strong></h2><blockquote>
<p>You still have a stale local branch tracking the now-deleted <code>origin/weasel</code>. Clean up your local references.</p>
</blockquote>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote prune origin /<span class="keyword">*</span> remove deleted remote<span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<h2 id="LIST_TAGS"><strong>LIST TAGS</strong></h2><blockquote>
<p>With the weasel threat eliminated, the pet store wants to deploy the site. Let’s see, what was the previous version number? Display the tags to find out.Create a tag accordingly</p>
</blockquote>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">tag</span>  /*<span class="keyword">list</span> <span class="keyword">all</span> <span class="keyword">tags</span>*/</span><br></pre></td></tr></table></figure>
<h2 id="CREATE_TAG"><strong>CREATE TAG</strong></h2><blockquote>
<p>Ah, yes, the last release was “v1.3.1”. You’ve added the hamsters, so it would be best to release this as “v1.3.2”. Create a tag accordingly.</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -<span class="tag">a</span> v1.<span class="number">3.2</span> -m <span class="string">"version 0.03"</span>  <span class="comment">/*add a new tag*/</span></span><br></pre></td></tr></table></figure>
<h2 id="SEND_TAGS"><strong>SEND TAGS</strong></h2><blockquote>
<p>Push your tag to origin.</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push <span class="comment">--tags</span></span><br></pre></td></tr></table></figure>
<h2 id="RETRIEVE_TAG"><strong>RETRIEVE TAG</strong></h2><blockquote>
<p>The client is requesting that you roll back to the prior release. (Seriously? What could have gone wrong with the hamsters?) Retrieve the release tagged “v1.3.1”.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> checkout v1.<span class="number">3</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="REBASE_BELONG_TO_US"><strong>REBASE BELONG TO US</strong></h1><h2 id="REBASE"><strong>REBASE</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/7.jpg" alt="7"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/8.jpg" alt="8"></p>
<blockquote>
<p>You’ve made some commits to a feature branch, but you’ve also committed a hotfix on master that would make a merge messy. Check out the <code>kennel</code> branch so you can rebase it on <code>master</code>.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> checkout kennel</span><br></pre></td></tr></table></figure>
<blockquote>
<p>OK, you’re on the <code>kennel</code> branch. Our goal is to be able to merge <code>kennel</code> back into <code>master</code> without conflicts or a merge commit. Rebase the current <code>kennel</code> branch on <code>master</code>.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> rebase master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>With the rebase complete, <code>kennel</code> should merge with <code>master</code> cleanly. Switch branches back to <code>master</code>.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> checkout master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>We’re on master, and we know the <code>kennel</code> will merge cleanly. Go ahead and merge in the <code>kennel</code> branch.</p>
</blockquote>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">merge</span> kennel</span><br></pre></td></tr></table></figure>
<h2 id="REMOTE"><strong>REMOTE</strong></h2><blockquote>
<p>Your co-worker has pushed changes to the <code>master</code> branch on the <code>origin</code> repo. Retrieve it without merging it so we can replay our work on top of it.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> fetch</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/5.jpg" alt="5"></p>
<blockquote>
<p>Now that your local repo knows of the latest changes on origin/master, move your master commits after the commits from origin/master.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> rebase</span><br></pre></td></tr></table></figure>
<p>Use <code>git rebase</code> to apply your local commits ahead of those on origin/master.Current branch master is up to date. Success!<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/6.jpg" alt="6"></p>
<h2 id="CONFLICT"><strong>CONFLICT</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/9.jpg" alt="9"></p>
<blockquote>
<p>Your co-worker has pushed before you yet again. Better fetch the changes…</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> fetch</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Now run another rebase to move your commit after the latest fetched one.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> rebase</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Uh, oh! Looks like the rebase is in conflict this time! Edit <code>index.html</code> to fix the conflicting lines. We want to keep our version with <code>Cats</code> and <code>Dogs</code>.</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;Our Cat-alog&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD   &lt;!--删除 --&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href="cat.html"&gt;Cats&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href="dog.html"&gt;Dogs&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">======= &lt;!--删除 --&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href="cat.html"&gt;Felines&lt;/a&gt;&lt;/li&gt;   &lt;!--删除 --&gt;</span><br><span class="line">        &lt;li&gt;&lt;a href="dog.html"&gt;Canines&lt;/a&gt;&lt;/li&gt;   &lt;!--删除 --&gt;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; Add dogs.  &lt;!--删除 --&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Now mark the conflicts in “index.html” as resolved.</p>
</blockquote>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span> <span class="keyword">index</span>.html</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Now that all conflicts have been resolved and those files added, continue the current rebase in process.</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --<span class="keyword">continue</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="HISTORY_AND_CONFIGURATION"><strong>HISTORY AND CONFIGURATION</strong></h1><blockquote>
<p>1.All those e-mail addresses and SHAs are making it hard to see commit messages in your history. Try viewing the log with one commit per line.</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="command">log</span> <span class="comment">--pretty=oneline</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.The client called with an urgent question about chew toys, and now you can’t remember what you last modified. Bring up a summary of file changes.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> diff</span><br></pre></td></tr></table></figure>
<p>‘git log’ will show you your past commits, but it doesn’t show you any changes in files, that’s what ‘git diff’ is for.</p>
<blockquote>
<p>3.You’ve finished adding elephants to the catalog. You need to write up a change log for the client, and you want to ensure you don’t miss anything. Compare the <code>master</code> branch to your <code>elephant</code> branch to show what’s new.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> diff master elephant</span><br></pre></td></tr></table></figure>
<blockquote>
<p>4.You rebased your latest commit after a commit from your co-worker, but now the page is rendering strangely. To figure out why, get a diff that includes the previous commit, as well as its parent.</p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> diff HEAD~<span class="number">2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>5.Well, you see the changes, but you’re not sure what your co-worker was trying to accomplish. Display the diffs along with the log to determine what’s going on.</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="command">log</span> -p</span><br></pre></td></tr></table></figure>
<blockquote>
<p>6.Wait, what? You don’t understand these lines in <code>index.html</code>. You’d better find out who committed them, so you can ask them what they’re supposed to do.</p>
</blockquote>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame <span class="keyword">index</span>.html</span><br></pre></td></tr></table></figure>
<p>Use <code>git blame</code> to see the annotated source, so you can figure out who made all these changes</p>
<h2 id="EXCLUDING"><strong>EXCLUDING</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/10.jpg" alt="10"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/11.jpg" alt="11"></p>
<h2 id="REMOVING"><strong>REMOVING</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/12.jpg" alt="12"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/13.jpg" alt="13"></p>
<h2 id="CONFIG"><strong>CONFIG</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/14.jpg" alt="14"></p>
<h2 id="ALIASES"><strong>ALIASES</strong></h2><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/15.jpg" alt="15"><br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/git/16.jpg" alt="16"></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="STAGING_&amp;_REMOTES"><strong>STAGING &amp; REMOTES</strong></h1><h2 id="UNSTAGED_DIFFERENCES"><strong>UNSTAGED DIFFERENCES</strong></h2><blockquote>
<p>A new file has been added to the site. Run the command to see what all has changed since your last commit.</p>
</blockquote>
<p><code>git status</code> will list out which files have changed. If we want to see the actual changes:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> diff</span><br></pre></td></tr></table></figure></p>
<h2 id="STAGE_NEW_FILE"><strong>STAGE NEW FILE</strong></h2><blockquote>
<p>There it is: <code>ostrich.html</code>. Stage it to be committed.</p>
</blockquote>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span> ostrich.html</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[How to start a startup]]></title>
    <link href="http://yoursite.com/2014/10/31/How%20to%20start%20a%20startup/"/>
    <id>http://yoursite.com/2014/10/31/How to start a startup/</id>
    <published>2014-10-31T12:18:00.000Z</published>
    <updated>2015-03-17T07:26:28.000Z</updated>
    <content type="html"><![CDATA[<p>网易公开课：<a href="http://v.163.com/special/opencourse/startup.html" target="_blank" rel="external">如何创业</a> Stanford CS183B</p>
<p><strong>Outcome</strong> =<code>Idea</code> x <code>Product</code> x <code>Teams</code> x <code>Execution</code> x <code>Luck</code>(random # between 0 and 10,000)</p>
<p><strong>Four critical parts:</strong></p>
<h1 id="A_Great_Idea"><strong>A Great Idea</strong></h1><p>It includes the size and growth of the market,the growth strategy for company,the defensibility strategy and so on.</p>
<ul>
<li>Even though plans themselves are worthless,to exercise a planning is really valuable.</li>
<li>You need to build a business that is difficult to replicate.</li>
<li>Startup should feel like an important mission.</li>
<li>You want an idea that turns into a monopoly,but you can’t get monopoly in a big market right away.You have to find a small market in which you can get a monopoly, and then quickly expand.<a id="more"></a>
<img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/startup/1.jpg" alt=""></li>
<li>This is why the best ideas often look terrible at the beginning.</li>
<li>You need a market that’s going to be big in ten years.</li>
<li>More important than starting any particular startup is getting to know a lot of potential co-founders.</li>
<li>The importance of thinking about what customers want, and thinking about the demands of the market.<br><br></li>
</ul>
<h1 id="Building_a_Great_Product"><strong>Building a Great Product</strong></h1><p>Broad definition: It includes customer support and copyright explaining the product.Anything involved in your customers interaction with what you build for them. </p>
<ul>
<li>Great Ideas turn to great product. A great product is the secret to long term growth hacking.</li>
<li>Build something users love.Its better to build something that a small number of users love, than to build something that a large number of users like. </li>
<li>Start with something simple. Its much much easier to make a great product if you have something simple.</li>
<li>Talk to users. You need some users to help with the feedback cycle.The way to get those users is manually.You should go recruit them by hand. Don’t do things like buy google ads in the early days to get initial users.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/startup/2a.jpg" alt=""></p>
<ul>
<li>You should make this feedback loop as tight as possible.The best companies usually have the tightest feedback loops.</li>
</ul>
<p><br></p>
<h1 id="Team"><strong>Team</strong></h1><p>Cofounder relationships are among the most important in the entire company. The number one cause of early death for startups is cofounder blowups.</p>
<ul>
<li>It’s better to have no cofounder than to have a bad cofounder, but it’s still bad to be a solo founder. Two or three cofounders seems to be about perfect. </li>
<li>At the beginning, you should only hire when you desperately need to,because the cost of getting an early hire wrong is really high. </li>
<li>Do not hire mediocre people.Mediocre people at huge companies will cause some problems, but it won’t kill the company. A single mediocre hire within the first five will often in fact kill a startup.</li>
</ul>
<p><strong>There are three things I look for in a hire.</strong> </p>
<ul>
<li>Are they smart? </li>
<li>Do they get things done? </li>
<li>Do I want to spend a lot of time around them?</li>
</ul>
<p>You can learn a lot about all three of these things in an interview but the very best way is working together, so ideally someone you’ve worked together with in the past and in that case you probably don’t even need an interview. If you haven’t, then I think it’s way better to work with someone on a project for a day or two before hiring them. </p>
<p>For most of the early hires that you make at a startup, experience probably doesn’t matter that much and you should go for aptitude and belief in what you’re doing. </p>
<ul>
<li>good communication skills tend to correlate with hires that work out.</li>
<li>Good communication skills</li>
<li>Manically determined</li>
<li>Pass the animal test</li>
<li>Would feel comfortable reporting to them</li>
</ul>
<p><strong>You’ve hired the best - now keep them around!</strong><br>You have to make sure your employees are happy and feel valued.</p>
<blockquote>
<p>Dan Pink talks about these three things that motivate people to do great work:<br> autonomy, mastery, and purpose.</p>
</blockquote>
<p>Firing people fast when it’s not working.<br><br></p>
<h1 id="Execution"><strong>Execution</strong></h1><p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/startup/3.jpg" alt=""></p>
<p>Execution gets divided into two key questions. </p>
<ul>
<li>Can you figure out what to do ?</li>
<li>Can you get it done?<br><br>    <em>1.Focus</em><ul>
<li>what are you spending time and money on?</li>
<li>what are the two or three most important things?</li>
</ul>
</li>
</ul>
<p>One of the hardest parts about being a founder is that there are a hundred important things competing for your attention every day. And you have to identify the right two or three, work on those, and then ignore, delegate, or defer the rest.You only get points when you make something the market wants. So if you work really hard on the wrong things, no one will care.</p>
<p><em>2.intense</em> </p>
<ul>
<li>Startups only work at a fairly intense level. </li>
<li>The secret to start up success is extreme focus and extreme dedication. </li>
<li>Startups are not the best choice for work life balance and that’s sort of just the sad reality.<br>The good news here is that a small amount of extra work on the right thing makes a huge difference. One example that I like to give is thinking about the viral coefficient for a consumer web product. How many new users each existing user brings in. If it’s .99 the company will eventually flatline and die. And if it’s 1.01 you’ll be in this happy place of exponential growth forever.<br>  <img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/startup/4.jpg" alt=""><br>  So this is one concrete example of where a tiny extra bit of work is the difference between success and failure. </li>
</ul>
<p><br><br><strong>The momentum and growth are the lifeblood of startups.</strong></p>
<blockquote>
<p>A good way to keep momentum is to establish an operating rhythm at the company early. Where you ship product and launch new features on a regular basis. Where you’re reviewing metrics every week with the entire company. </p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/startup/5.jpg" alt=""></p>
<p>Don’t worry about a competitor at all, until they’re actually beating you with a real, shipped product. Press releases are easier to write than code, and that is still easier than making a great product. So remind your company of this, and this is sort of a founder’s role, is not to let the company get down because of the competitors in the press.</p>
<p><br><br><br><br><br><br><br><br><code>To be continued</code></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>网易公开课：<a href="http://v.163.com/special/opencourse/startup.html">如何创业</a> Stanford CS183B</p>
<p><strong>Outcome</strong> =<code>Idea</code> x <code>Product</code> x <code>Teams</code> x <code>Execution</code> x <code>Luck</code>(random # between 0 and 10,000)</p>
<p><strong>Four critical parts:</strong></p>
<h1 id="A_Great_Idea"><strong>A Great Idea</strong></h1><p>It includes the size and growth of the market,the growth strategy for company,the defensibility strategy and so on.</p>
<ul>
<li>Even though plans themselves are worthless,to exercise a planning is really valuable.</li>
<li>You need to build a business that is difficult to replicate.</li>
<li>Startup should feel like an important mission.</li>
<li>You want an idea that turns into a monopoly,but you can’t get monopoly in a big market right away.You have to find a small market in which you can get a monopoly, and then quickly expand.]]>
    
    </summary>
    
      <category term="Open Courses" scheme="http://yoursite.com/tags/Open-Courses/"/>
    
      <category term="创业" scheme="http://yoursite.com/tags/%E5%88%9B%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Learning how to learn]]></title>
    <link href="http://yoursite.com/2014/10/28/Learning%20how%20to%20learn/"/>
    <id>http://yoursite.com/2014/10/28/Learning how to learn/</id>
    <published>2014-10-28T22:18:00.000Z</published>
    <updated>2015-03-23T10:52:25.000Z</updated>
    <content type="html"><![CDATA[<p>cousera课:<a href="https://class.coursera.org/learning-002" target="_blank" rel="external">learning how to learn</a>笔记</p>
<h1 id="Focused_versus_Diffuse_Thinking"><strong>Focused versus Diffuse Thinking</strong></h1><h2 id="专注模式和发散模式"><strong>专注模式和发散模式</strong></h2><p>我们人类有两种最基本的思考模式：</p>
<ul>
<li>专注模式(focused)： 解决简单的 熟悉的问题时，很快就能找到熟悉的思路，将问题一一拆分，并逐步解决。</li>
<li>发散模式(diffuse)：解决一些从未接触过的想法，概念时，不知道怎样开始解决，不知道正确的方向，所以思绪天马行空，是发散的，直到碰到一个障碍又折回来继续思考，直到解决问题。在这种思维模式下，你的思维更广阔，全面。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/1.jpg" alt="思考模式"><br><a id="more"></a><br>这两种思考模式就像硬币的两个面，人类不能同时使用两种思考模式。以现代神经学的知识，我们不能同时处在集中模式和发散模式下进行思考，就像一枚硬币不能同时正面和反面朝上一样。但这并不意味着我们不能同时交替使用他们来解决问题，当学习新的比较难懂的东西时，思维需要在两种完全不同的模式中转换，这能帮助我们更有效地学习。</p>
<p>Eg： Dali and Edison，他们放松自己让思绪漫游，考虑他们之前专注的内容，一旦要睡着，钥匙 or钢球将他们惊醒，然后带着在发散模式下得到的灵感，转而进入专注模式，将这些灵感变成现实。当然这些需要每天的练习。</p>
<p>要想有强健的体魄，需要每天运动，让肌肉增长；同样地，想建立神经结构，也需要每天练习，这是关键。</p>
<h2 id="拖延症"><strong>拖延症</strong></h2><ul>
<li>拖延症的产生：当你不想去做一件事的时候，大脑中相关区域的痛苦会被激发出来，为了避免这种痛苦，大脑将注意力转向其他地方。结果是，你只是感到暂时的愉悦，但是事情被拖延了。</li>
<li>如何克服拖延症： <strong>立即去做</strong>！！研究发现，当人们开始做不喜欢的事不久，大脑中痛苦的感觉就消失了！</li>
</ul>
<h2 id="熟能生巧"><strong>熟能生巧</strong></h2><p>当我们学习一些具体事物的时候，只要将它和现实中的事物进行“链接”，我们就能掌握这个知识。但如果我们要学习的内容是抽象的数学概念和情感感觉或者其他事物的时候，由于现实生活中没有这种具体或者类比事物，我们很难对其进行学习和掌握。因此在学习这类概念的时候，我们需要人为地创建“思维模式”（PATTERN），并通过练习，不断增强这种思维模式。<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/2.jpg" alt=""></p>
<p>在理解一些抽象概念时，在思考过程中创建的思维模式是具体而真实的，都是从起点开始一个神经元通过轴突、突触、树突传递到另一个神经元。当你不断地运用某一种思维模式的时候，他在你的脑海中就不断地根深蒂固（颜色越来越深）。</p>
<p>第一次形成的思考模式是用“发散模式”发现问题解决路径之后，大脑将切换到“集中模式”，并记录该模式，在之后解决同样问题的时候，便直接调用这个模式，从而其在大脑中的路径颜色就越来越深，越来越牢固</p>
<h2 id="关于记忆"><strong>关于记忆</strong></h2><p>记忆分为工作记忆和长期记忆。</p>
<ul>
<li>工作记忆：与要立即处理的问题相关的记忆，位于大脑前额皮质层（prefrontal cortex），现在广泛认为工作记忆能记住4个信息块。工作记忆就像一块黑板，并不是很好用，为了将要记忆的东西储存到工作记忆中，需要经常重复。当我们集中精力记忆一些东西时，会闭上眼睛，避免再摄入其他的新信息进入工作性记忆中，所以短期性记忆的效果很差。</li>
<li>长期记忆：类似于仓库，有巨大的存储空间，但需要多次练习才能在众多信息中找到你想要的信息。不同的长期记忆储存在大脑的不同区域。研究发现，当第一次将工作记忆转化成长期记忆储存时，需要不断重复这个过程几次，这样能提高日后在你需要的时候找到他的几率。要将记忆转化为长期记忆，用间隔时间重复练习效果更好（类似艾宾浩斯曲线）。</li>
</ul>
<h2 id="睡眠的重要性"><strong>睡眠的重要性</strong></h2><p>在醒着的时候，大脑会产生有害物质（toxic），当睡着的时候，脑细胞与脑细胞之间的间距增大，通过脑中的液体将有害物质从脑细胞的间隙冲走，从而清理掉有害物质。所以睡眠不足意味着你的大脑毒素没有清理干净，毒素会导致你不能清晰地思考。长期睡眠不足还会导致头痛、抑郁、心脏病。糖尿病等。</p>
<p>在睡觉的时候：</p>
<ul>
<li>大脑将你正在学习和思考的一些内容和概念更紧密地结合在一起。</li>
<li>将记忆中不太重要的部分抹去，同时将你想要记住的部分进行强化。</li>
<li>大脑会反复练习学习内容中比较难的部分，这样新的神经元模式会不断加深和强化</li>
<li>增强理解和解决复杂问题的能力。睡觉时，大脑前额皮质层的意识钝化，这使得大脑的其他部分更容易交流，从而将正在学习的内容进行有序的整合，以利于理解和记忆。</li>
</ul>
<p><strong>所以在睡前复习今天所学的知识，能在睡梦中更好地理解和强化这些内容。</strong><br><br></p>
<h1 id="Chunking"><strong>Chunking</strong></h1><h2 id="What_is_a_chunk?"><strong>What is a chunk?</strong></h2><ul>
<li>Chunking is the mental leap that helps you unite bits of information together through meaning.</li>
<li>A chunk means a network of neurons that are used to firing together so you can think a thought or perform an action smoothly and effectively.</li>
</ul>
<p>When you’re focusing your attention on something it’s almost as if you have an octopus.<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/3.jpg" alt="octopus"><br>The octopus of attention that slips it’s tentacles through those four slots of working memory when necessary to help you make connections to information that you might have in various parts of your brain.</p>
<h2 id="How_to_form_a_chunk?"><strong>How to form a chunk?</strong></h2><p>Chunks are best built with focused, undivided attention, understanding of the basic idea.</p>
<blockquote>
<ol>
<li>The first step on chunking is simply to focus your undivided attention on the information you want to chunk.</li>
<li>The second step in chunking is to understand the basic idea you’re trying to chunk, whether it’s understanding a concept. Understanding is like a superglue that helps hold the underlying memory traces together. It creates broad encompassing traces that can link to other memory traces.</li>
<li>The third step to chunking is gaining context, so you can see not just how, but also when to use this chunk. Context means going beyond the initial problem and seeing more broadly, repeating and practicing with both related and unrelated problems, so that you can see not only when to use the chunk, but when not to use it. This helps you see how your newly formed chunk fits into the bigger picture.</li>
</ol>
</blockquote>
<hr>
<ul>
<li>Focused practice and repetition, the creation of strong memory traces, helps you to create chunks.</li>
<li>Doing a rapid two-minute picture walk through a chapter in a book before you begin studying it, glancing at pictures and section headings, can allow you to gain a sense of the big picture.</li>
<li>Simple recall, trying to remember the key points without looking at the page, is one of the best ways to help the chunking process along, rather than passive rereading, will make your study time more focused and effective.</li>
<li>Test yourself frequently. Mistakes are a good thing to make when you’re learning.</li>
<li>Try to avoid depending too much on highlighting, which can fool you into thinking that the material is going into your brain when it actually isn’t.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/4.jpg" alt=""></p>
<p><strong>When you’re trying to figure something out, if you have a good library of these chunks, you can more easily skip to the right solution by metaphorically speaking, listening to whispers from your diffuse mode. Your diffuse mode can help you connect two or more chunks together in new ways to solve novel problems.</strong><br><br></p>
<h2 id="如何阅读"><strong>如何阅读</strong></h2><p>最有效的办法是读完一遍后马上再读一遍，共两遍。</p>
<ul>
<li>第一遍是正常通读，不要追求快，需要时不时停下来思考。</li>
<li>读第二遍时同时写下<strong>读书笔记</strong>，书中作为例子的故事可以跳过。要专注于思想脉络。读一章，记一章笔记，直至读完。回顾笔记，整理思路。<blockquote>
<p>①清晰地表现每一章的逻辑脉络。<br>②带走书中所有的亮点（小故事、想法等）。<br>③有大量的自己的看法和心得。<br>④发现这本书和你脑中知识的联系。</p>
</blockquote>
</li>
</ul>
<p><strong>总结：</strong></p>
<ol>
<li>只在“<code>学习区</code>”练习；<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/5.jpg" alt=""></li>
<li>把要训练的内容分成有针对性的<code>小块</code>, 对每一个小块进行<code>重复练习</code>；</li>
<li>在整个练习过程中， 随时能获得有效的<code>反馈</code>；</li>
<li>练习时注意力必须<code>高度集中</code>。<br><br><br><br><br><code>To be continued</code></li>
</ol>
<p>Reference:</p>
<ol>
<li>MOOC学院  <a href="http://mooc.guokr.com/course/1484/Learning-How-to-Learn--Powerful-mental-tools-to-help-you-master-tough-subjects/note/" target="_blank" rel="external">learning how to learn 笔记</a></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>cousera课:<a href="https://class.coursera.org/learning-002">learning how to learn</a>笔记</p>
<h1 id="Focused_versus_Diffuse_Thinking"><strong>Focused versus Diffuse Thinking</strong></h1><h2 id="专注模式和发散模式"><strong>专注模式和发散模式</strong></h2><p>我们人类有两种最基本的思考模式：</p>
<ul>
<li>专注模式(focused)： 解决简单的 熟悉的问题时，很快就能找到熟悉的思路，将问题一一拆分，并逐步解决。</li>
<li>发散模式(diffuse)：解决一些从未接触过的想法，概念时，不知道怎样开始解决，不知道正确的方向，所以思绪天马行空，是发散的，直到碰到一个障碍又折回来继续思考，直到解决问题。在这种思维模式下，你的思维更广阔，全面。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Learning%20How%20to%20Learn/1.jpg" alt="思考模式"><br>]]>
    
    </summary>
    
      <category term="Open Courses" scheme="http://yoursite.com/tags/Open-Courses/"/>
    
      <category term="思维" scheme="http://yoursite.com/tags/%E6%80%9D%E7%BB%B4/"/>
    
      <category term="记忆力" scheme="http://yoursite.com/tags/%E8%AE%B0%E5%BF%86%E5%8A%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Managing Money]]></title>
    <link href="http://yoursite.com/2014/10/27/Managing%20Money/"/>
    <id>http://yoursite.com/2014/10/27/Managing Money/</id>
    <published>2014-10-27T12:18:00.000Z</published>
    <updated>2015-03-17T07:28:12.000Z</updated>
    <content type="html"><![CDATA[<p>今天在cousera上看到这门课<a href="https://www.coursera.org/course/managingmoney" target="_blank" rel="external">Managing Your Time, Money, and Career: MBA Insights for Undergraduates</a><br>走向社会后，如何理财是一门学问。感觉这门课不难，但是挺实用的。顺便还可以学习下英语，练习下听力。以下是笔记。</p>
<h1 id="What’s_In_Your_Budget?"><strong>What’s In Your Budget?</strong></h1><h2 id="Theme_of_this_class:"><strong>Theme of this class:</strong></h2><ul>
<li>Having a smart budget plan can prepare us for unexpected emergency</li>
<li>Planning for emergency is as important as planning for investment</li>
<li>Diversify income source is the key way to make a good budget plan<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Managing%20time,money%20and%20career/1.managing%20money.jpg" alt="managing money"><a id="more"></a>
<br></li>
</ul>
<h2 id="How_to_create_a_budget:"><strong>How to create a budget:</strong></h2><ul>
<li>The basic model to start building a budget:<br>  -Money in<br>  -Money out</li>
<li>Between the two we have discretionary funds:<br>  -Cash<br>  -Savings<br>  -Investments</li>
</ul>
<p>A budget plan would look like this:<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Managing%20time,money%20and%20career/2.money%20flow.jpg" alt="money flow"><br>Discretionary fund is the extra money you have, after paying all your expense. You can spend all of it for current fun, or you can save it/ invest for future.<br><br></p>
<h2 id="How_to_start_a_budget_plan:"><strong>How to start a budget plan:</strong></h2><ul>
<li>First step:Creating a saving account in your local bank, it can be the cash reserves for emergency, or funds for buying a house, etc. It earns more interests than checking account.</li>
<li>College might have credit union, which charges lower fees and have higher interest rates.Also, not every bank is the same; some might have higher fees, fewer transaction times, and other different policies.</li>
</ul>
<p><br></p>
<p>Some other key points in managing budgeting and spending your money:</p>
<ul>
<li>Money are meant to be spend-wisely. How you spend it will determine whether your wealth will increase or shrink.</li>
<li>Fixed expenses are the point to start counting, but they can also be adjusted. E.g. you can choose which kind of house you want to live in, and therefore how much rent you will pay.</li>
<li>You can use spreadsheet to plan budget, and there are also tools online.</li>
<li>The more important work is not creating a budget, but sticking to it.<br><br><h1 id="To_Credit_or_Debit_Card?"><strong>To Credit or Debit Card?</strong></h1><h2 id="Theme:"><strong>Theme:</strong></h2></li>
<li>Differences between credit card and debit card</li>
<li>The benefits and risk of credit card</li>
</ul>
<h2 id="Debit_card:"><strong>Debit card:</strong></h2><ul>
<li>Draws directly from your account</li>
<li>No monthly bill to pay</li>
<li>Account “debited”</li>
<li>Transactions easy to track</li>
<li>Online features to monitor account</li>
</ul>
<p>You put money inside the bank first, and only spend what you already have. Therefore the account is “debited”.</p>
<p>With debit card, you don’t have to bring so much cash every day.Also, debit card is convenient for tracking, because you can only spend what you have. Therefore, it’s easier for budgeting because you would never overspend.</p>
<h2 id="Credit_Card:"><strong>Credit Card:</strong></h2><ul>
<li>Bank temporarily lends you the money.</li>
<li>You pay balance end of month</li>
<li>If you can’t pay all,you pay interest!</li>
<li>Rate = “APR”:annual percentage rate</li>
<li>APR = combined interest &amp; fees over 1 year</li>
</ul>
<p>You spend money first, which creates a debt, and you pay the bank back later. Therefore you “credit” is important.</p>
<p>Credit institution will record your “credit score”: whether you had pay back on time, and how much you could probably afford each time.</p>
<p>With higher credit score, you would pay less interest and your APR might be low. Bank would evaluate lending money to you as a lower risk.</p>
<h2 id="Different_type_of_credit_cards:"><strong>Different type of credit cards:</strong></h2><p>There are two types of credit card: </p>
<ul>
<li>Unsecured cards are often offered by banks. You do not need to provide collateral.</li>
<li>Secured cards require collateral for people with poor credit history. Collateral could be cars, boats, etc. If you fail to pay your bill, you might lose your collateral.</li>
</ul>
<h2 id="Reward_Cards:"><strong>Reward Cards:</strong></h2><p>Some credit cards are reward cards, which are always only given to people with good credit history. You can get points for the money you spent, and rewards include cash back, gas savings,travel rewards, etc.</p>
<p>But reward cards often come with additional fees. Pay your balance quickly could help.</p>
<h2 id="Key_Points:"><strong>Key Points:</strong></h2><ul>
<li>Debit cards great for small expenditures,not emergencies or large stuff.</li>
<li>Credit Cards good for large purchases:can spread the cost out.</li>
</ul>
<p><br><br><br><br><br><br><br><br><code>To be continued</code></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>今天在cousera上看到这门课<a href="https://www.coursera.org/course/managingmoney">Managing Your Time, Money, and Career: MBA Insights for Undergraduates</a><br>走向社会后，如何理财是一门学问。感觉这门课不难，但是挺实用的。顺便还可以学习下英语，练习下听力。以下是笔记。</p>
<h1 id="What’s_In_Your_Budget?"><strong>What’s In Your Budget?</strong></h1><h2 id="Theme_of_this_class:"><strong>Theme of this class:</strong></h2><ul>
<li>Having a smart budget plan can prepare us for unexpected emergency</li>
<li>Planning for emergency is as important as planning for investment</li>
<li>Diversify income source is the key way to make a good budget plan<br><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/image/Managing%20time,money%20and%20career/1.managing%20money.jpg" alt="managing money">]]>
    
    </summary>
    
      <category term="Open Courses" scheme="http://yoursite.com/tags/Open-Courses/"/>
    
      <category term="理财" scheme="http://yoursite.com/tags/%E7%90%86%E8%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用hexo搭建博客]]></title>
    <link href="http://yoursite.com/2014/10/26/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2014/10/26/使用hexo搭建博客/</id>
    <published>2014-10-26T19:19:00.000Z</published>
    <updated>2015-04-28T00:23:54.000Z</updated>
    <content type="html"><![CDATA[<p>——————————————2015.03.16 更新—————————————————</p>
<p>最近出了3.0新版本，目前有些插件和主题并不兼容。所以暂时不更新，继续用2.8.3版本。若要更新可参考<a href="https://github.com/hexojs/hexo/wiki/Migrating-from-2.x-to-3.0" target="_blank" rel="external">Migrating from 2.x to 3.0</a></p>
<p>——————————————2015.04.26 更新—————————————————</p>
<p>更新博客托管一份至GitCafe上。因为要用到新的插件，首先删除/usr/local/bin/hexo,按照上面文档升级hexo3.0。</p>
<hr>
<h1 id="Hexo安装"><strong>Hexo安装</strong></h1><p>Hexo的作者是<a href="https://twitter.com/tommy351" target="_blank" rel="external">tommy351</a>，根据官方介绍，Hexo是一个简单、快速、强大的博客发布工具，支持Markdown格式。Hexo是一个基于Node.js的静态博客程序，其编译上百篇文字只需要几秒。hexo生成的静态网页可以直接放到GitHub Pages，BAE，SAE等平台上。<br>参考<a href="http://hexo.io/docs/index.html" target="_blank" rel="external">官方文档</a></p>
<h2 id="安装Node-js"><strong>安装Node.js</strong></h2><p>在 Windows 环境下安装 Node.js非常简单，仅须<a href="http://nodejs.org/" target="_blank" rel="external">下载</a>安装文件并执行即可完成安装。</p>
<h2 id="安装Hexo"><strong>安装Hexo</strong></h2><p>打开git。利用 <code>npm</code> 命令即可安装。<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g hexo</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="创建hexo文件夹"><strong>创建hexo文件夹</strong></h2><p>安装完成后，在你喜爱的文件夹下（如H:\hexo），执行以下指令(在H:\hexo内点击鼠标右键，选择Git bash)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">hexo</span> init</span><br></pre></td></tr></table></figure></p>
<h2 id="安装依赖包"><strong>安装依赖包</strong></h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<p>本地查看</p>
<p>现在我们已经搭建起本地的hexo博客了，执行以下命令(在H:\hexo)，然后到浏览器输入localhost:4000看看。<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate <span class="preprocessor">#生成静态页面至public目录</span></span><br><span class="line">hexo <span class="keyword">server</span> <span class="preprocessor">#开启预览访问端口（默认端口4000，'ctrl + c'关闭server）</span></span><br></pre></td></tr></table></figure></p>
<p>出现了默认的网页界面。至此，本地博客已经搭建起来了。<br><br></p>
<h1 id="Hexo的使用"><strong>Hexo的使用</strong></h1><p>首先大致了解下默认生成了一些文件。</p>
<ul>
<li><code>scaffolds</code>   layout模板文件目录，其中的md文件可以添加编辑</li>
<li><code>scripts</code> 写文件的js，扩展hexo的功能</li>
<li><code>source/_posts</code> 存放博客正文内容</li>
<li><code>node_modules</code> 插件的目录</li>
<li><code>themes</code> 存放皮肤的目录</li>
<li><code>themes/landscape</code> 默认的主题</li>
<li><code>_config.yml</code> 全局的配置文件，大多数的设置都在这里</li>
<li><code>db.json</code> 静态常量</li>
</ul>
<p>_posts目录：Hexo是一个静态博客框架，因此没有数据库。文章内容都是以文本文件方式进行存储的，直接存储在_posts的目录。Hexo天生集成了markdown，我们可以直接使用markdown语法格式写博客，例如:hello-world.md。新增加一篇文章，就在_posts目录，新建一个xxx.md的文件。</p>
<p>themes目录：是存放主题的，包括一套Javascript+CSS样式和基于EJS的模板设置。通过在themes目录下，新建一个子目录，就可以创建一套新的皮肤，当然我们也可以直接在landscape上面修改。</p>
<h2 id="安装插件和主题"><strong>安装插件和主题</strong></h2><p>Hexo提供丰富<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">主题</a>的以及<a href="https://github.com/hexojs/hexo/wiki/Plugins" target="_blank" rel="external">插件</a>。安装方法都是一样的。</p>
<ul>
<li>主题</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone <span class="tag">&lt;<span class="title">repository</span>&gt;</span> themes/<span class="tag">&lt;<span class="title">theme-name</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>无论是插件还是主题在安装后都需要在根目录下_config.yml中修改plugins和theme的值以启用他们。<br>主题目录里也有个_config.yml文件，不同主题配置方法不同。<br>我的博客左边一栏里的社交链接。图标来源设置在main.style里。<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">├── layout <span class="preprocessor">#布局，根目录下的*.ejs文件是对主页，分页，存档等的控制</span></span><br><span class="line"><span class="string">|   ├── _partial   #局部的布局，此目录下的*.ejs是对头尾等局部的控制</span></span><br><span class="line"><span class="string">|   </span></span><br><span class="line">├── source <span class="preprocessor">#源码</span></span><br><span class="line"><span class="string">|   ├── css#css源码 </span></span><br><span class="line"><span class="string">|   |   ├── _base  #*.styl基础css</span></span><br><span class="line"><span class="string">|   |   ├── _partial   #*.styl局部css</span></span><br><span class="line"><span class="string">|   |   ├── fonts  #字体</span></span><br><span class="line"><span class="string">|   |   ├── style.styl #*.styl引入需要的css源码</span></span><br><span class="line"><span class="string">|   ├── images #图片fancybox   </span></span><br><span class="line"><span class="string">|   |—— fancybox效果源码</span></span><br><span class="line"><span class="string">|   └── js #javascript源代码</span></span><br><span class="line">├── _config.yml<span class="preprocessor">#主题配置文件</span></span><br><span class="line">└── README.md  <span class="preprocessor">#用GitHub的都知道</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>插件</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> &lt;<span class="keyword">plugin</span>-name&gt; <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure>
<p>启用插件：在根目录\ _config.yml文件添加：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line">- &lt;plugin-<span class="property">name</span>&gt;  <span class="comment">#插件名</span></span><br></pre></td></tr></table></figure></p>
<p>升级插件：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> update</span><br></pre></td></tr></table></figure></p>
<p>卸载插件：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">uninstall</span> &lt;<span class="keyword">plugin</span>-name&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="添加RSS"><strong>添加RSS</strong></h3><p>hexo提供了RSS的生成插件，需要手动安装和设置。步骤如下：<br>安装RSS插件到本地：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-feed</span><br></pre></td></tr></table></figure></p>
<p>开启RSS功能：编辑hexo/_config.yml，添加如下代码：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line"><span class="bullet">- </span>hexo-generator-feed</span><br></pre></td></tr></table></figure></p>
<p>在站点添加链接：<br>在themes/light/_config.yml中，编辑 rss: /atom.xml</p>
<h3 id="添加sitemap"><strong>添加sitemap</strong></h3><p>同样的，我们使用hexo提供的插件，方法与添加RSS类似。<br>安装sitemap到本地：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-sitemap</span><br></pre></td></tr></table></figure></p>
<p>开启sitemap功能：编辑<code>hexo/_config.yml</code>，添加如下代码：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line"><span class="bullet">- </span>hexo-generator-sitemap</span><br></pre></td></tr></table></figure></p>
<h3 id="添加Google_Analytics"><strong>添加Google Analytics</strong></h3><ol>
<li>注册<a href="http://www.google.com/analytics/" target="_blank" rel="external">Google Analytics账号</a>。</li>
<li>添加自己的网站域名。</li>
<li>把JS代码Copy到Hexo的\themes\yilia\layout_partial\after_footer文件中。</li>
<li>保存文件，重新生成、部署Hexo。数据统计不会立即生效，需要等待几个小时。</li>
</ol>
<p>在mac平台上，可以使用<a href="https://itunes.apple.com/cn/app/gaget-simple-widget-for-google/id968487158?l=en&amp;mt=12" target="_blank" rel="external">GAget</a>方便查看。<br><br></p>
<h1 id="部署到github上"><strong>部署到github上</strong></h1><p>部署到Github前需要配置<code>_config.yml</code>文件。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: github</span><br><span class="line">  <span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:thddaniel/thddaniel.github.io.git</span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure></p>
<p>执行下列指令即可完成部署。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">hexo</span> clean</span><br><span class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">hexo deploy  <span class="comment">#将.deploy目录部署到GitHub</span></span><br></pre></td></tr></table></figure></p>
<p>每次修改本地文件后，需要<code>hexo generate</code>才能保存。<br>有的时候当你修改页面或更改配置后发现并没有立即生效，可以执行<code>hexo clean</code>，通常直接执行<code>hexo g &amp;&amp; hexo d</code>。</p>
<p>Github的版本库通常建议同时附上README.md说明文件，但是hexo默认情况下会把所有md文件解析成html文件，所以即使你在线生成了README.md，它也会在你下一次部署时被删去。怎么解决呢？</p>
<p>在执行hexo deploy前把在本地写好的README.md文件复制到.deploy文件夹中，再去执行hexo deploy。<br>注：之前修改过branch: gh-pages，但是一直显示404.不填默认为master<br><br></p>
<h1 id="部署到gitCafe上"><strong>部署到gitCafe上</strong></h1><p>目前baidu无法扒取github的数据了，托管在github的朋友们会碰到抓取失败的问题。现在采取把博客同步到github和gitcafe的方案，通过DNSPod自定义线路类型，使电信的走电信的，网通的走网通的，国内的走Gitcafe，国外的走Github,速度大增。首先注册<a href="https://gitcafe.com/signup" target="_blank" rel="external">gitcafe</a>。必须注意git全局变量中的user.name与user.email在两个网站的注册信息中必须都是一样的。</p>
<p>因为使用github已经有了一套公秘钥，我希望能够在 GitCafe 上使用另一套独立的公秘钥，使得多套公秘钥可以同时存在与工作。</p>
<p>1.生成新的 SSH 秘钥</p>
<p>假设已经有了一套名为 id_rsa 的公秘钥，将要生成的公秘钥名称为 gitcafe，也可以使用任何你喜欢的名字。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"thddaniel92@gmail.com"</span> <span class="operator">-f</span> ~/.ssh/gitcafe</span><br></pre></td></tr></table></figure></p>
<p>生成过程中会出现一些信息，按屏幕提示操作，并记得输入 passphrase 口令。</p>
<p>这将在 ~/.ssh/ 目录下生成 <code>gitcafe</code> 和 <code>gitcafe.pub</code> 文件，记住千万不要把私钥文件 <code>gitcafe</code> 透露给任何人。</p>
<p>2.在 SSH 用户配置文件 ~/.ssh/config 中指定对应服务所使用的公秘钥名称，如果没有 config 文件的话就新建一个，并输入以下内容：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Host gitcafe<span class="class">.com</span> www<span class="class">.gitcafe</span><span class="class">.com</span></span><br><span class="line">  IdentityFile ~/.ssh/gitcafe</span><br></pre></td></tr></table></figure></p>
<p>3.进入 GitCafe —&gt;账户设置—&gt;SSH 公钥管理设置项，点击添加新公钥 按钮，在 Title 文本框中输入任意字符，在 Key 文本框粘贴刚才复制的公钥字符串<code>gitcafe.pub</code>，按保存按钮完成操作。</p>
<p>4.最后测试配置文件是否正常工作<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ssh</span> -T git<span class="variable">@gitcafe</span>.com</span><br></pre></td></tr></table></figure></p>
<p>如果是第一次连接的话，会出现警告，请检查一下显示的指纹是否一致：84:9e:c9:8e:7f:36:28:08:7e:13:bf:43:12:74:11:4e。输入 yes 按回车就可以了。</p>
<p>5.创建公开项目。如果你创建的项目名与用户名相同，GitCafe会自动识别成这是一个Page项目。</p>
<ul>
<li><p>进入你的hexo博客目录下面的’.deploy’目录，创建gitcafe-pages分支，并切换到该分支</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="tag">b</span> gitcafe-pages</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加到gitcafe的远程仓库</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> remote add origin <span class="string">'git<span class="variable">@gitcafe</span>.com:tanghao/tanghao.git'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>push到gitcafe仓库</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">push</span> -u origin gitcafe-pages</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在完成上述操作后，即可访问 tanghao.gitcafe.io ,来查看页面效果了！</p>
<p>6.要使Hexo支持同时发布到多个git仓库中。 </p>
<p>先安装 <a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="external">hexo-deployer-git</a>,支持hexo 3.0版本。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure></p>
<p>需要修hexo根目录下的改_config.yml，原来的配置:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">deploy:</span></span><br><span class="line"><span class="string">type:</span> github</span><br><span class="line"><span class="string">repo:</span> <span class="string">github:</span> <span class="string">https:</span><span class="comment">//github.com/&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line"><span class="string">branch:</span> master</span><br></pre></td></tr></table></figure></p>
<p>现在改成<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">   <span class="attribute">type</span>: git</span><br><span class="line">   <span class="attribute">repo</span>: </span><br><span class="line">      <span class="attribute">github</span>: <span class="attribute">https</span>:<span class="comment">//github.com/thddaniel/thddaniel.github.io,master</span></span><br><span class="line">      <span class="attribute">gitcafe</span>: <span class="attribute">https</span>:<span class="comment">//gitcafe.com/tanghao/tanghao.git,gitcafe-pages</span></span><br></pre></td></tr></table></figure></p>
<p>7.写个复合命令别名添加到<code>~/.bash_profile</code></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias upblog='<span class="keyword">cd</span> ~/Documents/hexo/ &amp;&amp; hexo <span class="keyword">g</span> &amp;&amp; hexo <span class="keyword">d</span>'</span><br></pre></td></tr></table></figure>
<p>输入命令<code>source .bash_profile</code>即可使用<code>upblog</code>命令。  </p>
<p>note:</p>
<p>In OSX the terminal you get is a login session so reads <code>.bash_profile</code> etc.</p>
<p>On other Unices xterm runs a non login shell by default so they read <code>.bashrc</code>.</p>
<p>8.绑定域名。</p>
<p>Gitcafe则可以绑定多个域名，在博客项目页面下项目管理-&gt;Pages服务-&gt;添加自定义域名添加自己的域名。</p>
<p>我使用<a href="https://www.namecheap.com/" target="_blank" rel="external">namecheap</a>管理域名。在<code>All Host Records</code>添加URL指向。</p>
<p>9.Dnspod做定向DNS解析</p>
<p>在<a href="https://www.dnspod.com" target="_blank" rel="external">Dnspod国际版</a>中选择自己的域名，添加两条A记录，国内路线使用GitCafe（A地址：207.226.141.135 CName:gitcafe.io）国外走Github线路（A地址192.30.252.153及192.30.252.154）</p>
<h1 id="写文章"><strong>写文章</strong></h1><p>markdown语法参考<a href="http://tanghaoblog.me/2014/10/26/Markdown笔记/" target="_blank" rel="external">Markdown笔记</a></p>
<ul>
<li><strong>开头加信息</strong></li>
</ul>
<p>标准示例：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">---</span><br><span class="line"></span>layout: post</span><br><span class="line">title: "使用hexo搭建博客"</span><br><span class="line">date: 2014-10-26 19:18</span><br><span class="line">comments: true</span><br><span class="line">tags: </span><br><span class="line"><span class="code">	- hexo</span></span><br><span class="line"><span class="header">description：</span><br><span class="line">---</span></span><br></pre></td></tr></table></figure></p>
<p>如果你是不想hexo g时被模板改变你的html的话，可在在文件头加layout: false</p>
<p>例如新建一个404页面，添加 source/404.html</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">layout: false</span><br><span class="line">---</span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>公益404<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h1</span>&gt;</span>404 Page Not Found<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"http://www.qq.com/404/search_children.js"</span>     <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>关于摘要</strong></li>
</ul>
<p>在文档中插入<code>&lt;!--more--&gt;</code>就可以将文章分隔，more以上的部分会已摘要的形式显示，当查看全文时more以下的部分才会显示出来。也可以在Markdown文件中定义description。</p>
<ul>
<li><strong>嵌入图片、音乐、视频</strong></li>
</ul>
<p>实际上，在hexo中，markdown支持html标签，md文件解析为html时原有的html部分会保留。有基于此，我们只要在文中插入符合html规范的代码即可。</p>
<p><strong>图片：</strong><br>同样放到source目中下。建议大家建立一个image文件夹，把文章中使用到的图片丢到这里来（当然可以按照你的习惯进行分类），之后在Markdown文件中按照这样的语法进行插入图片的操作。<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="link_label">图片名称</span>](<span class="link_url">&#123;&#123;BASE_PATH&#125;&#125;image/图片名称.jpg</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>音乐：</strong><br>以『虾米音乐』为例，歌曲页面有个『转帖』选项，将html代码或javascript代码复制到文中即可。<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;embed <span class="variable">src=</span><span class="string">"http://www.xiami.com/widget/0_168498_235_346_FF8719_494949/albumPlayer.swf"</span> <span class="variable">type=</span><span class="string">"application/x-shockwave-flash"</span> <span class="variable">width=</span><span class="string">"235"</span> <span class="variable">height=</span><span class="string">"346"</span> <span class="variable">wmode=</span><span class="string">"transparent"</span>&gt;&lt;/embed&gt;</span><br></pre></td></tr></table></figure></p>
<embed src="http://www.xiami.com/widget/0_168498_235_346_FF8719_494949/albumPlayer.swf" type="application/x-shockwave-flash" width="235" height="346" wmode="transparent">

<p><strong>视频：</strong><br>嵌入视频的方法和音乐类似，视频网站每个视频页面都会有一个『分享』或『转帖』按钮，点击可以查看代码。</p>
<p><br><br><br></p>
<hr>
<p><strong>参考文献</strong></p>
<ul>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/?utm_source=tuicool" target="_blank" rel="external">不如-hexo你的博客</a></li>
<li><a href="http://www.zhaokongnuan.com/2015/03/01/github-gitcafe/" target="_blank" rel="external">hexo博客同步到github和gitcafe</a></li>
<li><a href="http://blog.maxwi.com/2014/03/19/hexo-github-to-gitcafe/" target="_blank" rel="external">如何将托管在github上的hexo博客转到gitcafe</a></li>
<li><a href="https://gitcafe.com/GitCafe/Help/wiki/Pages-相关帮助" target="_blank" rel="external">如何创建Page</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>——————————————2015.03.16 更新—————————————————</p>
<p>最近出了3.0新版本，目前有些插件和主题并不兼容。所以暂时不更新，继续用2.8.3版本。若要更新可参考<a href="https://github.com/hexojs/hexo/wiki/Migrating-from-2.x-to-3.0">Migrating from 2.x to 3.0</a></p>
<p>——————————————2015.04.26 更新—————————————————</p>
<p>更新博客托管一份至GitCafe上。因为要用到新的插件，首先删除/usr/local/bin/hexo,按照上面文档升级hexo3.0。</p>
<hr>
<h1 id="Hexo安装"><strong>Hexo安装</strong></h1><p>Hexo的作者是<a href="https://twitter.com/tommy351">tommy351</a>，根据官方介绍，Hexo是一个简单、快速、强大的博客发布工具，支持Markdown格式。Hexo是一个基于Node.js的静态博客程序，其编译上百篇文字只需要几秒。hexo生成的静态网页可以直接放到GitHub Pages，BAE，SAE等平台上。<br>参考<a href="http://hexo.io/docs/index.html">官方文档</a></p>
<h2 id="安装Node-js"><strong>安装Node.js</strong></h2><p>在 Windows 环境下安装 Node.js非常简单，仅须<a href="http://nodejs.org/">下载</a>安装文件并执行即可完成安装。</p>
<h2 id="安装Hexo"><strong>安装Hexo</strong></h2><p>打开git。利用 <code>npm</code> 命令即可安装。<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g hexo</span><br></pre></td></tr></table></figure></p>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Markdown笔记]]></title>
    <link href="http://yoursite.com/2014/10/26/Markdown%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2014/10/26/Markdown笔记/</id>
    <published>2014-10-26T09:18:00.000Z</published>
    <updated>2015-04-28T11:08:33.000Z</updated>
    <content type="html"><![CDATA[<h1 id="斜体和粗体"><strong>斜体和粗体</strong></h1><p>使用 * 和 ** 表示斜体和粗体。<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是 <span class="keyword">*</span>斜体<span class="keyword">*</span>，这是 <span class="keyword">*</span><span class="keyword">*</span>粗体<span class="keyword">*</span><span class="keyword">*</span>。</span><br></pre></td></tr></table></figure></p>
<p>这是 <em>斜体</em>，这是 <strong>粗体</strong>。</p>
<h1 id="分级标题"><strong>分级标题</strong></h1><p>使用 === 表示一级标题，使用 —- 表示二级标题。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">这是一个一级标题</span><br><span class="line">============================</span></span><br><span class="line"></span><br><span class="line"><span class="header">这是一个二级标题</span><br><span class="line">--------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">### 这是一个三级标题</span><br></pre></td></tr></table></figure>
<p>你也可以选择在行首加井号表示不同级别的标题 (H1-H6)，例如：# H1, ## H2, ### H3，#### H4。<br><a id="more"></a></p>
<h1 id="外链接"><strong>外链接</strong></h1><p>使用 [描述](链接地址) 为文字增加外链接。<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是去往 [<span class="link_label">本人博客</span>](<span class="link_url">www.tanghaoblog.me</span>) 的链接。</span><br></pre></td></tr></table></figure></p>
<p>这是去往 <a href="http://thddaniel.github.com" target="_blank" rel="external">本人博客</a> 的链接。</p>
<h1 id="无序列表"><strong>无序列表</strong></h1><p>使用 *，+，- 表示无序列表。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>无序列表项 一</span><br><span class="line"><span class="bullet">+ </span>无序列表项 二</span><br><span class="line"><span class="bullet">- </span>无序列表项 三</span><br></pre></td></tr></table></figure>
<ul>
<li>无序列表项 一</li>
</ul>
<ul>
<li>无序列表项 二</li>
</ul>
<ul>
<li>无序列表项 三</li>
</ul>
<h1 id="有序列表"><strong>有序列表</strong></h1><p>使用数字和点表示有序列表。<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>有序列表项 一</span><br><span class="line"><span class="bullet">2. </span>有序列表项 二 </span><br><span class="line"><span class="bullet">3. </span>有序列表项 三</span><br></pre></td></tr></table></figure></p>
<h1 id="文字引用"><strong>文字引用</strong></h1><p>使用 &gt; 表示文字引用。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="blockquote">&gt; 一盏灯， 一片昏黄</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>一盏灯， 一片昏黄</p>
</blockquote>
<p>注：  &gt; 和文本之间要保留一个字符的空格。</p>
<h1 id="行内代码块"><strong>行内代码块</strong></h1><p>使用 `代码` 表示行内代码块。</p>
<p>示例：</p>
<p>让我们聊聊 <code>html</code>。</p>
<h1 id="代码块"><strong>代码块</strong></h1><p>使用 四个缩进空格 表示代码块。</p>
<pre><code>这是一个代码块，此行左侧有四个不可见的空格。
hello world.
</code></pre><h1 id="插入图像"><strong>插入图像</strong></h1><p>使用 ![描述](图片链接地址) 插入图像。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="link_label">我的头像</span>](<span class="link_url">https://raw.githubusercontent.com/thddaniel/Myblog/master/themes/yilia/source/img/anonymous.jpg</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/thddaniel/Myblog/master/themes/yilia/source/img/anonymous.jpg" alt="我的头像"></p>
<h1 id="删除线"><strong>删除线</strong></h1><p>使用 ~~ 表示删除线。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~这是一段错误的文本。~~</span><br></pre></td></tr></table></figure></p>
<p><del>这是一段错误的文本。</del></p>
<h1 id="加强的代码块"><strong>加强的代码块</strong></h1><p>支持编程语言的语法高亮的显示，行号显示。</p>
<p>非代码示例：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-<span class="built_in">get</span> install <span class="keyword">vim</span>-gnome</span><br></pre></td></tr></table></figure>
<p>Python 示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="decorator">@requires_authorization</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">somefunc</span><span class="params">(param1=<span class="string">''</span>, param2=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">'''A docstring'''</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Greater'</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span>) <span class="keyword">or</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="prompt">&gt;&gt;&gt; </span>message = <span class="string">'''interpreter</span><br><span class="line"><span class="prompt">... </span>prompt'''</span></span><br></pre></td></tr></table></figure>
<p>JavaScript 示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* nth element in the fibonacci series.</span><br><span class="line">* @param n &gt;= 0</span><br><span class="line">* @return the nth element, &gt;= 0.</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span><span class="params">(n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> tmp;</span><br><span class="line">  <span class="keyword">while</span> (--n &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    tmp = a;</span><br><span class="line">    a += b;</span><br><span class="line">    b = tmp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(fib(<span class="number">10</span>));</span><br></pre></td></tr></table></figure>
<h1 id="表格支持"><strong>表格支持</strong></h1><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 项目        | 价格   |  数量  |</span><br><span class="line">| --------   | -----<span class="symbol">:</span>  | <span class="symbol">:----</span><span class="symbol">:</span>  |</span><br><span class="line">| 计算机     | <span class="variable">$1600</span> |   <span class="number">5</span>     |</span><br><span class="line">| 手机        |   <span class="variable">$12</span>   |   <span class="number">12</span>   |</span><br><span class="line">| 管线        |    <span class="variable">$1</span>    |  <span class="number">234</span>  |</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>项目</th>
<th style="text-align:right">价格</th>
<th style="text-align:center">数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算机</td>
<td style="text-align:right">$1600</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>手机</td>
<td style="text-align:right">$12</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td>管线</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">234</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="斜体和粗体"><strong>斜体和粗体</strong></h1><p>使用 * 和 ** 表示斜体和粗体。<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是 <span class="keyword">*</span>斜体<span class="keyword">*</span>，这是 <span class="keyword">*</span><span class="keyword">*</span>粗体<span class="keyword">*</span><span class="keyword">*</span>。</span><br></pre></td></tr></table></figure></p>
<p>这是 <em>斜体</em>，这是 <strong>粗体</strong>。</p>
<h1 id="分级标题"><strong>分级标题</strong></h1><p>使用 === 表示一级标题，使用 —- 表示二级标题。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">这是一个一级标题</span><br><span class="line">============================</span></span><br><span class="line"></span><br><span class="line"><span class="header">这是一个二级标题</span><br><span class="line">--------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">### 这是一个三级标题</span><br></pre></td></tr></table></figure>
<p>你也可以选择在行首加井号表示不同级别的标题 (H1-H6)，例如：# H1, ## H2, ### H3，#### H4。<br>]]>
    
    </summary>
    
  </entry>
  
</feed>